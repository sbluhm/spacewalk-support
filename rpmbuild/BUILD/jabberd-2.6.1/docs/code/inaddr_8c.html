<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jabberd2: util/inaddr.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">jabberd2
   &#160;<span id="projectnumber">2.6.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_23ec12649285f9fabf3a6b7380226c28.html">util</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">inaddr.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>object like wrapper around struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a>  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br />
</div>
<p><a href="inaddr_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acc2cd45e9a7de34e96c0dadfe117ac2a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inaddr_8c.html#acc2cd45e9a7de34e96c0dadfe117ac2a">j_inet_pton</a> (const char *src, struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> *dst)</td></tr>
<tr class="memdesc:acc2cd45e9a7de34e96c0dadfe117ac2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the address of a struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> (modeled after the stdlib function inet_pton)  <a href="#acc2cd45e9a7de34e96c0dadfe117ac2a">More...</a><br /></td></tr>
<tr class="separator:acc2cd45e9a7de34e96c0dadfe117ac2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeb6c982b0ef8e06604c64b7652dd532"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inaddr_8c.html#adeb6c982b0ef8e06604c64b7652dd532">j_inet_ntop</a> (struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> *src, char *dst, size_t size)</td></tr>
<tr class="memdesc:adeb6c982b0ef8e06604c64b7652dd532"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the string representation of an address in struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> (modeled after the stdlib function inet_ntop)  <a href="#adeb6c982b0ef8e06604c64b7652dd532">More...</a><br /></td></tr>
<tr class="separator:adeb6c982b0ef8e06604c64b7652dd532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4fba3bdcaa4da1c0174c571b0f59379"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inaddr_8c.html#ad4fba3bdcaa4da1c0174c571b0f59379">j_inet_getport</a> (struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> *sa)</td></tr>
<tr class="memdesc:ad4fba3bdcaa4da1c0174c571b0f59379"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the port number out of a struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a>  <a href="#ad4fba3bdcaa4da1c0174c571b0f59379">More...</a><br /></td></tr>
<tr class="separator:ad4fba3bdcaa4da1c0174c571b0f59379"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7a10dca7e3feb1cf37ccd0a5aad6587"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inaddr_8c.html#ad7a10dca7e3feb1cf37ccd0a5aad6587">j_inet_setport</a> (struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> *sa, in_port_t port)</td></tr>
<tr class="memdesc:ad7a10dca7e3feb1cf37ccd0a5aad6587"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the port number in a struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a>  <a href="#ad7a10dca7e3feb1cf37ccd0a5aad6587">More...</a><br /></td></tr>
<tr class="separator:ad7a10dca7e3feb1cf37ccd0a5aad6587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76f1b27a55f3b0c1b49df96631c76e3c"><td class="memItemLeft" align="right" valign="top">socklen_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inaddr_8c.html#a76f1b27a55f3b0c1b49df96631c76e3c">j_inet_addrlen</a> (struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> *sa)</td></tr>
<tr class="memdesc:a76f1b27a55f3b0c1b49df96631c76e3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate the size of an address structure (on some unices the stdlibc functions for socket handling want to get the size of the address structure that is contained in the struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a>, not the size of struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> itself)  <a href="#a76f1b27a55f3b0c1b49df96631c76e3c">More...</a><br /></td></tr>
<tr class="separator:a76f1b27a55f3b0c1b49df96631c76e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>object like wrapper around struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> </p>
<p>The functions in this file are used as a wrapper around struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> to access this structure like an object. The structure is seen as an object that contains an IPv4 or an IPv6 address and these functions are the access methods to this object.</p>
<dl class="section warning"><dt>Warning</dt><dd>this is the same as mio/mio_inaddr.c - changes made here need to be made there too. is there anyway we can merge these without requiring mio to depend on util? </dd></dl>

<p class="definition">Definition in file <a class="el" href="inaddr_8c_source.html">inaddr.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="acc2cd45e9a7de34e96c0dadfe117ac2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc2cd45e9a7de34e96c0dadfe117ac2a">&#9670;&nbsp;</a></span>j_inet_pton()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int j_inet_pton </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> *&#160;</td>
          <td class="paramname"><em>dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the address of a struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> (modeled after the stdlib function inet_pton) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>the address that should be assigned to the struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> (either a dotted quad for IPv4 or a compressed IPv6 address) </td></tr>
    <tr><td class="paramname">dst</td><td>the struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> that should get the new address </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 if address is not valid </dd></dl>

<p class="definition">Definition at line <a class="el" href="inaddr_8c_source.html#l00046">46</a> of file <a class="el" href="inaddr_8c_source.html">inaddr.c</a>.</p>

<p class="reference">References <a class="el" href="util__compat_8h_source.html#l00042">AF_INET6</a>, <a class="el" href="util__compat_8h_source.html#l00086">sockaddr_in6::sin6_addr</a>, and <a class="el" href="util__compat_8h_source.html#l00099">sockaddr_storage::ss_family</a>.</p>

<p class="reference">Referenced by <a class="el" href="mio__impl_8h_source.html#l00390">_mio_connect()</a>, <a class="el" href="mio__impl_8h_source.html#l00333">_mio_listen()</a>, <a class="el" href="access_8c_source.html#l00164">access_allow()</a>, <a class="el" href="access_8c_source.html#l00204">access_check()</a>, and <a class="el" href="access_8c_source.html#l00184">access_deny()</a>.</p>

</div>
</div>
<a id="adeb6c982b0ef8e06604c64b7652dd532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeb6c982b0ef8e06604c64b7652dd532">&#9670;&nbsp;</a></span>j_inet_ntop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* j_inet_ntop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get the string representation of an address in struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> (modeled after the stdlib function inet_ntop) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>the struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> where the address should be read </td></tr>
    <tr><td class="paramname">dst</td><td>where to write the result </td></tr>
    <tr><td class="paramname">size</td><td>the size of the result buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL if failed, pointer to the result otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="inaddr_8c_source.html#l00097">97</a> of file <a class="el" href="inaddr_8c_source.html">inaddr.c</a>.</p>

<p class="reference">References <a class="el" href="util__compat_8h_source.html#l00042">AF_INET6</a>, <a class="el" href="util__compat_8h_source.html#l00086">sockaddr_in6::sin6_addr</a>, and <a class="el" href="util__compat_8h_source.html#l00099">sockaddr_storage::ss_family</a>.</p>

<p class="reference">Referenced by <a class="el" href="mio__impl_8h_source.html#l00156">_mio_accept()</a>.</p>

</div>
</div>
<a id="ad4fba3bdcaa4da1c0174c571b0f59379"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4fba3bdcaa4da1c0174c571b0f59379">&#9670;&nbsp;</a></span>j_inet_getport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int j_inet_getport </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> *&#160;</td>
          <td class="paramname"><em>sa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get the port number out of a struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sa</td><td>the struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> where we want to read the port </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the port number (already converted to host byte order!) </dd></dl>

<p class="definition">Definition at line <a class="el" href="inaddr_8c_source.html#l00148">148</a> of file <a class="el" href="inaddr_8c_source.html">inaddr.c</a>.</p>

<p class="reference">References <a class="el" href="util__compat_8h_source.html#l00042">AF_INET6</a>, <a class="el" href="util__compat_8h_source.html#l00084">sockaddr_in6::sin6_port</a>, and <a class="el" href="util__compat_8h_source.html#l00099">sockaddr_storage::ss_family</a>.</p>

<p class="reference">Referenced by <a class="el" href="c2s_8c_source.html#l00505">_c2s_client_mio_callback()</a>, <a class="el" href="mio__impl_8h_source.html#l00156">_mio_accept()</a>, <a class="el" href="in_8c_source.html#l00063">in_mio_callback()</a>, and <a class="el" href="router_2router_8c_source.html#l01028">router_mio_callback()</a>.</p>

</div>
</div>
<a id="ad7a10dca7e3feb1cf37ccd0a5aad6587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7a10dca7e3feb1cf37ccd0a5aad6587">&#9670;&nbsp;</a></span>j_inet_setport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int j_inet_setport </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> *&#160;</td>
          <td class="paramname"><em>sa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_port_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the port number in a struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sa</td><td>the struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> where the port should be set </td></tr>
    <tr><td class="paramname">port</td><td>the port number that should be set (in host byte order) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 if address family is not supported </dd></dl>

<p class="definition">Definition at line <a class="el" href="inaddr_8c_source.html#l00173">173</a> of file <a class="el" href="inaddr_8c_source.html">inaddr.c</a>.</p>

<p class="reference">References <a class="el" href="util__compat_8h_source.html#l00042">AF_INET6</a>, <a class="el" href="util__compat_8h_source.html#l00084">sockaddr_in6::sin6_port</a>, and <a class="el" href="util__compat_8h_source.html#l00099">sockaddr_storage::ss_family</a>.</p>

<p class="reference">Referenced by <a class="el" href="mio__impl_8h_source.html#l00390">_mio_connect()</a>, and <a class="el" href="mio__impl_8h_source.html#l00333">_mio_listen()</a>.</p>

</div>
</div>
<a id="a76f1b27a55f3b0c1b49df96631c76e3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76f1b27a55f3b0c1b49df96631c76e3c">&#9670;&nbsp;</a></span>j_inet_addrlen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">socklen_t j_inet_addrlen </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> *&#160;</td>
          <td class="paramname"><em>sa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculate the size of an address structure (on some unices the stdlibc functions for socket handling want to get the size of the address structure that is contained in the struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a>, not the size of struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> itself) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sa</td><td>the struct <a class="el" href="structsockaddr__storage.html">sockaddr_storage</a> for which we want to get the size of the contained address structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the size of the contained address structure </dd></dl>

<p class="definition">Definition at line <a class="el" href="inaddr_8c_source.html#l00203">203</a> of file <a class="el" href="inaddr_8c_source.html">inaddr.c</a>.</p>

<p class="reference">References <a class="el" href="util__compat_8h_source.html#l00042">AF_INET6</a>, and <a class="el" href="util__compat_8h_source.html#l00099">sockaddr_storage::ss_family</a>.</p>

<p class="reference">Referenced by <a class="el" href="mio__impl_8h_source.html#l00390">_mio_connect()</a>, and <a class="el" href="mio__impl_8h_source.html#l00333">_mio_listen()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
