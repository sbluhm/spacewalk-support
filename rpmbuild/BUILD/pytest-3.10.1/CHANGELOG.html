<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.14: http://docutils.sourceforge.net/" />
<title>Changelog history</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7952 2016-07-26 18:15:59Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="changelog-history">
<h1 class="title">Changelog history</h1>

<p>Versions follow <a class="reference external" href="https://semver.org/">Semantic Versioning</a> (<tt class="docutils literal"><span class="pre">&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</span></tt>).</p>
<p>Backward incompatible (breaking) changes will only be introduced in major versions
with advance notice in the <strong>Deprecations</strong> section of releases.</p>
<!-- You should *NOT* be adding new change log entries to this file, this
file is managed by towncrier. You *may* edit previous change logs to
fix problems like typo corrections or such.
To add a new change log entry, please see
https://pip.pypa.io/en/latest/development/#adding-a-news-entry
we named the news folder changelog -->
<!-- towncrier release notes start -->
<div class="section" id="pytest-3-10-1-2018-11-11">
<h1>pytest 3.10.1 (2018-11-11)</h1>
<div class="section" id="bug-fixes">
<h2>Bug Fixes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4287">#4287</a>: Fix nested usage of debugging plugin (pdb), e.g. with pytester's <tt class="docutils literal">testdir.runpytest</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4304">#4304</a>: Block the <tt class="docutils literal">stepwise</tt> plugin if <tt class="docutils literal">cacheprovider</tt> is also blocked, as one depends on the other.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4306">#4306</a>: Parse <tt class="docutils literal">minversion</tt> as an actual version and not as dot-separated strings.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4310">#4310</a>: Fix duplicate collection due to multiple args matching the same packages.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4321">#4321</a>: Fix <tt class="docutils literal">item.nodeid</tt> with resolved symlinks.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4325">#4325</a>: Fix collection of direct symlinked files, where the target does not match <tt class="docutils literal">python_files</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4329">#4329</a>: Fix TypeError in report_collect with _collect_report_last_write.</li>
</ul>
</div>
<div class="section" id="trivial-internal-changes">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4305">#4305</a>: Replace byte/unicode helpers in test_capture with python level syntax.</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-10-0-2018-11-03">
<h1>pytest 3.10.0 (2018-11-03)</h1>
<div class="section" id="features">
<h2>Features</h2>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2619">#2619</a>: Resume capturing output after <tt class="docutils literal">continue</tt> with <tt class="docutils literal"><span class="pre">__import__(&quot;pdb&quot;).set_trace()</span></tt>.</p>
<p>This also adds a new <tt class="docutils literal">pytest_leave_pdb</tt> hook, and passes in <tt class="docutils literal">pdb</tt> to the
existing <tt class="docutils literal">pytest_enter_pdb</tt> hook.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4147">#4147</a>: Add <tt class="docutils literal"><span class="pre">--sw</span></tt>, <tt class="docutils literal"><span class="pre">--stepwise</span></tt> as an alternative to <tt class="docutils literal"><span class="pre">--lf</span> <span class="pre">-x</span></tt> for stopping at the first failure, but starting the next test invocation from that test.  See <a class="reference external" href="https://docs.pytest.org/en/latest/cache.html#stepwise">the documentation</a> for more info.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4188">#4188</a>: Make <tt class="docutils literal"><span class="pre">--color</span></tt> emit colorful dots when not running in verbose mode. Earlier, it would only colorize the test-by-test output if <tt class="docutils literal"><span class="pre">--verbose</span></tt> was also passed.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4225">#4225</a>: Improve performance with collection reporting in non-quiet mode with terminals.</p>
<p>The &quot;collecting …&quot; message is only printed/updated every 0.5s.</p>
</li>
</ul>
</div>
<div class="section" id="id13">
<h2>Bug Fixes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2701">#2701</a>: Fix false <tt class="docutils literal">RemovedInPytest4Warning: usage of <span class="pre">Session...</span> is deprecated, please use pytest</tt> warnings.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4046">#4046</a>: Fix problems with running tests in package <tt class="docutils literal">__init__.py</tt> files.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4260">#4260</a>: Swallow warnings during anonymous compilation of source.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4262">#4262</a>: Fix access denied error when deleting stale directories created by <tt class="docutils literal">tmpdir</tt> / <tt class="docutils literal">tmp_path</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/611">#611</a>: Naming a fixture <tt class="docutils literal">request</tt> will now raise a warning: the <tt class="docutils literal">request</tt> fixture is internal and
should not be overwritten as it will lead to internal errors.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4266">#4266</a>: Handle (ignore) exceptions raised during collection, e.g. with Django's LazySettings proxy class.</li>
</ul>
</div>
<div class="section" id="improved-documentation">
<h2>Improved Documentation</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4255">#4255</a>: Added missing documentation about the fact that module names passed to filter warnings are not regex-escaped.</li>
</ul>
</div>
<div class="section" id="id21">
<h2>Trivial/Internal Changes</h2>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4272">#4272</a>: Display cachedir also in non-verbose mode if non-default.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4277">#4277</a>: pdb: improve message about output capturing with <tt class="docutils literal">set_trace</tt>.</p>
<p>Do not display &quot;IO-capturing turned off/on&quot; when <tt class="docutils literal"><span class="pre">-s</span></tt> is used to avoid
confusion.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4279">#4279</a>: Improve message and stack level of warnings issued by <tt class="docutils literal">monkeypatch.setenv</tt> when the value of the environment variable is not a <tt class="docutils literal">str</tt>.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-9-3-2018-10-27">
<h1>pytest 3.9.3 (2018-10-27)</h1>
<div class="section" id="id25">
<h2>Bug Fixes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4174">#4174</a>: Fix &quot;ValueError: Plugin already registered&quot; with conftest plugins via symlink.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4181">#4181</a>: Handle race condition between creation and deletion of temporary folders.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4221">#4221</a>: Fix bug where the warning summary at the end of the test session was not showing the test where the warning was originated.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4243">#4243</a>: Fix regression when <tt class="docutils literal">stacklevel</tt> for warnings was passed as positional argument on python2.</li>
</ul>
</div>
<div class="section" id="id30">
<h2>Improved Documentation</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3851">#3851</a>: Add reference to <tt class="docutils literal">empty_parameter_set_mark</tt> ini option in documentation of <tt class="docutils literal">&#64;pytest.mark.parametrize</tt></li>
</ul>
</div>
<div class="section" id="id32">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4028">#4028</a>: Revert patching of <tt class="docutils literal">sys.breakpointhook</tt> since it appears to do nothing.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4233">#4233</a>: Apply an import sorter (<tt class="docutils literal"><span class="pre">reorder-python-imports</span></tt>) to the codebase.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4248">#4248</a>: Remove use of unnecessary compat shim, six.binary_type</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-9-2-2018-10-22">
<h1>pytest 3.9.2 (2018-10-22)</h1>
<div class="section" id="id36">
<h2>Bug Fixes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2909">#2909</a>: Improve error message when a recursive dependency between fixtures is detected.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3340">#3340</a>: Fix logging messages not shown in hooks <tt class="docutils literal">pytest_sessionstart()</tt> and <tt class="docutils literal">pytest_sessionfinish()</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3533">#3533</a>: Fix unescaped XML raw objects in JUnit report for skipped tests</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3691">#3691</a>: Python 2: safely format warning message about passing unicode strings to <tt class="docutils literal">warnings.warn</tt>, which may cause
surprising <tt class="docutils literal">MemoryError</tt> exception when monkey patching <tt class="docutils literal">warnings.warn</tt> itself.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4026">#4026</a>: Improve error message when it is not possible to determine a function's signature.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4177">#4177</a>: Pin <tt class="docutils literal"><span class="pre">setuptools&gt;=40.0</span></tt> to support <tt class="docutils literal">py_modules</tt> in <tt class="docutils literal">setup.cfg</tt></li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4179">#4179</a>: Restore the tmpdir behaviour of symlinking the current test run.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4192">#4192</a>: Fix filename reported by <tt class="docutils literal">warnings.warn</tt> when using <tt class="docutils literal">recwarn</tt> under python2.</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-9-1-2018-10-16">
<h1>pytest 3.9.1 (2018-10-16)</h1>
<div class="section" id="id45">
<h2>Features</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4159">#4159</a>: For test-suites containing test classes, the information about the subclassed
module is now output only if a higher verbosity level is specified (at least
&quot;-vv&quot;).</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-9-0-2018-10-15-not-published-due-to-a-release-automation-bug">
<h1>pytest 3.9.0 (2018-10-15 - not published due to a release automation bug)</h1>
<div class="section" id="deprecations">
<h2>Deprecations</h2>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3616">#3616</a>: The following accesses have been documented as deprecated for years, but are now actually emitting deprecation warnings.</p>
<ul>
<li><p class="first">Access of <tt class="docutils literal">Module</tt>, <tt class="docutils literal">Function</tt>, <tt class="docutils literal">Class</tt>, <tt class="docutils literal">Instance</tt>, <tt class="docutils literal">File</tt> and <tt class="docutils literal">Item</tt> through <tt class="docutils literal">Node</tt> instances. Now
users will this warning:</p>
<pre class="literal-block">
usage of Function.Module is deprecated, please use pytest.Module instead
</pre>
<p>Users should just <tt class="docutils literal">import pytest</tt> and access those objects using the <tt class="docutils literal">pytest</tt> module.</p>
</li>
<li><p class="first"><tt class="docutils literal">request.cached_setup</tt>, this was the precursor of the setup/teardown mechanism available to fixtures. You can
consult <a class="reference external" href="https://docs.pytest.org/en/latest/funcarg_compare.html">funcarg comparison section in the docs</a>.</p>
</li>
<li><p class="first">Using objects named <tt class="docutils literal">&quot;Class&quot;</tt> as a way to customize the type of nodes that are collected in <tt class="docutils literal">Collector</tt>
subclasses has been deprecated. Users instead should use <tt class="docutils literal">pytest_collect_make_item</tt> to customize node types during
collection.</p>
<p>This issue should affect only advanced plugins who create new collection types, so if you see this warning
message please contact the authors so they can change the code.</p>
</li>
<li><p class="first">The warning that produces the message below has changed to <tt class="docutils literal">RemovedInPytest4Warning</tt>:</p>
<pre class="literal-block">
getfuncargvalue is deprecated, use getfixturevalue
</pre>
</li>
</ul>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3988">#3988</a>: Add a Deprecation warning for pytest.ensuretemp as it was deprecated since a while.</p>
</li>
</ul>
</div>
<div class="section" id="id49">
<h2>Features</h2>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2293">#2293</a>: Improve usage errors messages by hiding internal details which can be distracting and noisy.</p>
<p>This has the side effect that some error conditions that previously raised generic errors (such as
<tt class="docutils literal">ValueError</tt> for unregistered marks) are now raising <tt class="docutils literal">Failed</tt> exceptions.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3332">#3332</a>: Improve the error displayed when a <tt class="docutils literal">conftest.py</tt> file could not be imported.</p>
<p>In order to implement this, a new <tt class="docutils literal">chain</tt> parameter was added to <tt class="docutils literal">ExceptionInfo.getrepr</tt>
to show or hide chained tracebacks in Python 3 (defaults to <tt class="docutils literal">True</tt>).</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3849">#3849</a>: Add <tt class="docutils literal">empty_parameter_set_mark=fail_at_collect</tt> ini option for raising an exception when parametrize collects an empty set.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3964">#3964</a>: Log messages generated in the collection phase are shown when
live-logging is enabled and/or when they are logged to a file.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3985">#3985</a>: Introduce <tt class="docutils literal">tmp_path</tt> as a fixture providing a Path object.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4013">#4013</a>: Deprecation warnings are now shown even if you customize the warnings filters yourself. In the previous version
any customization would override pytest's filters and deprecation warnings would fall back to being hidden by default.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4073">#4073</a>: Allow specification of timeout for <tt class="docutils literal">Testdir.runpytest_subprocess()</tt> and <tt class="docutils literal">Testdir.run()</tt>.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4098">#4098</a>: Add returncode argument to pytest.exit() to exit pytest with a specific return code.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4102">#4102</a>: Reimplement <tt class="docutils literal">pytest.deprecated_call</tt> using <tt class="docutils literal">pytest.warns</tt> so it supports the <tt class="docutils literal"><span class="pre">match='...'</span></tt> keyword argument.</p>
<p>This has the side effect that <tt class="docutils literal">pytest.deprecated_call</tt> now raises <tt class="docutils literal">pytest.fail.Exception</tt> instead
of <tt class="docutils literal">AssertionError</tt>.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4149">#4149</a>: Require setuptools&gt;=30.3 and move most of the metadata to <tt class="docutils literal">setup.cfg</tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id60">
<h2>Bug Fixes</h2>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2535">#2535</a>: Improve error message when test functions of <tt class="docutils literal">unittest.TestCase</tt> subclasses use a parametrized fixture.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3057">#3057</a>: <tt class="docutils literal">request.fixturenames</tt> now correctly returns the name of fixtures created by <tt class="docutils literal">request.getfixturevalue()</tt>.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3946">#3946</a>: Warning filters passed as command line options using <tt class="docutils literal"><span class="pre">-W</span></tt> now take precedence over filters defined in <tt class="docutils literal">ini</tt>
configuration files.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4066">#4066</a>: Fix source reindenting by using <tt class="docutils literal">textwrap.dedent</tt> directly.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4102">#4102</a>: <tt class="docutils literal">pytest.warn</tt> will capture previously-warned warnings in Python 2. Previously they were never raised.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4108">#4108</a>: Resolve symbolic links for args.</p>
<p>This fixes running <tt class="docutils literal">pytest <span class="pre">tests/test_foo.py::test_bar</span></tt>, where <tt class="docutils literal">tests</tt>
is a symlink to <tt class="docutils literal">project/app/tests</tt>:
previously <tt class="docutils literal">project/app/conftest.py</tt> would be ignored for fixtures then.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4132">#4132</a>: Fix duplicate printing of internal errors when using <tt class="docutils literal"><span class="pre">--pdb</span></tt>.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4135">#4135</a>: pathlib based tmpdir cleanup now correctly handles symlinks in the folder.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4152">#4152</a>: Display the filename when encountering <tt class="docutils literal">SyntaxWarning</tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id70">
<h2>Improved Documentation</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3713">#3713</a>: Update usefixtures documentation to clarify that it can't be used with fixture functions.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4058">#4058</a>: Update fixture documentation to specify that a fixture can be invoked twice in the scope it's defined for.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4064">#4064</a>: According to unittest.rst, setUpModule and tearDownModule were not implemented, but it turns out they are. So updated the documentation for unittest.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4151">#4151</a>: Add tempir testing example to CONTRIBUTING.rst guide</li>
</ul>
</div>
<div class="section" id="id75">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2293">#2293</a>: The internal <tt class="docutils literal">MarkerError</tt> exception has been removed.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3988">#3988</a>: Port the implementation of tmpdir to pathlib.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4063">#4063</a>: Exclude 0.00 second entries from <tt class="docutils literal"><span class="pre">--duration</span></tt> output unless <tt class="docutils literal"><span class="pre">-vv</span></tt> is passed on the command-line.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4093">#4093</a>: Fixed formatting of string literals in internal tests.</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-8-2-2018-10-02">
<h1>pytest 3.8.2 (2018-10-02)</h1>
<div class="section" id="deprecations-and-removals">
<h2>Deprecations and Removals</h2>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4036">#4036</a>: The <tt class="docutils literal">item</tt> parameter of <tt class="docutils literal">pytest_warning_captured</tt> hook is now documented as deprecated. We realized only after
the <tt class="docutils literal">3.8</tt> release that this parameter is incompatible with <tt class="docutils literal"><span class="pre">pytest-xdist</span></tt>.</p>
<p>Our policy is to not deprecate features during bugfix releases, but in this case we believe it makes sense as we are
only documenting it as deprecated, without issuing warnings which might potentially break test suites. This will get
the word out that hook implementers should not use this parameter at all.</p>
<p>In a future release <tt class="docutils literal">item</tt> will always be <tt class="docutils literal">None</tt> and will emit a proper warning when a hook implementation
makes use of it.</p>
</li>
</ul>
</div>
<div class="section" id="id81">
<h2>Bug Fixes</h2>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3539">#3539</a>: Fix reload on assertion rewritten modules.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4034">#4034</a>: The <tt class="docutils literal">.user_properties</tt> attribute of <tt class="docutils literal">TestReport</tt> objects is a list
of (name, value) tuples, but could sometimes be instantiated as a tuple
of tuples.  It is now always a list.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4039">#4039</a>: No longer issue warnings about using <tt class="docutils literal">pytest_plugins</tt> in non-top-level directories when using <tt class="docutils literal"><span class="pre">--pyargs</span></tt>: the
current <tt class="docutils literal"><span class="pre">--pyargs</span></tt> mechanism is not reliable and might give false negatives.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4040">#4040</a>: Exclude empty reports for passed tests when <tt class="docutils literal"><span class="pre">-rP</span></tt> option is used.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4051">#4051</a>: Improve error message when an invalid Python expression is passed to the <tt class="docutils literal"><span class="pre">-m</span></tt> option.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4056">#4056</a>: <tt class="docutils literal">MonkeyPatch.setenv</tt> and <tt class="docutils literal">MonkeyPatch.delenv</tt> issue a warning if the environment variable name is not <tt class="docutils literal">str</tt> on Python 2.</p>
<p>In Python 2, adding <tt class="docutils literal">unicode</tt> keys to <tt class="docutils literal">os.environ</tt> causes problems with <tt class="docutils literal">subprocess</tt> (and possible other modules),
making this a subtle bug specially susceptible when used with <tt class="docutils literal">from __future__ import unicode_literals</tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id88">
<h2>Improved Documentation</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3928">#3928</a>: Add possible values for fixture scope to docs.</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-8-1-2018-09-22">
<h1>pytest 3.8.1 (2018-09-22)</h1>
<div class="section" id="id90">
<h2>Bug Fixes</h2>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3286">#3286</a>: <tt class="docutils literal">.pytest_cache</tt> directory is now automatically ignored by Git. Users who would like to contribute a solution for other SCMs please consult/comment on this issue.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3749">#3749</a>: Fix the following error during collection of tests inside packages:</p>
<pre class="literal-block">
TypeError: object of type 'Package' has no len()
</pre>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3941">#3941</a>: Fix bug where indirect parametrization would consider the scope of all fixtures used by the test function to determine the parametrization scope, and not only the scope of the fixtures being parametrized.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3973">#3973</a>: Fix crash of the assertion rewriter if a test changed the current working directory without restoring it afterwards.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3998">#3998</a>: Fix issue that prevented some caplog properties (for example <tt class="docutils literal">record_tuples</tt>) from being available when entering the debugger with <tt class="docutils literal"><span class="pre">--pdb</span></tt>.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3999">#3999</a>: Fix <tt class="docutils literal">UnicodeDecodeError</tt> in python2.x when a class returns a non-ascii binary <tt class="docutils literal">__repr__</tt> in an assertion which also contains non-ascii text.</p>
</li>
</ul>
</div>
<div class="section" id="id97">
<h2>Improved Documentation</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3996">#3996</a>: New <a class="reference external" href="https://docs.pytest.org/en/latest/deprecations.html">Deprecations and Removals</a> page shows all currently
deprecated features, the rationale to do so, and alternatives to update your code. It also list features removed
from pytest in past major releases to help those with ancient pytest versions to upgrade.</li>
</ul>
</div>
<div class="section" id="id100">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3955">#3955</a>: Improve pre-commit detection for changelog filenames</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3975">#3975</a>: Remove legacy code around im_func as that was python2 only</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-8-0-2018-09-05">
<h1>pytest 3.8.0 (2018-09-05)</h1>
<div class="section" id="id103">
<h2>Deprecations and Removals</h2>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2452">#2452</a>: <tt class="docutils literal">Config.warn</tt> and <tt class="docutils literal">Node.warn</tt> have been
deprecated, see <a class="reference external" href="https://docs.pytest.org/en/latest/deprecations.html#config-warn-and-node-warn">https://docs.pytest.org/en/latest/deprecations.html#config-warn-and-node-warn</a> for rationale and
examples.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3936">#3936</a>: <tt class="docutils literal">&#64;pytest.mark.filterwarnings</tt> second parameter is no longer regex-escaped,
making it possible to actually use regular expressions to check the warning message.</p>
<p><strong>Note</strong>: regex-escaping the match string was an implementation oversight that might break test suites which depend
on the old behavior.</p>
</li>
</ul>
</div>
<div class="section" id="id106">
<h2>Features</h2>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2452">#2452</a>: Internal pytest warnings are now issued using the standard <tt class="docutils literal">warnings</tt> module, making it possible to use
the standard warnings filters to manage those warnings. This introduces <tt class="docutils literal">PytestWarning</tt>,
<tt class="docutils literal">PytestDeprecationWarning</tt> and <tt class="docutils literal">RemovedInPytest4Warning</tt> warning types as part of the public API.</p>
<p>Consult <a class="reference external" href="https://docs.pytest.org/en/latest/warnings.html#internal-pytest-warnings">the documentation</a> for more info.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2908">#2908</a>: <tt class="docutils literal">DeprecationWarning</tt> and <tt class="docutils literal">PendingDeprecationWarning</tt> are now shown by default if no other warning filter is
configured. This makes pytest more compliant with
<a class="reference external" href="https://www.python.org/dev/peps/pep-0565/#recommended-filter-settings-for-test-runners">PEP-0506</a>. See
<a class="reference external" href="https://docs.pytest.org/en/latest/warnings.html#deprecationwarning-and-pendingdeprecationwarning">the docs</a> for
more info.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3251">#3251</a>: Warnings are now captured and displayed during test collection.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3784">#3784</a>: <tt class="docutils literal">PYTEST_DISABLE_PLUGIN_AUTOLOAD</tt> environment variable disables plugin auto-loading when set.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3829">#3829</a>: Added the <tt class="docutils literal">count</tt> option to <tt class="docutils literal">console_output_style</tt> to enable displaying the progress as a count instead of a percentage.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3837">#3837</a>: Added support for 'xfailed' and 'xpassed' outcomes to the <tt class="docutils literal">pytester.RunResult.assert_outcomes</tt> signature.</p>
</li>
</ul>
</div>
<div class="section" id="id113">
<h2>Bug Fixes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3911">#3911</a>: Terminal writer now takes into account unicode character width when writing out progress.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3913">#3913</a>: Pytest now returns with correct exit code (EXIT_USAGEERROR, 4) when called with unknown arguments.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3918">#3918</a>: Improve performance of assertion rewriting.</li>
</ul>
</div>
<div class="section" id="id117">
<h2>Improved Documentation</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3566">#3566</a>: Added a blurb in usage.rst for the usage of -r flag which is used to show an extra test summary info.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3907">#3907</a>: Corrected type of the exceptions collection passed to <tt class="docutils literal">xfail</tt>: <tt class="docutils literal">raises</tt> argument accepts a <tt class="docutils literal">tuple</tt> instead of <tt class="docutils literal">list</tt>.</li>
</ul>
</div>
<div class="section" id="id120">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3853">#3853</a>: Removed <tt class="docutils literal">&quot;run all (no recorded failures)&quot;</tt> message printed with <tt class="docutils literal"><span class="pre">--failed-first</span></tt> and <tt class="docutils literal"><span class="pre">--last-failed</span></tt> when there are no failed tests.</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-7-4-2018-08-29">
<h1>pytest 3.7.4 (2018-08-29)</h1>
<div class="section" id="id122">
<h2>Bug Fixes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3506">#3506</a>: Fix possible infinite recursion when writing <tt class="docutils literal">.pyc</tt> files.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3853">#3853</a>: Cache plugin now obeys the <tt class="docutils literal"><span class="pre">-q</span></tt> flag when <tt class="docutils literal"><span class="pre">--last-failed</span></tt> and <tt class="docutils literal"><span class="pre">--failed-first</span></tt> flags are used.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3883">#3883</a>: Fix bad console output when using <tt class="docutils literal">console_output_style=classic</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3888">#3888</a>: Fix macOS specific code using <tt class="docutils literal">capturemanager</tt> plugin in doctests.</li>
</ul>
</div>
<div class="section" id="id127">
<h2>Improved Documentation</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3902">#3902</a>: Fix pytest.org links</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-7-3-2018-08-26">
<h1>pytest 3.7.3 (2018-08-26)</h1>
<div class="section" id="id129">
<h2>Bug Fixes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3033">#3033</a>: Fixtures during teardown can again use <tt class="docutils literal">capsys</tt> and <tt class="docutils literal">capfd</tt> to inspect output captured during tests.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3773">#3773</a>: Fix collection of tests from <tt class="docutils literal">__init__.py</tt> files if they match the <tt class="docutils literal">python_files</tt> configuration option.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3796">#3796</a>: Fix issue where teardown of fixtures of consecutive sub-packages were executed once, at the end of the outer
package.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3816">#3816</a>: Fix bug where <tt class="docutils literal"><span class="pre">--show-capture=no</span></tt> option would still show logs printed during fixture teardown.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3819">#3819</a>: Fix <tt class="docutils literal">stdout/stderr</tt> not getting captured when real-time cli logging is active.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3843">#3843</a>: Fix collection error when specifying test functions directly in the command line using <tt class="docutils literal"><span class="pre">test.py::test</span></tt> syntax together with <tt class="docutils literal"><span class="pre">--doctest-modules</span></tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3848">#3848</a>: Fix bugs where unicode arguments could not be passed to <tt class="docutils literal">testdir.runpytest</tt> on Python 2.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3854">#3854</a>: Fix double collection of tests within packages when the filename starts with a capital letter.</li>
</ul>
</div>
<div class="section" id="id138">
<h2>Improved Documentation</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3824">#3824</a>: Added example for multiple glob pattern matches in <tt class="docutils literal">python_files</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3833">#3833</a>: Added missing docs for <tt class="docutils literal">pytester.Testdir</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3870">#3870</a>: Correct documentation for setuptools integration.</li>
</ul>
</div>
<div class="section" id="id142">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3826">#3826</a>: Replace broken type annotations with type comments.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3845">#3845</a>: Remove a reference to issue <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/568">#568</a> from the documentation, which has since been
fixed.</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-7-2-2018-08-16">
<h1>pytest 3.7.2 (2018-08-16)</h1>
<div class="section" id="id146">
<h2>Bug Fixes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3671">#3671</a>: Fix <tt class="docutils literal">filterwarnings</tt> not being registered as a builtin mark.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3768">#3768</a>, <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3789">#3789</a>: Fix test collection from packages mixed with normal directories.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3771">#3771</a>: Fix infinite recursion during collection if a <tt class="docutils literal">pytest_ignore_collect</tt> hook returns <tt class="docutils literal">False</tt> instead of <tt class="docutils literal">None</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3774">#3774</a>: Fix bug where decorated fixtures would lose functionality (for example <tt class="docutils literal">&#64;mock.patch</tt>).</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3775">#3775</a>: Fix bug where importing modules or other objects with prefix <tt class="docutils literal">pytest_</tt> prefix would raise a <tt class="docutils literal">PluginValidationError</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3788">#3788</a>: Fix <tt class="docutils literal">AttributeError</tt> during teardown of <tt class="docutils literal">TestCase</tt> subclasses which raise an exception during <tt class="docutils literal">__init__</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3804">#3804</a>: Fix traceback reporting for exceptions with <tt class="docutils literal">__cause__</tt> cycles.</li>
</ul>
</div>
<div class="section" id="id155">
<h2>Improved Documentation</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3746">#3746</a>: Add documentation for <tt class="docutils literal">metafunc.config</tt> that had been mistakenly hidden.</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-7-1-2018-08-02">
<h1>pytest 3.7.1 (2018-08-02)</h1>
<div class="section" id="id157">
<h2>Bug Fixes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3473">#3473</a>: Raise immediately if <tt class="docutils literal">approx()</tt> is given an expected value of a type it doesn't understand (e.g. strings, nested dicts, etc.).</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3712">#3712</a>: Correctly represent the dimensions of a numpy array when calling <tt class="docutils literal">repr()</tt> on <tt class="docutils literal">approx()</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3742">#3742</a>: Fix incompatibility with third party plugins during collection, which produced the error <tt class="docutils literal">object has no attribute '_collectfile'</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3745">#3745</a>: Display the absolute path if <tt class="docutils literal">cache_dir</tt> is not relative to the <tt class="docutils literal">rootdir</tt> instead of failing.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3747">#3747</a>: Fix compatibility problem with plugins and the warning code issued by fixture functions when they are called directly.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3748">#3748</a>: Fix infinite recursion in <tt class="docutils literal">pytest.approx</tt> with arrays in <tt class="docutils literal">numpy&lt;1.13</tt>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3757">#3757</a>: Pin pathlib2 to <tt class="docutils literal">&gt;=2.2.0</tt> as we require <tt class="docutils literal">__fspath__</tt> support.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3763">#3763</a>: Fix <tt class="docutils literal">TypeError</tt> when the assertion message is <tt class="docutils literal">bytes</tt> in python 3.</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-7-0-2018-07-30">
<h1>pytest 3.7.0 (2018-07-30)</h1>
<div class="section" id="id166">
<h2>Deprecations and Removals</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2639">#2639</a>: <tt class="docutils literal">pytest_namespace</tt> has been <a class="reference external" href="https://docs.pytest.org/en/latest/deprecations.html#pytest-namespace">deprecated</a>.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3661">#3661</a>: Calling a fixture function directly, as opposed to request them in a test function, now issues a <tt class="docutils literal">RemovedInPytest4Warning</tt>. See <a class="reference external" href="https://docs.pytest.org/en/latest/deprecations.html#calling-fixtures-directly">the documentation for rationale and examples</a>.</li>
</ul>
</div>
<div class="section" id="id169">
<h2>Features</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2283">#2283</a>: New <tt class="docutils literal">package</tt> fixture scope: fixtures are finalized when the last test of a <em>package</em> finishes. This feature is considered <strong>experimental</strong>, so use it sparingly.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3576">#3576</a>: <tt class="docutils literal">Node.add_marker</tt> now supports an <tt class="docutils literal">append=True/False</tt> parameter to determine whether the mark comes last (default) or first.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3579">#3579</a>: Fixture <tt class="docutils literal">caplog</tt> now has a <tt class="docutils literal">messages</tt> property, providing convenient access to the format-interpolated log messages without the extra data provided by the formatter/handler.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3610">#3610</a>: New <tt class="docutils literal"><span class="pre">--trace</span></tt> option to enter the debugger at the start of a test.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3623">#3623</a>: Introduce <tt class="docutils literal">pytester.copy_example</tt> as helper to do acceptance tests against examples from the project.</li>
</ul>
</div>
<div class="section" id="id175">
<h2>Bug Fixes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2220">#2220</a>: Fix a bug where fixtures overridden by direct parameters (for example parametrization) were being instantiated even if they were not being used by a test.</li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3695">#3695</a>: Fix <tt class="docutils literal">ApproxNumpy</tt> initialisation argument mixup, <tt class="docutils literal">abs</tt> and <tt class="docutils literal">rel</tt> tolerances were flipped causing strange comparsion results.
Add tests to check <tt class="docutils literal">abs</tt> and <tt class="docutils literal">rel</tt> tolerances for <tt class="docutils literal">np.array</tt> and test for expecting <tt class="docutils literal">nan</tt> with <tt class="docutils literal">np.array()</tt></li>
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/980">#980</a>: Fix truncated locals output in verbose mode.</li>
</ul>
</div>
<div class="section" id="id179">
<h2>Improved Documentation</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3295">#3295</a>: Correct the usage documentation of <tt class="docutils literal"><span class="pre">--last-failed-no-failures</span></tt> by adding the missing <tt class="docutils literal"><span class="pre">--last-failed</span></tt> argument in the presented examples, because they are misleading and lead to think that the missing argument is not needed.</li>
</ul>
</div>
<div class="section" id="id181">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3519">#3519</a>: Now a <tt class="docutils literal">README.md</tt> file is created in <tt class="docutils literal">.pytest_cache</tt> to make it clear why the directory exists.</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-6-4-2018-07-28">
<h1>pytest 3.6.4 (2018-07-28)</h1>
<div class="section" id="id183">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Invoke pytest using <tt class="docutils literal"><span class="pre">-mpytest</span></tt> so <tt class="docutils literal">sys.path</tt> does not get polluted by packages installed in <tt class="docutils literal"><span class="pre">site-packages</span></tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/742">#742</a>)</li>
</ul>
</div>
<div class="section" id="id185">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Use <tt class="docutils literal">smtp_connection</tt> instead of <tt class="docutils literal">smtp</tt> in fixtures documentation to avoid possible confusion. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3592">#3592</a>)</li>
</ul>
</div>
<div class="section" id="id187">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Remove obsolete <tt class="docutils literal">__future__</tt> imports. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2319">#2319</a>)</li>
<li>Add CITATION to provide information on how to formally cite pytest. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3402">#3402</a>)</li>
<li>Replace broken type annotations with type comments. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3635">#3635</a>)</li>
<li>Pin <tt class="docutils literal">pluggy</tt> to <tt class="docutils literal">&lt;0.8</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3727">#3727</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-6-3-2018-07-04">
<h1>pytest 3.6.3 (2018-07-04)</h1>
<div class="section" id="id192">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Fix <tt class="docutils literal">ImportWarning</tt> triggered by explicit relative imports in
assertion-rewritten package modules. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3061">#3061</a>)</li>
<li>Fix error in <tt class="docutils literal">pytest.approx</tt> when dealing with 0-dimension numpy
arrays. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3593">#3593</a>)</li>
<li>No longer raise <tt class="docutils literal">ValueError</tt> when using the <tt class="docutils literal">get_marker</tt> API. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3605">#3605</a>)</li>
<li>Fix problem where log messages with non-ascii characters would not
appear in the output log file.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3630">#3630</a>)</li>
<li>No longer raise <tt class="docutils literal">AttributeError</tt> when legacy marks can't be stored in
functions. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3631">#3631</a>)</li>
</ul>
</div>
<div class="section" id="id198">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>The description above the example for <tt class="docutils literal">&#64;pytest.mark.skipif</tt> now better
matches the code. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3611">#3611</a>)</li>
</ul>
</div>
<div class="section" id="id200">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Internal refactoring: removed unused <tt class="docutils literal">CallSpec2tox ._globalid_args</tt>
attribute and <tt class="docutils literal">metafunc</tt> parameter from <tt class="docutils literal">CallSpec2.copy()</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3598">#3598</a>)</li>
<li>Silence usage of <tt class="docutils literal">reduce</tt> warning in Python 2 (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3609">#3609</a>)</li>
<li>Fix usage of <tt class="docutils literal">attr.ib</tt> deprecated <tt class="docutils literal">convert</tt> parameter. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3653">#3653</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-6-2-2018-06-20">
<h1>pytest 3.6.2 (2018-06-20)</h1>
<div class="section" id="id204">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Fix regression in <tt class="docutils literal">Node.add_marker</tt> by extracting the mark object of a
<tt class="docutils literal">MarkDecorator</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3555">#3555</a>)</li>
<li>Warnings without <tt class="docutils literal">location</tt> were reported as <tt class="docutils literal">None</tt>. This is corrected to
now report <tt class="docutils literal">&lt;undetermined location&gt;</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3563">#3563</a>)</li>
<li>Continue to call finalizers in the stack when a finalizer in a former scope
raises an exception. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3569">#3569</a>)</li>
<li>Fix encoding error with <tt class="docutils literal">print</tt> statements in doctests (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3583">#3583</a>)</li>
</ul>
</div>
<div class="section" id="id209">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Add documentation for the <tt class="docutils literal"><span class="pre">--strict</span></tt> flag. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3549">#3549</a>)</li>
</ul>
</div>
<div class="section" id="id211">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Update old quotation style to parens in fixture.rst documentation. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3525">#3525</a>)</li>
<li>Improve display of hint about <tt class="docutils literal"><span class="pre">--fulltrace</span></tt> with <tt class="docutils literal">KeyboardInterrupt</tt>.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3545">#3545</a>)</li>
<li>pytest's testsuite is no longer runnable through <tt class="docutils literal">python setup.py test</tt> --
instead invoke <tt class="docutils literal">pytest</tt> or <tt class="docutils literal">tox</tt> directly. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3552">#3552</a>)</li>
<li>Fix typo in documentation (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3567">#3567</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-6-1-2018-06-05">
<h1>pytest 3.6.1 (2018-06-05)</h1>
<div class="section" id="id216">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Fixed a bug where stdout and stderr were logged twice by junitxml when a test
was marked xfail. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3491">#3491</a>)</li>
<li>Fix <tt class="docutils literal">usefixtures</tt> mark applyed to unittest tests by correctly instantiating
<tt class="docutils literal">FixtureInfo</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3498">#3498</a>)</li>
<li>Fix assertion rewriter compatibility with libraries that monkey patch
<tt class="docutils literal">file</tt> objects. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3503">#3503</a>)</li>
</ul>
</div>
<div class="section" id="id220">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Added a section on how to use fixtures as factories to the fixture
documentation. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3461">#3461</a>)</li>
</ul>
</div>
<div class="section" id="id222">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Enable caching for pip/pre-commit in order to reduce build time on
travis/appveyor. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3502">#3502</a>)</li>
<li>Switch pytest to the src/ layout as we already suggested it for good practice
- now we implement it as well. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3513">#3513</a>)</li>
<li>Fix if in tests to support 3.7.0b5, where a docstring handling in AST got
reverted. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3530">#3530</a>)</li>
<li>Remove some python2.5 compatibility code. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3529">#3529</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-6-0-2018-05-23">
<h1>pytest 3.6.0 (2018-05-23)</h1>
<div class="section" id="id227">
<h2>Features</h2>
<ul class="simple">
<li>Revamp the internals of the <tt class="docutils literal">pytest.mark</tt> implementation with correct per
node handling which fixes a number of long standing bugs caused by the old
design. This introduces new <tt class="docutils literal">Node.iter_markers(name)</tt> and
<tt class="docutils literal">Node.get_closest_mark(name)</tt> APIs. Users are <strong>strongly encouraged</strong> to
read the <a class="reference external" href="https://docs.pytest.org/en/latest/mark.html#marker-revamp-and-iteration">reasons for the revamp in the docs</a>,
or jump over to details about <a class="reference external" href="https://docs.pytest.org/en/latest/mark.html#updating-code">updating existing code to use the new APIs</a>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3317">#3317</a>)</li>
<li>Now when <tt class="docutils literal">&#64;pytest.fixture</tt> is applied more than once to the same function a
<tt class="docutils literal">ValueError</tt> is raised. This buggy behavior would cause surprising problems
and if was working for a test suite it was mostly by accident. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2334">#2334</a>)</li>
<li>Support for Python 3.7's builtin <tt class="docutils literal">breakpoint()</tt> method, see <a class="reference external" href="https://docs.pytest.org/en/latest/usage.html#breakpoint-builtin">Using the
builtin breakpoint function</a> for
details. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3180">#3180</a>)</li>
<li><tt class="docutils literal">monkeypatch</tt> now supports a <tt class="docutils literal">context()</tt> function which acts as a context
manager which undoes all patching done within the <tt class="docutils literal">with</tt> block. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3290">#3290</a>)</li>
<li>The <tt class="docutils literal"><span class="pre">--pdb</span></tt> option now causes KeyboardInterrupt to enter the debugger,
instead of stopping the test session. On python 2.7, hitting CTRL+C again
exits the debugger. On python 3.2 and higher, use CTRL+D. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3299">#3299</a>)</li>
<li>pytest not longer changes the log level of the root logger when the
<tt class="docutils literal"><span class="pre">log-level</span></tt> parameter has greater numeric value than that of the level of
the root logger, which makes it play better with custom logging configuration
in user code. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3307">#3307</a>)</li>
</ul>
</div>
<div class="section" id="id234">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>A rare race-condition which might result in corrupted <tt class="docutils literal">.pyc</tt> files on
Windows has been hopefully solved. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3008">#3008</a>)</li>
<li>Also use iter_marker for discovering the marks applying for marker
expressions from the cli to avoid the bad data from the legacy mark storage.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3441">#3441</a>)</li>
<li>When showing diffs of failed assertions where the contents contain only
whitespace, escape them using <tt class="docutils literal">repr()</tt> first to make it easy to spot the
differences. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3443">#3443</a>)</li>
</ul>
</div>
<div class="section" id="id238">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Change documentation copyright year to a range which auto-updates itself each
time it is published. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3303">#3303</a>)</li>
</ul>
</div>
<div class="section" id="id240">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li><tt class="docutils literal">pytest</tt> now depends on the <a class="reference external" href="https://github.com/untitaker/python-atomicwrites">python-atomicwrites</a> library. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3008">#3008</a>)</li>
<li>Update all pypi.python.org URLs to pypi.org. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3431">#3431</a>)</li>
<li>Detect <cite>pytest_</cite> prefixed hooks using the internal plugin manager since
<tt class="docutils literal">pluggy</tt> is deprecating the <tt class="docutils literal">implprefix</tt> argument to <tt class="docutils literal">PluginManager</tt>.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3487">#3487</a>)</li>
<li>Import <tt class="docutils literal">Mapping</tt> and <tt class="docutils literal">Sequence</tt> from <tt class="docutils literal">_pytest.compat</tt> instead of
directly from <tt class="docutils literal">collections</tt> in <tt class="docutils literal"><span class="pre">python_api.py::approx</span></tt>. Add <tt class="docutils literal">Mapping</tt>
to <tt class="docutils literal">_pytest.compat</tt>, import it from <tt class="docutils literal">collections</tt> on python 2, but from
<tt class="docutils literal">collections.abc</tt> on Python 3 to avoid a <tt class="docutils literal">DeprecationWarning</tt> on Python
3.7 or newer. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3497">#3497</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-5-1-2018-04-23">
<h1>pytest 3.5.1 (2018-04-23)</h1>
<div class="section" id="id245">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Reset <tt class="docutils literal">sys.last_type</tt>, <tt class="docutils literal">sys.last_value</tt> and <tt class="docutils literal">sys.last_traceback</tt> before
each test executes. Those attributes are added by pytest during the test run
to aid debugging, but were never reset so they would create a leaking
reference to the last failing test's frame which in turn could never be
reclaimed by the garbage collector. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2798">#2798</a>)</li>
<li><tt class="docutils literal">pytest.raises</tt> now raises <tt class="docutils literal">TypeError</tt> when receiving an unknown keyword
argument. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3348">#3348</a>)</li>
<li><tt class="docutils literal">pytest.raises</tt> now works with exception classes that look like iterables.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3372">#3372</a>)</li>
</ul>
</div>
<div class="section" id="id249">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Fix typo in <tt class="docutils literal">caplog</tt> fixture documentation, which incorrectly identified
certain attributes as methods. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3406">#3406</a>)</li>
</ul>
</div>
<div class="section" id="id251">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Added a more indicative error message when parametrizing a function whose
argument takes a default value. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3221">#3221</a>)</li>
<li>Remove internal <tt class="docutils literal">_pytest.terminal.flatten</tt> function in favor of
<tt class="docutils literal">more_itertools.collapse</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3330">#3330</a>)</li>
<li>Import some modules from <tt class="docutils literal">collections.abc</tt> instead of <tt class="docutils literal">collections</tt> as
the former modules trigger <tt class="docutils literal">DeprecationWarning</tt> in Python 3.7. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3339">#3339</a>)</li>
<li>record_property is no longer experimental, removing the warnings was
forgotten. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3360">#3360</a>)</li>
<li>Mention in documentation and CLI help that fixtures with leading <tt class="docutils literal">_</tt> are
printed by <tt class="docutils literal">pytest <span class="pre">--fixtures</span></tt> only if the <tt class="docutils literal"><span class="pre">-v</span></tt> option is added. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3398">#3398</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-5-0-2018-03-21">
<h1>pytest 3.5.0 (2018-03-21)</h1>
<div class="section" id="id257">
<h2>Deprecations and Removals</h2>
<ul class="simple">
<li><tt class="docutils literal">record_xml_property</tt> fixture is now deprecated in favor of the more
generic <tt class="docutils literal">record_property</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2770">#2770</a>)</li>
<li>Defining <tt class="docutils literal">pytest_plugins</tt> is now deprecated in non-top-level conftest.py
files, because they &quot;leak&quot; to the entire directory tree. <a class="reference external" href="https://docs.pytest.org/en/latest/deprecations.html#pytest-plugins-in-non-top-level-conftest-files">See the docs</a> for the rationale behind this decision (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3084">#3084</a>)</li>
</ul>
</div>
<div class="section" id="id260">
<h2>Features</h2>
<ul class="simple">
<li>New <tt class="docutils literal"><span class="pre">--show-capture</span></tt> command-line option that allows to specify how to
display captured output when tests fail: <tt class="docutils literal">no</tt>, <tt class="docutils literal">stdout</tt>, <tt class="docutils literal">stderr</tt>,
<tt class="docutils literal">log</tt> or <tt class="docutils literal">all</tt> (the default). (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1478">#1478</a>)</li>
<li>New <tt class="docutils literal"><span class="pre">--rootdir</span></tt> command-line option to override the rules for discovering
the root directory. See <a class="reference external" href="https://docs.pytest.org/en/latest/customize.html">customize</a> in the documentation for
details. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1642">#1642</a>)</li>
<li>Fixtures are now instantiated based on their scopes, with higher-scoped
fixtures (such as <tt class="docutils literal">session</tt>) being instantiated first than lower-scoped
fixtures (such as <tt class="docutils literal">function</tt>). The relative order of fixtures of the same
scope is kept unchanged, based in their declaration order and their
dependencies. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2405">#2405</a>)</li>
<li><tt class="docutils literal">record_xml_property</tt> renamed to <tt class="docutils literal">record_property</tt> and is now compatible
with xdist, markers and any reporter. <tt class="docutils literal">record_xml_property</tt> name is now
deprecated. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2770">#2770</a>)</li>
<li>New <tt class="docutils literal"><span class="pre">--nf</span></tt>, <tt class="docutils literal"><span class="pre">--new-first</span></tt> options: run new tests first followed by the
rest of the tests, in both cases tests are also sorted by the file modified
time, with more recent files coming first. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3034">#3034</a>)</li>
<li>New <tt class="docutils literal"><span class="pre">--last-failed-no-failures</span></tt> command-line option that allows to specify
the behavior of the cache plugin's <tt class="docutils literal"><span class="pre">`--last-failed</span></tt> feature when no tests
failed in the last run (or no cache was found): <tt class="docutils literal">none</tt> or <tt class="docutils literal">all</tt> (the
default). (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3139">#3139</a>)</li>
<li>New <tt class="docutils literal"><span class="pre">--doctest-continue-on-failure</span></tt> command-line option to enable doctests
to show multiple failures for each snippet, instead of stopping at the first
failure. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3149">#3149</a>)</li>
<li>Captured log messages are added to the <tt class="docutils literal"><span class="pre">&lt;system-out&gt;</span></tt> tag in the generated
junit xml file if the <tt class="docutils literal">junit_logging</tt> ini option is set to <tt class="docutils literal"><span class="pre">system-out</span></tt>.
If the value of this ini option is <tt class="docutils literal"><span class="pre">system-err</span></tt>, the logs are written to
<tt class="docutils literal"><span class="pre">&lt;system-err&gt;</span></tt>. The default value for <tt class="docutils literal">junit_logging</tt> is <tt class="docutils literal">no</tt>, meaning
captured logs are not written to the output file. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3156">#3156</a>)</li>
<li>Allow the logging plugin to handle <tt class="docutils literal">pytest_runtest_logstart</tt> and
<tt class="docutils literal">pytest_runtest_logfinish</tt> hooks when live logs are enabled. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3189">#3189</a>)</li>
<li>Passing <tt class="docutils literal"><span class="pre">--log-cli-level</span></tt> in the command-line now automatically activates
live logging. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3190">#3190</a>)</li>
<li>Add command line option <tt class="docutils literal"><span class="pre">--deselect</span></tt> to allow deselection of individual
tests at collection time. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3198">#3198</a>)</li>
<li>Captured logs are printed before entering pdb. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3204">#3204</a>)</li>
<li>Deselected item count is now shown before tests are run, e.g. <tt class="docutils literal">collected X
items / Y deselected</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3213">#3213</a>)</li>
<li>The builtin module <tt class="docutils literal">platform</tt> is now available for use in expressions in
<tt class="docutils literal">pytest.mark</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3236">#3236</a>)</li>
<li>The <em>short test summary info</em> section now is displayed after tracebacks and
warnings in the terminal. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3255">#3255</a>)</li>
<li>New <tt class="docutils literal"><span class="pre">--verbosity</span></tt> flag to set verbosity level explicitly. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3296">#3296</a>)</li>
<li><tt class="docutils literal">pytest.approx</tt> now accepts comparing a numpy array with a scalar. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3312">#3312</a>)</li>
</ul>
</div>
<div class="section" id="id278">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Suppress <tt class="docutils literal">IOError</tt> when closing the temporary file used for capturing
streams in Python 2.7. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2370">#2370</a>)</li>
<li>Fixed <tt class="docutils literal">clear()</tt> method on <tt class="docutils literal">caplog</tt> fixture which cleared <tt class="docutils literal">records</tt>, but
not the <tt class="docutils literal">text</tt> property. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3297">#3297</a>)</li>
<li>During test collection, when stdin is not allowed to be read, the
<tt class="docutils literal">DontReadFromStdin</tt> object still allow itself to be iterable and resolved
to an iterator without crashing. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3314">#3314</a>)</li>
</ul>
</div>
<div class="section" id="id282">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Added a <a class="reference external" href="https://docs.pytest.org/en/latest/reference.html">reference</a> page
to the docs. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1713">#1713</a>)</li>
</ul>
</div>
<div class="section" id="id284">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Change minimum requirement of <tt class="docutils literal">attrs</tt> to <tt class="docutils literal">17.4.0</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3228">#3228</a>)</li>
<li>Renamed example directories so all tests pass when ran from the base
directory. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3245">#3245</a>)</li>
<li>Internal <tt class="docutils literal">mark.py</tt> module has been turned into a package. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3250">#3250</a>)</li>
<li><tt class="docutils literal">pytest</tt> now depends on the <a class="reference external" href="https://github.com/erikrose/more-itertools">more-itertools</a> package. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3265">#3265</a>)</li>
<li>Added warning when <tt class="docutils literal">[pytest]</tt> section is used in a <tt class="docutils literal">.cfg</tt> file passed
with <tt class="docutils literal"><span class="pre">-c</span></tt> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3268">#3268</a>)</li>
<li><tt class="docutils literal">nodeids</tt> can now be passed explicitly to <tt class="docutils literal">FSCollector</tt> and <tt class="docutils literal">Node</tt>
constructors. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3291">#3291</a>)</li>
<li>Internal refactoring of <tt class="docutils literal">FormattedExcinfo</tt> to use <tt class="docutils literal">attrs</tt> facilities and
remove old support code for legacy Python versions. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3292">#3292</a>)</li>
<li>Refactoring to unify how verbosity is handled internally. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3296">#3296</a>)</li>
<li>Internal refactoring to better integrate with argparse. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3304">#3304</a>)</li>
<li>Fix a python example when calling a fixture in doc/en/usage.rst (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3308">#3308</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-4-2-2018-03-04">
<h1>pytest 3.4.2 (2018-03-04)</h1>
<div class="section" id="id295">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Removed progress information when capture option is <tt class="docutils literal">no</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3203">#3203</a>)</li>
<li>Refactor check of bindir from <tt class="docutils literal">exists</tt> to <tt class="docutils literal">isdir</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3241">#3241</a>)</li>
<li>Fix <tt class="docutils literal">TypeError</tt> issue when using <tt class="docutils literal">approx</tt> with a <tt class="docutils literal">Decimal</tt> value.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3247">#3247</a>)</li>
<li>Fix reference cycle generated when using the <tt class="docutils literal">request</tt> fixture. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3249">#3249</a>)</li>
<li><tt class="docutils literal">[tool:pytest]</tt> sections in <tt class="docutils literal">*.cfg</tt> files passed by the <tt class="docutils literal"><span class="pre">-c</span></tt> option are
now properly recognized. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3260">#3260</a>)</li>
</ul>
</div>
<div class="section" id="id301">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Add logging plugin to plugins list. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3209">#3209</a>)</li>
</ul>
</div>
<div class="section" id="id303">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Fix minor typo in fixture.rst (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3259">#3259</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-4-1-2018-02-20">
<h1>pytest 3.4.1 (2018-02-20)</h1>
<div class="section" id="id305">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Move import of <tt class="docutils literal">doctest.UnexpectedException</tt> to top-level to avoid possible
errors when using <tt class="docutils literal"><span class="pre">--pdb</span></tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1810">#1810</a>)</li>
<li>Added printing of captured stdout/stderr before entering pdb, and improved a
test which was giving false negatives about output capturing. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3052">#3052</a>)</li>
<li>Fix ordering of tests using parametrized fixtures which can lead to fixtures
being created more than necessary. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3161">#3161</a>)</li>
<li>Fix bug where logging happening at hooks outside of &quot;test run&quot; hooks would
cause an internal error. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3184">#3184</a>)</li>
<li>Detect arguments injected by <tt class="docutils literal">unittest.mock.patch</tt> decorator correctly when
pypi <tt class="docutils literal">mock.patch</tt> is installed and imported. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3206">#3206</a>)</li>
<li>Errors shown when a <tt class="docutils literal">pytest.raises()</tt> with <tt class="docutils literal">match=</tt> fails are now cleaner
on what happened: When no exception was raised, the &quot;matching '...'&quot; part got
removed as it falsely implies that an exception was raised but it didn't
match. When a wrong exception was raised, it's now thrown (like
<tt class="docutils literal">pytest.raised()</tt> without <tt class="docutils literal">match=</tt> would) instead of complaining about
the unmatched text. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3222">#3222</a>)</li>
<li>Fixed output capture handling in doctests on macOS. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/985">#985</a>)</li>
</ul>
</div>
<div class="section" id="id313">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Add Sphinx parameter docs for <tt class="docutils literal">match</tt> and <tt class="docutils literal">message</tt> args to
<tt class="docutils literal">pytest.raises</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3202">#3202</a>)</li>
</ul>
</div>
<div class="section" id="id315">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>pytest has changed the publication procedure and is now being published to
PyPI directly from Travis. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3060">#3060</a>)</li>
<li>Rename <tt class="docutils literal">ParameterSet._for_parameterize()</tt> to <tt class="docutils literal">_for_parametrize()</tt> in
order to comply with the naming convention. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3166">#3166</a>)</li>
<li>Skip failing pdb/doctest test on mac. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/985">#985</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-4-0-2018-01-30">
<h1>pytest 3.4.0 (2018-01-30)</h1>
<div class="section" id="id319">
<h2>Deprecations and Removals</h2>
<ul class="simple">
<li>All pytest classes now subclass <tt class="docutils literal">object</tt> for better Python 2/3 compatibility.
This should not affect user code except in very rare edge cases. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2147">#2147</a>)</li>
</ul>
</div>
<div class="section" id="id321">
<h2>Features</h2>
<ul class="simple">
<li>Introduce <tt class="docutils literal">empty_parameter_set_mark</tt> ini option to select which mark to
apply when <tt class="docutils literal">&#64;pytest.mark.parametrize</tt> is given an empty set of parameters.
Valid options are <tt class="docutils literal">skip</tt> (default) and <tt class="docutils literal">xfail</tt>. Note that it is planned
to change the default to <tt class="docutils literal">xfail</tt> in future releases as this is considered
less error prone. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2527">#2527</a>)</li>
<li><strong>Incompatible change</strong>: after community feedback the <a class="reference external" href="https://docs.pytest.org/en/latest/logging.html">logging</a> functionality has
undergone some changes. Please consult the <a class="reference external" href="https://docs.pytest.org/en/latest/logging.html#incompatible-changes-in-pytest-3-4">logging documentation</a>
for details. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3013">#3013</a>)</li>
<li>Console output falls back to &quot;classic&quot; mode when capturing is disabled (<tt class="docutils literal"><span class="pre">-s</span></tt>),
otherwise the output gets garbled to the point of being useless. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3038">#3038</a>)</li>
<li>New <a class="reference external" href="https://docs.pytest.org/en/latest/writing_plugins.html#_pytest.hookspec.pytest_runtest_logfinish">pytest_runtest_logfinish</a>
hook which is called when a test item has finished executing, analogous to
<a class="reference external" href="https://docs.pytest.org/en/latest/writing_plugins.html#_pytest.hookspec.pytest_runtest_start">pytest_runtest_logstart</a>.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3101">#3101</a>)</li>
<li>Improve performance when collecting tests using many fixtures. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3107">#3107</a>)</li>
<li>New <tt class="docutils literal">caplog.get_records(when)</tt> method which provides access to the captured
records for the <tt class="docutils literal">&quot;setup&quot;</tt>, <tt class="docutils literal">&quot;call&quot;</tt> and <tt class="docutils literal">&quot;teardown&quot;</tt>
testing stages. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3117">#3117</a>)</li>
<li>New fixture <tt class="docutils literal">record_xml_attribute</tt> that allows modifying and inserting
attributes on the <tt class="docutils literal">&lt;testcase&gt;</tt> xml node in JUnit reports. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3130">#3130</a>)</li>
<li>The default cache directory has been renamed from <tt class="docutils literal">.cache</tt> to
<tt class="docutils literal">.pytest_cache</tt> after community feedback that the name <tt class="docutils literal">.cache</tt> did not
make it clear that it was used by pytest. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3138">#3138</a>)</li>
<li>Colorize the levelname column in the live-log output. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3142">#3142</a>)</li>
</ul>
</div>
<div class="section" id="id331">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Fix hanging pexpect test on MacOS by using flush() instead of wait().
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2022">#2022</a>)</li>
<li>Fix restoring Python state after in-process pytest runs with the
<tt class="docutils literal">pytester</tt> plugin; this may break tests using multiple inprocess
pytest runs if later ones depend on earlier ones leaking global interpreter
changes. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3016">#3016</a>)</li>
<li>Fix skipping plugin reporting hook when test aborted before plugin setup
hook. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3074">#3074</a>)</li>
<li>Fix progress percentage reported when tests fail during teardown. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3088">#3088</a>)</li>
<li><strong>Incompatible change</strong>: <tt class="docutils literal"><span class="pre">-o/--override</span></tt> option no longer eats all the
remaining options, which can lead to surprising behavior: for example,
<tt class="docutils literal">pytest <span class="pre">-o</span> foo=1 /path/to/test.py</tt> would fail because <tt class="docutils literal">/path/to/test.py</tt>
would be considered as part of the <tt class="docutils literal"><span class="pre">-o</span></tt> command-line argument. One
consequence of this is that now multiple configuration overrides need
multiple <tt class="docutils literal"><span class="pre">-o</span></tt> flags: <tt class="docutils literal">pytest <span class="pre">-o</span> foo=1 <span class="pre">-o</span> bar=2</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3103">#3103</a>)</li>
</ul>
</div>
<div class="section" id="id337">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Document hooks (defined with <tt class="docutils literal">historic=True</tt>) which cannot be used with
<tt class="docutils literal">hookwrapper=True</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2423">#2423</a>)</li>
<li>Clarify that warning capturing doesn't change the warning filter by default.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2457">#2457</a>)</li>
<li>Clarify a possible confusion when using pytest_fixture_setup with fixture
functions that return None. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2698">#2698</a>)</li>
<li>Fix the wording of a sentence on doctest flags used in pytest. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3076">#3076</a>)</li>
<li>Prefer <tt class="docutils literal"><span class="pre">https://*.readthedocs.io</span></tt> over <tt class="docutils literal"><span class="pre">http://*.rtfd.org</span></tt> for links in
the documentation. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3092">#3092</a>)</li>
<li>Improve readability (wording, grammar) of Getting Started guide (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3131">#3131</a>)</li>
<li>Added note that calling pytest.main multiple times from the same process is
not recommended because of import caching. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3143">#3143</a>)</li>
</ul>
</div>
<div class="section" id="id345">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Show a simple and easy error when keyword expressions trigger a syntax error
(for example, <tt class="docutils literal"><span class="pre">&quot;-k</span> foo and import&quot;</tt> will show an error that you can not use
the <tt class="docutils literal">import</tt> keyword in expressions). (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2953">#2953</a>)</li>
<li>Change parametrized automatic test id generation to use the <tt class="docutils literal">__name__</tt>
attribute of functions instead of the fallback argument name plus counter.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2976">#2976</a>)</li>
<li>Replace py.std with stdlib imports. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3067">#3067</a>)</li>
<li>Corrected 'you' to 'your' in logging docs. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3129">#3129</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-3-2-2017-12-25">
<h1>pytest 3.3.2 (2017-12-25)</h1>
<div class="section" id="id350">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>pytester: ignore files used to obtain current user metadata in the fd leak
detector. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2784">#2784</a>)</li>
<li>Fix <strong>memory leak</strong> where objects returned by fixtures were never destructed
by the garbage collector. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2981">#2981</a>)</li>
<li>Fix conversion of pyargs to filename to not convert symlinks on Python 2. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2985">#2985</a>)</li>
<li><tt class="docutils literal">PYTEST_DONT_REWRITE</tt> is now checked for plugins too rather than only for
test modules. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2995">#2995</a>)</li>
</ul>
</div>
<div class="section" id="id355">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Add clarifying note about behavior of multiple parametrized arguments (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3001">#3001</a>)</li>
</ul>
</div>
<div class="section" id="id357">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Code cleanup. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3015">#3015</a>,
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3021">#3021</a>)</li>
<li>Clean up code by replacing imports and references of <tt class="docutils literal">_ast</tt> to <tt class="docutils literal">ast</tt>.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3018">#3018</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-3-1-2017-12-05">
<h1>pytest 3.3.1 (2017-12-05)</h1>
<div class="section" id="id361">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Fix issue about <tt class="docutils literal"><span class="pre">-p</span> <span class="pre">no:&lt;plugin&gt;</span></tt> having no effect. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2920">#2920</a>)</li>
<li>Fix regression with warnings that contained non-strings in their arguments in
Python 2. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2956">#2956</a>)</li>
<li>Always escape null bytes when setting <tt class="docutils literal">PYTEST_CURRENT_TEST</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2957">#2957</a>)</li>
<li>Fix <tt class="docutils literal">ZeroDivisionError</tt> when using the <tt class="docutils literal">testmon</tt> plugin when no tests
were actually collected. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2971">#2971</a>)</li>
<li>Bring back <tt class="docutils literal">TerminalReporter.writer</tt> as an alias to
<tt class="docutils literal">TerminalReporter._tw</tt>. This alias was removed by accident in the <tt class="docutils literal">3.3.0</tt>
release. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2984">#2984</a>)</li>
<li>The <tt class="docutils literal"><span class="pre">pytest-capturelog</span></tt> plugin is now also blacklisted, avoiding errors when
running pytest with it still installed. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3004">#3004</a>)</li>
</ul>
</div>
<div class="section" id="id368">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Fix broken link to plugin <tt class="docutils literal"><span class="pre">pytest-localserver</span></tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2963">#2963</a>)</li>
</ul>
</div>
<div class="section" id="id370">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Update github &quot;bugs&quot; link in <tt class="docutils literal">CONTRIBUTING.rst</tt> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2949">#2949</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-3-0-2017-11-23">
<h1>pytest 3.3.0 (2017-11-23)</h1>
<div class="section" id="id372">
<h2>Deprecations and Removals</h2>
<ul class="simple">
<li>pytest no longer supports Python <strong>2.6</strong> and <strong>3.3</strong>. Those Python versions
are EOL for some time now and incur maintenance and compatibility costs on
the pytest core team, and following up with the rest of the community we
decided that they will no longer be supported starting on this version. Users
which still require those versions should pin pytest to <tt class="docutils literal">&lt;3.3</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2812">#2812</a>)</li>
<li>Remove internal <tt class="docutils literal">_preloadplugins()</tt> function. This removal is part of the
<tt class="docutils literal">pytest_namespace()</tt> hook deprecation. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2636">#2636</a>)</li>
<li>Internally change <tt class="docutils literal">CallSpec2</tt> to have a list of marks instead of a broken
mapping of keywords. This removes the keywords attribute of the internal
<tt class="docutils literal">CallSpec2</tt> class. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2672">#2672</a>)</li>
<li>Remove ParameterSet.deprecated_arg_dict - its not a public api and the lack
of the underscore was a naming error. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2675">#2675</a>)</li>
<li>Remove the internal multi-typed attribute <tt class="docutils literal">Node._evalskip</tt> and replace it
with the boolean <tt class="docutils literal">Node._skipped_by_mark</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2767">#2767</a>)</li>
<li>The <tt class="docutils literal">params</tt> list passed to <tt class="docutils literal">pytest.fixture</tt> is now for
all effects considered immutable and frozen at the moment of the <tt class="docutils literal">pytest.fixture</tt>
call. Previously the list could be changed before the first invocation of the fixture
allowing for a form of dynamic parametrization (for example, updated from command-line options),
but this was an unwanted implementation detail which complicated the internals and prevented
some internal cleanup. See issue <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2959">#2959</a>
for details and a recommended workaround.</li>
</ul>
</div>
<div class="section" id="id379">
<h2>Features</h2>
<ul class="simple">
<li><tt class="docutils literal">pytest_fixture_post_finalizer</tt> hook can now receive a <tt class="docutils literal">request</tt>
argument. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2124">#2124</a>)</li>
<li>Replace the old introspection code in compat.py that determines the available
arguments of fixtures with inspect.signature on Python 3 and
funcsigs.signature on Python 2. This should respect <tt class="docutils literal">__signature__</tt>
declarations on functions. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2267">#2267</a>)</li>
<li>Report tests with global <tt class="docutils literal">pytestmark</tt> variable only once. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2549">#2549</a>)</li>
<li>Now pytest displays the total progress percentage while running tests. The
previous output style can be set by configuring the <tt class="docutils literal">console_output_style</tt>
setting to <tt class="docutils literal">classic</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2657">#2657</a>)</li>
<li>Match <tt class="docutils literal">warns</tt> signature to <tt class="docutils literal">raises</tt> by adding <tt class="docutils literal">match</tt> keyword. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2708">#2708</a>)</li>
<li>pytest now captures and displays output from the standard <tt class="docutils literal">logging</tt> module.
The user can control the logging level to be captured by specifying options
in <tt class="docutils literal">pytest.ini</tt>, the command line and also during individual tests using
markers. Also, a <tt class="docutils literal">caplog</tt> fixture is available that enables users to test
the captured log during specific tests (similar to <tt class="docutils literal">capsys</tt> for example).
For more information, please see the <a class="reference external" href="https://docs.pytest.org/en/latest/logging.html">logging docs</a>. This feature was
introduced by merging the popular <a class="reference external" href="https://pypi.org/project/pytest-catchlog/">pytest-catchlog</a> plugin, thanks to <a class="reference external" href="https://github.com/thisch">Thomas Hisch</a>. Be advised that during the merging the
backward compatibility interface with the defunct <tt class="docutils literal"><span class="pre">pytest-capturelog</span></tt> has
been dropped. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2794">#2794</a>)</li>
<li>Add <tt class="docutils literal">allow_module_level</tt> kwarg to <tt class="docutils literal">pytest.skip()</tt>, enabling to skip the
whole module. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2808">#2808</a>)</li>
<li>Allow setting <tt class="docutils literal">file_or_dir</tt>, <tt class="docutils literal"><span class="pre">-c</span></tt>, and <tt class="docutils literal"><span class="pre">-o</span></tt> in PYTEST_ADDOPTS. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2824">#2824</a>)</li>
<li>Return stdout/stderr capture results as a <tt class="docutils literal">namedtuple</tt>, so <tt class="docutils literal">out</tt> and
<tt class="docutils literal">err</tt> can be accessed by attribute. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2879">#2879</a>)</li>
<li>Add <tt class="docutils literal">capfdbinary</tt>, a version of <tt class="docutils literal">capfd</tt> which returns bytes from
<tt class="docutils literal">readouterr()</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2923">#2923</a>)</li>
<li>Add <tt class="docutils literal">capsysbinary</tt> a version of <tt class="docutils literal">capsys</tt> which returns bytes from
<tt class="docutils literal">readouterr()</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2934">#2934</a>)</li>
<li>Implement feature to skip <tt class="docutils literal">setup.py</tt> files when run with
<tt class="docutils literal"><span class="pre">--doctest-modules</span></tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/502">#502</a>)</li>
</ul>
</div>
<div class="section" id="id392">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Resume output capturing after <tt class="docutils literal">capsys/capfd.disabled()</tt> context manager.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1993">#1993</a>)</li>
<li><tt class="docutils literal">pytest_fixture_setup</tt> and <tt class="docutils literal">pytest_fixture_post_finalizer</tt> hooks are now
called for all <tt class="docutils literal">conftest.py</tt> files. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2124">#2124</a>)</li>
<li>If an exception happens while loading a plugin, pytest no longer hides the
original traceback. In Python 2 it will show the original traceback with a new
message that explains in which plugin. In Python 3 it will show 2 canonized
exceptions, the original exception while loading the plugin in addition to an
exception that pytest throws about loading a plugin. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2491">#2491</a>)</li>
<li><tt class="docutils literal">capsys</tt> and <tt class="docutils literal">capfd</tt> can now be used by other fixtures. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2709">#2709</a>)</li>
<li>Internal <tt class="docutils literal">pytester</tt> plugin properly encodes <tt class="docutils literal">bytes</tt> arguments to
<tt class="docutils literal"><span class="pre">utf-8</span></tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2738">#2738</a>)</li>
<li><tt class="docutils literal">testdir</tt> now uses use the same method used by <tt class="docutils literal">tmpdir</tt> to create its
temporary directory. This changes the final structure of the <tt class="docutils literal">testdir</tt>
directory slightly, but should not affect usage in normal scenarios and
avoids a number of potential problems. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2751">#2751</a>)</li>
<li>pytest no longer complains about warnings with unicode messages being
non-ascii compatible even for ascii-compatible messages. As a result of this,
warnings with unicode messages are converted first to an ascii representation
for safety. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2809">#2809</a>)</li>
<li>Change return value of pytest command when <tt class="docutils literal"><span class="pre">--maxfail</span></tt> is reached from
<tt class="docutils literal">2</tt> (interrupted) to <tt class="docutils literal">1</tt> (failed). (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2845">#2845</a>)</li>
<li>Fix issue in assertion rewriting which could lead it to rewrite modules which
should not be rewritten. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2939">#2939</a>)</li>
<li>Handle marks without description in <tt class="docutils literal">pytest.ini</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2942">#2942</a>)</li>
</ul>
</div>
<div class="section" id="id403">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>pytest now depends on <a class="reference external" href="https://pypi.org/project/attrs/">attrs</a> for internal
structures to ease code maintainability. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2641">#2641</a>)</li>
<li>Refactored internal Python 2/3 compatibility code to use <tt class="docutils literal">six</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2642">#2642</a>)</li>
<li>Stop vendoring <tt class="docutils literal">pluggy</tt> - we're missing out on its latest changes for not
much benefit (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2719">#2719</a>)</li>
<li>Internal refactor: simplify ascii string escaping by using the
backslashreplace error handler in newer Python 3 versions. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2734">#2734</a>)</li>
<li>Remove unnecessary mark evaluator in unittest plugin (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2767">#2767</a>)</li>
<li>Calls to <tt class="docutils literal">Metafunc.addcall</tt> now emit a deprecation warning. This function
is scheduled to be removed in <tt class="docutils literal"><span class="pre">pytest-4.0</span></tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2876">#2876</a>)</li>
<li>Internal move of the parameterset extraction to a more maintainable place.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2877">#2877</a>)</li>
<li>Internal refactoring to simplify scope node lookup. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2910">#2910</a>)</li>
<li>Configure <tt class="docutils literal">pytest</tt> to prevent pip from installing pytest in unsupported
Python versions. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2922">#2922</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-5-2017-11-15">
<h1>pytest 3.2.5 (2017-11-15)</h1>
<div class="section" id="id413">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Remove <tt class="docutils literal">py&lt;1.5</tt> restriction from <tt class="docutils literal">pytest</tt> as this can cause version
conflicts in some installations. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2926">#2926</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-4-2017-11-13">
<h1>pytest 3.2.4 (2017-11-13)</h1>
<div class="section" id="id415">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Fix the bug where running with <tt class="docutils literal"><span class="pre">--pyargs</span></tt> will result in items with
empty <tt class="docutils literal">parent.nodeid</tt> if run from a different root directory. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2775">#2775</a>)</li>
<li>Fix issue with <tt class="docutils literal">&#64;pytest.parametrize</tt> if argnames was specified as keyword arguments.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2819">#2819</a>)</li>
<li>Strip whitespace from marker names when reading them from INI config. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2856">#2856</a>)</li>
<li>Show full context of doctest source in the pytest output, if the line number of
failed example in the docstring is &lt; 9. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2882">#2882</a>)</li>
<li>Match fixture paths against actual path segments in order to avoid matching folders which share a prefix.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2836">#2836</a>)</li>
</ul>
</div>
<div class="section" id="id421">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Introduce a dedicated section about conftest.py. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1505">#1505</a>)</li>
<li>Explicitly mention <tt class="docutils literal">xpass</tt> in the documentation of <tt class="docutils literal">xfail</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1997">#1997</a>)</li>
<li>Append example for pytest.param in the example/parametrize document. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2658">#2658</a>)</li>
<li>Clarify language of proposal for fixtures parameters (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2893">#2893</a>)</li>
<li>List python 3.6 in the documented supported versions in the getting started
document. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2903">#2903</a>)</li>
<li>Clarify the documentation of available fixture scopes. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/538">#538</a>)</li>
<li>Add documentation about the <tt class="docutils literal">python <span class="pre">-m</span> pytest</tt> invocation adding the
current directory to sys.path. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/911">#911</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-3-2017-10-03">
<h1>pytest 3.2.3 (2017-10-03)</h1>
<div class="section" id="id429">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Fix crash in tab completion when no prefix is given. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2748">#2748</a>)</li>
<li>The equality checking function (<tt class="docutils literal">__eq__</tt>) of <tt class="docutils literal">MarkDecorator</tt> returns
<tt class="docutils literal">False</tt> if one object is not an instance of <tt class="docutils literal">MarkDecorator</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2758">#2758</a>)</li>
<li>When running <tt class="docutils literal">pytest <span class="pre">--fixtures-per-test</span></tt>: don't crash if an item has no
_fixtureinfo attribute (e.g. doctests) (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2788">#2788</a>)</li>
</ul>
</div>
<div class="section" id="id433">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>In help text of <tt class="docutils literal"><span class="pre">-k</span></tt> option, add example of using <tt class="docutils literal">not</tt> to not select
certain tests whose names match the provided expression. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1442">#1442</a>)</li>
<li>Add note in <tt class="docutils literal">parametrize.rst</tt> about calling <tt class="docutils literal">metafunc.parametrize</tt>
multiple times. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1548">#1548</a>)</li>
</ul>
</div>
<div class="section" id="id436">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Set <tt class="docutils literal">xfail_strict=True</tt> in pytest's own test suite to catch expected
failures as soon as they start to pass. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2722">#2722</a>)</li>
<li>Fix typo in example of passing a callable to markers (in example/markers.rst)
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2765">#2765</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-2-2017-09-06">
<h1>pytest 3.2.2 (2017-09-06)</h1>
<div class="section" id="id439">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Calling the deprecated <tt class="docutils literal">request.getfuncargvalue()</tt> now shows the source of
the call. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2681">#2681</a>)</li>
<li>Allow tests declared as <tt class="docutils literal">&#64;staticmethod</tt> to use fixtures. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2699">#2699</a>)</li>
<li>Fixed edge-case during collection: attributes which raised <tt class="docutils literal">pytest.fail</tt>
when accessed would abort the entire collection. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2707">#2707</a>)</li>
<li>Fix <tt class="docutils literal">ReprFuncArgs</tt> with mixed unicode and UTF-8 args. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2731">#2731</a>)</li>
</ul>
</div>
<div class="section" id="id444">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>In examples on working with custom markers, add examples demonstrating the
usage of <tt class="docutils literal">pytest.mark.MARKER_NAME.with_args</tt> in comparison with
<tt class="docutils literal">pytest.mark.MARKER_NAME.__call__</tt> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2604">#2604</a>)</li>
<li>In one of the simple examples, use <tt class="docutils literal">pytest_collection_modifyitems()</tt> to skip
tests based on a command-line option, allowing its sharing while preventing a
user error when acessing <tt class="docutils literal">pytest.config</tt> before the argument parsing.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2653">#2653</a>)</li>
</ul>
</div>
<div class="section" id="id447">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Fixed minor error in 'Good Practices/Manual Integration' code snippet.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2691">#2691</a>)</li>
<li>Fixed typo in goodpractices.rst. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2721">#2721</a>)</li>
<li>Improve user guidance regarding <tt class="docutils literal"><span class="pre">--resultlog</span></tt> deprecation. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2739">#2739</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-1-2017-08-08">
<h1>pytest 3.2.1 (2017-08-08)</h1>
<div class="section" id="id451">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Fixed small terminal glitch when collecting a single test item. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2579">#2579</a>)</li>
<li>Correctly consider <tt class="docutils literal">/</tt> as the file separator to automatically mark plugin
files for rewrite on Windows. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2591">#2591</a>)</li>
<li>Properly escape test names when setting <tt class="docutils literal">PYTEST_CURRENT_TEST</tt> environment
variable. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2644">#2644</a>)</li>
<li>Fix error on Windows and Python 3.6+ when <tt class="docutils literal">sys.stdout</tt> has been replaced
with a stream-like object which does not implement the full <tt class="docutils literal">io</tt> module
buffer protocol. In particular this affects <tt class="docutils literal"><span class="pre">pytest-xdist</span></tt> users on the
aforementioned platform. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2666">#2666</a>)</li>
</ul>
</div>
<div class="section" id="id456">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Explicitly document which pytest features work with <tt class="docutils literal">unittest</tt>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2626">#2626</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-0-2017-07-30">
<h1>pytest 3.2.0 (2017-07-30)</h1>
<div class="section" id="id458">
<h2>Deprecations and Removals</h2>
<ul class="simple">
<li><tt class="docutils literal">pytest.approx</tt> no longer supports <tt class="docutils literal">&gt;</tt>, <tt class="docutils literal">&gt;=</tt>, <tt class="docutils literal">&lt;</tt> and <tt class="docutils literal">&lt;=</tt>
operators to avoid surprising/inconsistent behavior. See <a class="reference external" href="https://docs.pytest.org/en/latest/builtin.html#pytest.approx">the approx docs</a> for more
information. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2003">#2003</a>)</li>
<li>All old-style specific behavior in current classes in the pytest's API is
considered deprecated at this point and will be removed in a future release.
This affects Python 2 users only and in rare situations. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2147">#2147</a>)</li>
<li>A deprecation warning is now raised when using marks for parameters
in <tt class="docutils literal">pytest.mark.parametrize</tt>. Use <tt class="docutils literal">pytest.param</tt> to apply marks to
parameters instead. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2427">#2427</a>)</li>
</ul>
</div>
<div class="section" id="id462">
<h2>Features</h2>
<ul class="simple">
<li>Add support for numpy arrays (and dicts) to approx. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1994">#1994</a>)</li>
<li>Now test function objects have a <tt class="docutils literal">pytestmark</tt> attribute containing a list
of marks applied directly to the test function, as opposed to marks inherited
from parent classes or modules. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2516">#2516</a>)</li>
<li>Collection ignores local virtualenvs by default; <tt class="docutils literal"><span class="pre">--collect-in-virtualenv</span></tt>
overrides this behavior. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2518">#2518</a>)</li>
<li>Allow class methods decorated as <tt class="docutils literal">&#64;staticmethod</tt> to be candidates for
collection as a test function. (Only for Python 2.7 and above. Python 2.6
will still ignore static methods.) (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2528">#2528</a>)</li>
<li>Introduce <tt class="docutils literal">mark.with_args</tt> in order to allow passing functions/classes as
sole argument to marks. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2540">#2540</a>)</li>
<li>New <tt class="docutils literal">cache_dir</tt> ini option: sets the directory where the contents of the
cache plugin are stored. Directory may be relative or absolute path: if relative path, then
directory is created relative to <tt class="docutils literal">rootdir</tt>, otherwise it is used as is.
Additionally path may contain environment variables which are expanded during
runtime. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2543">#2543</a>)</li>
<li>Introduce the <tt class="docutils literal">PYTEST_CURRENT_TEST</tt> environment variable that is set with
the <tt class="docutils literal">nodeid</tt> and stage (<tt class="docutils literal">setup</tt>, <tt class="docutils literal">call</tt> and <tt class="docutils literal">teardown</tt>) of the test
being currently executed. See the <a class="reference external" href="https://docs.pytest.org/en/latest/example/simple.html#pytest-current-test-environment-variable">documentation</a> for more info. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2583">#2583</a>)</li>
<li>Introduced <tt class="docutils literal">&#64;pytest.mark.filterwarnings</tt> mark which allows overwriting the
warnings filter on a per test, class or module level. See the <a class="reference external" href="https://docs.pytest.org/en/latest/warnings.html#pytest-mark-filterwarnings">docs</a> for more information. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2598">#2598</a>)</li>
<li><tt class="docutils literal"><span class="pre">--last-failed</span></tt> now remembers forever when a test has failed and only
forgets it if it passes again. This makes it easy to fix a test suite by
selectively running files and fixing tests incrementally. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2621">#2621</a>)</li>
<li>New <tt class="docutils literal">pytest_report_collectionfinish</tt> hook which allows plugins to add
messages to the terminal reporting after collection has been finished
successfully. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2622">#2622</a>)</li>
<li>Added support for <a class="reference external" href="https://www.python.org/dev/peps/pep-0415/">PEP-415's</a>
<tt class="docutils literal">Exception.__suppress_context__</tt>. Now if a <tt class="docutils literal">raise exception from None</tt> is
caught by pytest, pytest will no longer chain the context in the test report.
The behavior now matches Python's traceback behavior. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2631">#2631</a>)</li>
<li>Exceptions raised by <tt class="docutils literal">pytest.fail</tt>, <tt class="docutils literal">pytest.skip</tt> and <tt class="docutils literal">pytest.xfail</tt>
now subclass BaseException, making them harder to be caught unintentionally
by normal code. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/580">#580</a>)</li>
</ul>
</div>
<div class="section" id="id475">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Set <tt class="docutils literal">stdin</tt> to a closed <tt class="docutils literal">PIPE</tt> in <tt class="docutils literal">pytester.py.Testdir.popen()</tt> for
avoid unwanted interactive <tt class="docutils literal">pdb</tt> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2023">#2023</a>)</li>
<li>Add missing <tt class="docutils literal">encoding</tt> attribute to <tt class="docutils literal">sys.std*</tt> streams when using
<tt class="docutils literal">capsys</tt> capture mode. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2375">#2375</a>)</li>
<li>Fix terminal color changing to black on Windows if <tt class="docutils literal">colorama</tt> is imported
in a <tt class="docutils literal">conftest.py</tt> file. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2510">#2510</a>)</li>
<li>Fix line number when reporting summary of skipped tests. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2548">#2548</a>)</li>
<li>capture: ensure that EncodedFile.name is a string. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2555">#2555</a>)</li>
<li>The options <tt class="docutils literal"><span class="pre">--fixtures</span></tt> and <tt class="docutils literal"><span class="pre">--fixtures-per-test</span></tt> will now keep
indentation within docstrings. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2574">#2574</a>)</li>
<li>doctests line numbers are now reported correctly, fixing <a class="reference external" href="https://github.com/Frozenball/pytest-sugar/issues/122">pytest-sugar#122</a>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2610">#2610</a>)</li>
<li>Fix non-determinism in order of fixture collection. Adds new dependency
(ordereddict) for Python 2.6. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/920">#920</a>)</li>
</ul>
</div>
<div class="section" id="id484">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Clarify <tt class="docutils literal">pytest_configure</tt> hook call order. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2539">#2539</a>)</li>
<li>Extend documentation for testing plugin code with the <tt class="docutils literal">pytester</tt> plugin.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/971">#971</a>)</li>
</ul>
</div>
<div class="section" id="id487">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Update help message for <tt class="docutils literal"><span class="pre">--strict</span></tt> to make it clear it only deals with
unregistered markers, not warnings. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2444">#2444</a>)</li>
<li>Internal code move: move code for pytest.approx/pytest.raises to own files in
order to cut down the size of python.py (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2489">#2489</a>)</li>
<li>Renamed the utility function <tt class="docutils literal">_pytest.compat._escape_strings</tt> to
<tt class="docutils literal">_ascii_escaped</tt> to better communicate the function's purpose. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2533">#2533</a>)</li>
<li>Improve error message for CollectError with skip/skipif. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2546">#2546</a>)</li>
<li>Emit warning about <tt class="docutils literal">yield</tt> tests being deprecated only once per generator.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2562">#2562</a>)</li>
<li>Ensure final collected line doesn't include artifacts of previous write.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2571">#2571</a>)</li>
<li>Fixed all flake8 errors and warnings. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2581">#2581</a>)</li>
<li>Added <tt class="docutils literal"><span class="pre">fix-lint</span></tt> tox environment to run automatic pep8 fixes on the code.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2582">#2582</a>)</li>
<li>Turn warnings into errors in pytest's own test suite in order to catch
regressions due to deprecations more promptly. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2588">#2588</a>)</li>
<li>Show multiple issue links in CHANGELOG entries. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2620">#2620</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-1-3-2017-07-03">
<h1>pytest 3.1.3 (2017-07-03)</h1>
<div class="section" id="id498">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Fix decode error in Python 2 for doctests in docstrings. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2434">#2434</a>)</li>
<li>Exceptions raised during teardown by finalizers are now suppressed until all
finalizers are called, with the initial exception reraised. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2440">#2440</a>)</li>
<li>Fix incorrect &quot;collected items&quot; report when specifying tests on the command-
line. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2464">#2464</a>)</li>
<li><tt class="docutils literal">deprecated_call</tt> in context-manager form now captures deprecation warnings
even if the same warning has already been raised. Also, <tt class="docutils literal">deprecated_call</tt>
will always produce the same error message (previously it would produce
different messages in context-manager vs. function-call mode). (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2469">#2469</a>)</li>
<li>Fix issue where paths collected by pytest could have triple leading <tt class="docutils literal">/</tt>
characters. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2475">#2475</a>)</li>
<li>Fix internal error when trying to detect the start of a recursive traceback.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2486">#2486</a>)</li>
</ul>
</div>
<div class="section" id="id505">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Explicitly state for which hooks the calls stop after the first non-None
result. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2493">#2493</a>)</li>
</ul>
</div>
<div class="section" id="id507">
<h2>Trivial/Internal Changes</h2>
<ul class="simple">
<li>Create invoke tasks for updating the vendored packages. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2474">#2474</a>)</li>
<li>Update copyright dates in LICENSE, README.rst and in the documentation.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2499">#2499</a>)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-1-2-2017-06-08">
<h1>pytest 3.1.2 (2017-06-08)</h1>
<div class="section" id="id510">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Required options added via <tt class="docutils literal">pytest_addoption</tt> will no longer prevent using
--help without passing them. (#1999)</li>
<li>Respect <tt class="docutils literal">python_files</tt> in assertion rewriting. (#2121)</li>
<li>Fix recursion error detection when frames in the traceback contain objects
that can't be compared (like <tt class="docutils literal">numpy</tt> arrays). (#2459)</li>
<li><tt class="docutils literal">UnicodeWarning</tt> is issued from the internal pytest warnings plugin only
when the message contains non-ascii unicode (Python 2 only). (#2463)</li>
<li>Added a workaround for Python 3.6 <tt class="docutils literal">WindowsConsoleIO</tt> breaking due to Pytests's
<tt class="docutils literal">FDCapture</tt>. Other code using console handles might still be affected by the
very same issue and might require further workarounds/fixes, i.e. <tt class="docutils literal">colorama</tt>.
(#2467)</li>
</ul>
</div>
<div class="section" id="id511">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Fix internal API links to <tt class="docutils literal">pluggy</tt> objects. (#2331)</li>
<li>Make it clear that <tt class="docutils literal">pytest.xfail</tt> stops test execution at the calling point
and improve overall flow of the <tt class="docutils literal">skipping</tt> docs. (#810)</li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-1-1-2017-05-30">
<h1>pytest 3.1.1 (2017-05-30)</h1>
<div class="section" id="id512">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>pytest warning capture no longer overrides existing warning filters. The
previous behaviour would override all filters and caused regressions in test
suites which configure warning filters to match their needs. Note that as a
side-effect of this is that <tt class="docutils literal">DeprecationWarning</tt> and
<tt class="docutils literal">PendingDeprecationWarning</tt> are no longer shown by default. (#2430)</li>
<li>Fix issue with non-ascii contents in doctest text files. (#2434)</li>
<li>Fix encoding errors for unicode warnings in Python 2. (#2436)</li>
<li><tt class="docutils literal">pytest.deprecated_call</tt> now captures <tt class="docutils literal">PendingDeprecationWarning</tt> in
context manager form. (#2441)</li>
</ul>
</div>
<div class="section" id="id513">
<h2>Improved Documentation</h2>
<ul class="simple">
<li>Addition of towncrier for changelog management. (#2390)</li>
</ul>
</div>
</div>
<div class="section" id="id514">
<h1>3.1.0 (2017-05-22)</h1>
<div class="section" id="new-features">
<h2>New Features</h2>
<ul>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pytest-warnings</span></tt> plugin has been integrated into the core and now <tt class="docutils literal">pytest</tt> automatically
captures and displays warnings at the end of the test session.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>This feature may disrupt test suites which apply and treat warnings themselves, and can be
disabled in your <tt class="docutils literal">pytest.ini</tt>:</p>
<pre class="code ini literal-block">
<span class="keyword">[pytest]</span>
<span class="name attribute">addopts</span> <span class="operator">=</span> <span class="literal string">-p no:warnings</span>
</pre>
<p class="last">See the <a class="reference external" href="https://docs.pytest.org/en/latest/warnings.html">warnings documentation page</a> for more
information.</p>
</div>
<p>Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p>
</li>
<li><p class="first">Added <tt class="docutils literal">junit_suite_name</tt> ini option to specify root <tt class="docutils literal">&lt;testsuite&gt;</tt> name for JUnit XML reports (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/533">#533</a>).</p>
</li>
<li><p class="first">Added an ini option <tt class="docutils literal">doctest_encoding</tt> to specify which encoding to use for doctest files.
Thanks <a class="reference external" href="https://github.com/wheerd">&#64;wheerd</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/2101">#2101</a>).</p>
</li>
<li><p class="first"><tt class="docutils literal">pytest.warns</tt> now checks for subclass relationship rather than
class equality. Thanks <a class="reference external" href="https://github.com/lesteve">&#64;lesteve</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/2166">#2166</a>)</p>
</li>
<li><p class="first"><tt class="docutils literal">pytest.raises</tt> now asserts that the error message matches a text or regex
with the <tt class="docutils literal">match</tt> keyword argument. Thanks <a class="reference external" href="https://github.com/Kriechi">&#64;Kriechi</a> for the PR.</p>
</li>
<li><p class="first"><tt class="docutils literal">pytest.param</tt> can be used to declare test parameter sets with marks and test ids.
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</p>
</li>
</ul>
</div>
<div class="section" id="changes">
<h2>Changes</h2>
<ul class="simple">
<li>remove all internal uses of pytest_namespace hooks,
this is to prepare the removal of preloadconfig in pytest 4.0
Thanks to <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</li>
<li>pytest now warns when a callable ids raises in a parametrized test. Thanks <a class="reference external" href="https://github.com/fogo">&#64;fogo</a> for the PR.</li>
<li>It is now possible to skip test classes from being collected by setting a
<tt class="docutils literal">__test__</tt> attribute to <tt class="docutils literal">False</tt> in the class body (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2007">#2007</a>). Thanks
to <a class="reference external" href="https://github.com/syre">&#64;syre</a> for the report and <a class="reference external" href="https://github.com/lwm">&#64;lwm</a> for the PR.</li>
<li>Change junitxml.py to produce reports that comply with Junitxml schema.
If the same test fails with failure in call and then errors in teardown
we split testcase element into two, one containing the error and the other
the failure. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2228">#2228</a>) Thanks to <a class="reference external" href="https://github.com/KKoukiou">&#64;kkoukiou</a> for the PR.</li>
<li>Testcase reports with a <tt class="docutils literal">url</tt> attribute will now properly write this to junitxml.
Thanks <a class="reference external" href="https://github.com/fushi">&#64;fushi</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1874">#1874</a>).</li>
<li>Remove common items from dict comparison output when verbosity=1. Also update
the truncation message to make it clearer that pytest truncates all
assertion messages if verbosity &lt; 2 (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1512">#1512</a>).
Thanks <a class="reference external" href="https://github.com/mattduck">&#64;mattduck</a> for the PR</li>
<li><tt class="docutils literal"><span class="pre">--pdbcls</span></tt> no longer implies <tt class="docutils literal"><span class="pre">--pdb</span></tt>. This makes it possible to use
<tt class="docutils literal"><span class="pre">addopts=--pdbcls=module.SomeClass</span></tt> on <tt class="docutils literal">pytest.ini</tt>. Thanks <a class="reference external" href="https://github.com/davidszotten">&#64;davidszotten</a> for
the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1952">#1952</a>).</li>
<li>fix <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2013">#2013</a>: turn RecordedWarning into <tt class="docutils literal">namedtuple</tt>,
to give it a comprehensible repr while preventing unwarranted modification.</li>
<li>fix <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2208">#2208</a>: ensure an iteration limit for _pytest.compat.get_real_func.
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the report and PR.</li>
<li>Hooks are now verified after collection is complete, rather than right after loading installed plugins. This
makes it easy to write hooks for plugins which will be loaded during collection, for example using the
<tt class="docutils literal">pytest_plugins</tt> special variable (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1821">#1821</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Modify <tt class="docutils literal">pytest_make_parametrize_id()</tt> hook to accept <tt class="docutils literal">argname</tt> as an
additional parameter.
Thanks <a class="reference external" href="https://github.com/unsignedint">&#64;unsignedint</a> for the PR.</li>
<li>Add <tt class="docutils literal">venv</tt> to the default <tt class="docutils literal">norecursedirs</tt> setting.
Thanks <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the PR.</li>
<li><tt class="docutils literal">PluginManager.import_plugin</tt> now accepts unicode plugin names in Python 2.
Thanks <a class="reference external" href="https://github.com/reutsharabani">&#64;reutsharabani</a> for the PR.</li>
<li>fix <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2308">#2308</a>: When using both <tt class="docutils literal"><span class="pre">--lf</span></tt> and <tt class="docutils literal"><span class="pre">--ff</span></tt>, only the last failed tests are run.
Thanks <a class="reference external" href="https://github.com/ojii">&#64;ojii</a> for the PR.</li>
<li>Replace minor/patch level version numbers in the documentation with placeholders.
This significantly reduces change-noise as different contributors regnerate
the documentation on different platforms.
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</li>
<li>fix <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2391">#2391</a>: consider pytest_plugins on all plugin modules
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</li>
</ul>
</div>
<div class="section" id="id515">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>Fix <tt class="docutils literal">AttributeError</tt> on <tt class="docutils literal">sys.stdout.buffer</tt> / <tt class="docutils literal">sys.stderr.buffer</tt>
while using <tt class="docutils literal">capsys</tt> fixture in python 3. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1407">#1407</a>).
Thanks to <a class="reference external" href="https://github.com/asottile">&#64;asottile</a>.</li>
<li>Change capture.py's <tt class="docutils literal">DontReadFromInput</tt> class to throw <tt class="docutils literal">io.UnsupportedOperation</tt> errors rather
than ValueErrors in the <tt class="docutils literal">fileno</tt> method (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2276">#2276</a>).
Thanks <a class="reference external" href="https://github.com/metasyn">&#64;metasyn</a> and <a class="reference external" href="https://github.com/vlad-dragos">&#64;vlad-dragos</a> for the PR.</li>
<li>Fix exception formatting while importing modules when the exception message
contains non-ascii characters (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2336">#2336</a>).
Thanks <a class="reference external" href="https://github.com/fabioz">&#64;fabioz</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Added documentation related to issue (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1937">#1937</a>)
Thanks <a class="reference external" href="https://github.com/skylarjhdownes">&#64;skylarjhdownes</a> for the PR.</li>
<li>Allow collecting files with any file extension as Python modules (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2369">#2369</a>).
Thanks <a class="reference external" href="https://github.com/Kodiologist">&#64;Kodiologist</a> for the PR.</li>
<li>Show the correct error message when collect &quot;parametrize&quot; func with wrong args (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2383">#2383</a>).
Thanks <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the report and <a class="reference external" href="https://github.com/robin0371">&#64;robin0371</a> for the PR.</li>
</ul>
</div>
</div>
<div class="section" id="id535">
<h1>3.0.7 (2017-03-14)</h1>
<ul class="simple">
<li>Fix issue in assertion rewriting breaking due to modules silently discarding
other modules when importing fails
Notably, importing the <tt class="docutils literal">anydbm</tt> module is fixed. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2248">#2248</a>).
Thanks <a class="reference external" href="https://github.com/pfhayes">&#64;pfhayes</a> for the PR.</li>
<li>junitxml: Fix problematic case where system-out tag occurred twice per testcase
element in the XML report. Thanks <a class="reference external" href="https://github.com/KKoukiou">&#64;kkoukiou</a> for the PR.</li>
<li>Fix regression, pytest now skips unittest correctly if run with <tt class="docutils literal"><span class="pre">--pdb</span></tt>
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2137">#2137</a>). Thanks to <a class="reference external" href="https://github.com/gst">&#64;gst</a> for the report and <a class="reference external" href="https://github.com/mbyt">&#64;mbyt</a> for the PR.</li>
<li>Ignore exceptions raised from descriptors (e.g. properties) during Python test collection (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2234">#2234</a>).
Thanks to <a class="reference external" href="https://github.com/bluetech">&#64;bluetech</a>.</li>
<li><tt class="docutils literal"><span class="pre">--override-ini</span></tt> now correctly overrides some fundamental options like <tt class="docutils literal">python_files</tt> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2238">#2238</a>).
Thanks <a class="reference external" href="https://github.com/sirex">&#64;sirex</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Replace <tt class="docutils literal">raise StopIteration</tt> usages in the code by simple <tt class="docutils literal">returns</tt> to finish generators, in accordance to <a class="reference external" href="https://www.python.org/dev/peps/pep-0479/">PEP-479</a> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2160">#2160</a>).
Thanks <a class="reference external" href="https://github.com/tgoodlet">&#64;tgoodlet</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Fix internal errors when an unprintable <tt class="docutils literal">AssertionError</tt> is raised inside a test.
Thanks <a class="reference external" href="https://github.com/omerhadari">&#64;omerhadari</a> for the PR.</li>
<li>Skipping plugin now also works with test items generated by custom collectors (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2231">#2231</a>).
Thanks to <a class="reference external" href="https://github.com/vidartf">&#64;vidartf</a>.</li>
<li>Fix trailing whitespace in console output if no .ini file presented (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2281">#2281</a>). Thanks <a class="reference external" href="https://github.com/fbjorn">&#64;fbjorn</a> for the PR.</li>
<li>Conditionless <tt class="docutils literal">xfail</tt> markers no longer rely on the underlying test item
being an instance of <tt class="docutils literal">PyobjMixin</tt>, and can therefore apply to tests not
collected by the built-in python test collector. Thanks <a class="reference external" href="https://github.com/barneygale">&#64;barneygale</a> for the
PR.</li>
</ul>
</div>
<div class="section" id="id543">
<h1>3.0.6 (2017-01-22)</h1>
<ul class="simple">
<li>pytest no longer generates <tt class="docutils literal">PendingDeprecationWarning</tt> from its own operations, which was introduced by mistake in version <tt class="docutils literal">3.0.5</tt> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2118">#2118</a>).
Thanks to <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the report and <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</li>
<li>pytest no longer recognizes coroutine functions as yield tests (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2129">#2129</a>).
Thanks to <a class="reference external" href="https://github.com/malinoff">&#64;malinoff</a> for the PR.</li>
<li>Plugins loaded by the <tt class="docutils literal">PYTEST_PLUGINS</tt> environment variable are now automatically
considered for assertion rewriting (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2185">#2185</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Improve error message when pytest.warns fails (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2150">#2150</a>). The type(s) of the
expected warnings and the list of caught warnings is added to the
error message. Thanks <a class="reference external" href="https://github.com/lesteve">&#64;lesteve</a> for the PR.</li>
<li>Fix <tt class="docutils literal">pytester</tt> internal plugin to work correctly with latest versions of
<tt class="docutils literal">zope.interface</tt> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1989">#1989</a>). Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Assert statements of the <tt class="docutils literal">pytester</tt> plugin again benefit from assertion rewriting (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1920">#1920</a>).
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Specifying tests with colons like <tt class="docutils literal"><span class="pre">test_foo.py::test_bar</span></tt> for tests in
subdirectories with ini configuration files now uses the correct ini file
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2148">#2148</a>).  Thanks <a class="reference external" href="https://github.com/pelme">&#64;pelme</a>.</li>
<li>Fail <tt class="docutils literal"><span class="pre">testdir.runpytest().assert_outcomes()</span></tt> explicitly if the pytest
terminal output it relies on is missing. Thanks to <a class="reference external" href="https://github.com/eli-b">&#64;eli-b</a> for the PR.</li>
</ul>
</div>
<div class="section" id="id551">
<h1>3.0.5 (2016-12-05)</h1>
<ul class="simple">
<li>Add warning when not passing <tt class="docutils literal">option=value</tt> correctly to <tt class="docutils literal"><span class="pre">-o/--override-ini</span></tt> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2105">#2105</a>).
Also improved the help documentation. Thanks to <a class="reference external" href="https://github.com/mbukatov">&#64;mbukatov</a> for the report and
<a class="reference external" href="https://github.com/lwm">&#64;lwm</a> for the PR.</li>
<li>Now <tt class="docutils literal"><span class="pre">--confcutdir</span></tt> and <tt class="docutils literal"><span class="pre">--junit-xml</span></tt> are properly validated if they are directories
and filenames, respectively (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2089">#2089</a> and <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2078">#2078</a>). Thanks to <a class="reference external" href="https://github.com/lwm">&#64;lwm</a> for the PR.</li>
<li>Add hint to error message hinting possible missing <tt class="docutils literal">__init__.py</tt> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/478">#478</a>). Thanks <a class="reference external" href="https://github.com/DuncanBetts">&#64;DuncanBetts</a>.</li>
<li>More accurately describe when fixture finalization occurs in documentation (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/687">#687</a>). Thanks <a class="reference external" href="https://github.com/DuncanBetts">&#64;DuncanBetts</a>.</li>
<li>Provide <tt class="docutils literal">:ref:</tt> targets for <tt class="docutils literal">recwarn.rst</tt> so we can use intersphinx referencing.
Thanks to <a class="reference external" href="https://bitbucket.org/dupuy/">&#64;dupuy</a> for the report and <a class="reference external" href="https://github.com/lwm">&#64;lwm</a> for the PR.</li>
<li>In Python 2, use a simple <tt class="docutils literal">+-</tt> ASCII string in the string representation of <tt class="docutils literal">pytest.approx</tt> (for example <tt class="docutils literal">&quot;4 +- <span class="pre">4.0e-06&quot;</span></tt>)
because it is brittle to handle that in different contexts and representations internally in pytest
which can result in bugs such as <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2111">#2111</a>. In Python 3, the representation still uses <tt class="docutils literal">±</tt> (for example <tt class="docutils literal">4 ± <span class="pre">4.0e-06</span></tt>).
Thanks <a class="reference external" href="https://github.com/kerrick-lyft">&#64;kerrick-lyft</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Using <tt class="docutils literal">item.Function</tt>, <tt class="docutils literal">item.Module</tt>, etc., is now issuing deprecation warnings, prefer
<tt class="docutils literal">pytest.Function</tt>, <tt class="docutils literal">pytest.Module</tt>, etc., instead (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2034">#2034</a>).
Thanks <a class="reference external" href="https://github.com/nmundar">&#64;nmundar</a> for the PR.</li>
<li>Fix error message using <tt class="docutils literal">approx</tt> with complex numbers (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2082">#2082</a>).
Thanks <a class="reference external" href="https://github.com/adler-j">&#64;adler-j</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Fixed false-positives warnings from assertion rewrite hook for modules imported more than
once by the <tt class="docutils literal">pytest_plugins</tt> mechanism.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Remove an internal cache which could cause hooks from <tt class="docutils literal">conftest.py</tt> files in
sub-directories to be called in other directories incorrectly (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2016">#2016</a>).
Thanks <a class="reference external" href="https://bitbucket.org/d-b-w/">&#64;d-b-w</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Remove internal code meant to support earlier Python 3 versions that produced the side effect
of leaving <tt class="docutils literal">None</tt> in <tt class="docutils literal">sys.modules</tt> when expressions were evaluated by pytest (for example passing a condition
as a string to <tt class="docutils literal">pytest.mark.skipif</tt>)(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2103">#2103</a>).
Thanks <a class="reference external" href="https://github.com/jaraco">&#64;jaraco</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Cope gracefully with a .pyc file with no matching .py file (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2038">#2038</a>). Thanks
<a class="reference external" href="https://github.com/nedbat">&#64;nedbat</a>.</li>
</ul>
</div>
<div class="section" id="id563">
<h1>3.0.4 (2016-11-09)</h1>
<ul class="simple">
<li>Import errors when collecting test modules now display the full traceback (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1976">#1976</a>).
Thanks <a class="reference external" href="https://github.com/cwitty">&#64;cwitty</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Fix confusing command-line help message for custom options with two or more <tt class="docutils literal">metavar</tt> properties (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2004">#2004</a>).
Thanks <a class="reference external" href="https://github.com/okulynyak">&#64;okulynyak</a> and <a class="reference external" href="https://github.com/davehunt">&#64;davehunt</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>When loading plugins, import errors which contain non-ascii messages are now properly handled in Python 2 (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1998">#1998</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Fixed cyclic reference when <tt class="docutils literal">pytest.raises</tt> is used in context-manager form (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1965">#1965</a>). Also as a
result of this fix, <tt class="docutils literal">sys.exc_info()</tt> is left empty in both context-manager and function call usages.
Previously, <tt class="docutils literal">sys.exc_info</tt> would contain the exception caught by the context manager,
even when the expected exception occurred.
Thanks <a class="reference external" href="https://github.com/MSeifert04">&#64;MSeifert04</a> for the report and the PR.</li>
<li>Fixed false-positives warnings from assertion rewrite hook for modules that were rewritten but
were later marked explicitly by <tt class="docutils literal">pytest.register_assert_rewrite</tt>
or implicitly as a plugin (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2005">#2005</a>).
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Report teardown output on test failure (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/442">#442</a>).
Thanks <a class="reference external" href="https://github.com/matclab">&#64;matclab</a> for the PR.</li>
<li>Fix teardown error message in generated xUnit XML.
Thanks <a class="reference external" href="https://github.com/gdyuldin">&#64;gdyuldin</a> for the PR.</li>
<li>Properly handle exceptions in <tt class="docutils literal">multiprocessing</tt> tasks (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1984">#1984</a>).
Thanks <a class="reference external" href="https://github.com/adborden">&#64;adborden</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Clean up unittest TestCase objects after tests are complete (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1649">#1649</a>).
Thanks <a class="reference external" href="https://github.com/d_b_w">&#64;d_b_w</a> for the report and PR.</li>
</ul>
</div>
<div class="section" id="id573">
<h1>3.0.3 (2016-09-28)</h1>
<ul class="simple">
<li>The <tt class="docutils literal">ids</tt> argument to <tt class="docutils literal">parametrize</tt> again accepts <tt class="docutils literal">unicode</tt> strings
in Python 2 (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1905">#1905</a>).
Thanks <a class="reference external" href="https://github.com/philpep">&#64;philpep</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Assertions are now being rewritten for plugins in development mode
(<tt class="docutils literal">pip install <span class="pre">-e</span></tt>) (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1934">#1934</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Fix pkg_resources import error in Jython projects (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1853">#1853</a>).
Thanks <a class="reference external" href="https://github.com/raquel-ucl">&#64;raquel-ucl</a> for the PR.</li>
<li>Got rid of <tt class="docutils literal">AttributeError: 'Module' object has no attribute '_obj'</tt> exception
in Python 3 (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1944">#1944</a>).
Thanks <a class="reference external" href="https://github.com/axil">&#64;axil</a> for the PR.</li>
<li>Explain a bad scope value passed to <tt class="docutils literal">&#64;fixture</tt> declarations or
a <tt class="docutils literal">MetaFunc.parametrize()</tt> call. Thanks <a class="reference external" href="https://github.com/tgoodlet">&#64;tgoodlet</a> for the PR.</li>
<li>This version includes <tt class="docutils literal"><span class="pre">pluggy-0.4.0</span></tt>, which correctly handles
<tt class="docutils literal">VersionConflict</tt> errors in plugins (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/704">#704</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
</ul>
</div>
<div class="section" id="id579">
<h1>3.0.2 (2016-09-01)</h1>
<ul class="simple">
<li>Improve error message when passing non-string ids to <tt class="docutils literal">pytest.mark.parametrize</tt> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1857">#1857</a>).
Thanks <a class="reference external" href="https://github.com/okken">&#64;okken</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Add <tt class="docutils literal">buffer</tt> attribute to stdin stub class <tt class="docutils literal">pytest.capture.DontReadFromInput</tt>
Thanks <a class="reference external" href="https://github.com/joguSD">&#64;joguSD</a> for the PR.</li>
<li>Fix <tt class="docutils literal">UnicodeEncodeError</tt> when string comparison with unicode has failed. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1864">#1864</a>)
Thanks <a class="reference external" href="https://github.com/AiOO">&#64;AiOO</a> for the PR.</li>
<li><tt class="docutils literal">pytest_plugins</tt> is now handled correctly if defined as a string (as opposed as
a sequence of strings) when modules are considered for assertion rewriting.
Due to this bug, much more modules were being rewritten than necessary
if a test suite uses <tt class="docutils literal">pytest_plugins</tt> to load internal plugins (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1888">#1888</a>).
Thanks <a class="reference external" href="https://github.com/jaraco">&#64;jaraco</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1891">#1891</a>).</li>
<li>Do not call tearDown and cleanups when running tests from
<tt class="docutils literal">unittest.TestCase</tt> subclasses with <tt class="docutils literal"><span class="pre">--pdb</span></tt>
enabled. This allows proper post mortem debugging for all applications
which have significant logic in their tearDown machinery (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1890">#1890</a>). Thanks
<a class="reference external" href="https://github.com/mbyt">&#64;mbyt</a> for the PR.</li>
<li>Fix use of deprecated <tt class="docutils literal">getfuncargvalue</tt> method in the internal doctest plugin.
Thanks <a class="reference external" href="https://github.com/ViviCoder">&#64;ViviCoder</a> for the report (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1898">#1898</a>).</li>
</ul>
</div>
<div class="section" id="id586">
<h1>3.0.1 (2016-08-23)</h1>
<ul class="simple">
<li>Fix regression when <tt class="docutils literal">importorskip</tt> is used at module level (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1822">#1822</a>).
Thanks <a class="reference external" href="https://github.com/jaraco">&#64;jaraco</a> and <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Fix parametrization scope when session fixtures are used in conjunction
with normal parameters in the same call (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1832">#1832</a>).
Thanks <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the report, <a class="reference external" href="https://github.com/Kingdread">&#64;Kingdread</a> and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Fix internal error when parametrizing tests or fixtures using an empty <tt class="docutils literal">ids</tt> argument (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1849">#1849</a>).
Thanks <a class="reference external" href="https://github.com/OPpuolitaival">&#64;OPpuolitaival</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Fix loader error when running <tt class="docutils literal">pytest</tt> embedded in a zipfile.
Thanks <a class="reference external" href="https://github.com/mbachry">&#64;mbachry</a> for the PR.</li>
</ul>
</div>
<div class="section" id="id590">
<h1>3.0.0 (2016-08-18)</h1>
<p><strong>Incompatible changes</strong></p>
<p>A number of incompatible changes were made in this release, with the intent of removing features deprecated for a long
time or change existing behaviors in order to make them less surprising/more useful.</p>
<ul>
<li><p class="first">Reinterpretation mode has now been removed.  Only plain and rewrite
mode are available, consequently the <tt class="docutils literal"><span class="pre">--assert=reinterp</span></tt> option is
no longer available.  This also means files imported from plugins or
<tt class="docutils literal">conftest.py</tt> will not benefit from improved assertions by
default, you should use <tt class="docutils literal">pytest.register_assert_rewrite()</tt> to
explicitly turn on assertion rewriting for those files.  Thanks
<a class="reference external" href="https://github.com/flub">&#64;flub</a> for the PR.</p>
</li>
<li><p class="first">The following deprecated commandline options were removed:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">--genscript</span></tt>: no longer supported;</li>
<li><tt class="docutils literal"><span class="pre">--no-assert</span></tt>: use <tt class="docutils literal"><span class="pre">--assert=plain</span></tt> instead;</li>
<li><tt class="docutils literal"><span class="pre">--nomagic</span></tt>: use <tt class="docutils literal"><span class="pre">--assert=plain</span></tt> instead;</li>
<li><tt class="docutils literal"><span class="pre">--report</span></tt>: use <tt class="docutils literal"><span class="pre">-r</span></tt> instead;</li>
</ul>
<p>Thanks to <a class="reference external" href="https://github.com/RedBeardCode">&#64;RedBeardCode</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1664">#1664</a>).</p>
</li>
<li><p class="first">ImportErrors in plugins now are a fatal error instead of issuing a
pytest warning (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1479">#1479</a>). Thanks to <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the PR.</p>
</li>
<li><p class="first">Removed support code for Python 3 versions &lt; 3.3 (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1627">#1627</a>).</p>
</li>
<li><p class="first">Removed all <tt class="docutils literal"><span class="pre">py.test-X*</span></tt> entry points. The versioned, suffixed entry points
were never documented and a leftover from a pre-virtualenv era. These entry
points also created broken entry points in wheels, so removing them also
removes a source of confusion for users (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1632">#1632</a>).
Thanks <a class="reference external" href="https://github.com/obestwalter">&#64;obestwalter</a> for the PR.</p>
</li>
<li><p class="first"><tt class="docutils literal">pytest.skip()</tt> now raises an error when used to decorate a test function,
as opposed to its original intent (to imperatively skip a test inside a test function). Previously
this usage would cause the entire module to be skipped (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/607">#607</a>).
Thanks <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1519">#1519</a>).</p>
</li>
<li><p class="first">Exit tests if a collection error occurs. A poll indicated most users will hit CTRL-C
anyway as soon as they see collection errors, so pytest might as well make that the default behavior (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1421">#1421</a>).
A <tt class="docutils literal"><span class="pre">--continue-on-collection-errors</span></tt> option has been added to restore the previous behaviour.
Thanks <a class="reference external" href="https://github.com/olegpidsadnyi">&#64;olegpidsadnyi</a> and <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1628">#1628</a>).</p>
</li>
<li><p class="first">Renamed the pytest <tt class="docutils literal">pdb</tt> module (plugin) into <tt class="docutils literal">debugging</tt> to avoid clashes with the builtin <tt class="docutils literal">pdb</tt> module.</p>
</li>
<li><p class="first">Raise a helpful failure message when requesting a parametrized fixture at runtime,
e.g. with <tt class="docutils literal">request.getfixturevalue</tt>. Previously these parameters were simply
never defined, so a fixture decorated like <tt class="docutils literal"><span class="pre">&#64;pytest.fixture(params=[0,</span> 1, 2])</tt>
only ran once (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/460">#460</a>).
Thanks to <a class="reference external" href="https://github.com/nikratio">&#64;nikratio</a> for the bug report, <a class="reference external" href="https://github.com/RedBeardCode">&#64;RedBeardCode</a> and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR.</p>
</li>
<li><p class="first"><tt class="docutils literal">_pytest.monkeypatch.monkeypatch</tt> class has been renamed to <tt class="docutils literal">_pytest.monkeypatch.MonkeyPatch</tt>
so it doesn't conflict with the <tt class="docutils literal">monkeypatch</tt> fixture.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">--exitfirst</span> / <span class="pre">-x</span></tt> can now be overridden by a following <tt class="docutils literal"><span class="pre">--maxfail=N</span></tt>
and is just a synonym for <tt class="docutils literal"><span class="pre">--maxfail=1</span></tt>.</p>
</li>
</ul>
<p><strong>New Features</strong></p>
<ul>
<li><p class="first">Support nose-style <tt class="docutils literal">__test__</tt> attribute on methods of classes,
including unittest-style Classes. If set to <tt class="docutils literal">False</tt>, the test will not be
collected.</p>
</li>
<li><p class="first">New <tt class="docutils literal">doctest_namespace</tt> fixture for injecting names into the
namespace in which doctests run.
Thanks <a class="reference external" href="https://github.com/milliams">&#64;milliams</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1428">#1428</a>).</p>
</li>
<li><p class="first">New <tt class="docutils literal"><span class="pre">--doctest-report</span></tt> option available to change the output format of diffs
when running (failing) doctests (implements <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1749">#1749</a>).
Thanks <a class="reference external" href="https://github.com/hartym">&#64;hartym</a> for the PR.</p>
</li>
<li><p class="first">New <tt class="docutils literal">name</tt> argument to <tt class="docutils literal">pytest.fixture</tt> decorator which allows a custom name
for a fixture (to solve the funcarg-shadowing-fixture problem).
Thanks <a class="reference external" href="https://github.com/novas0x2a">&#64;novas0x2a</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1444">#1444</a>).</p>
</li>
<li><p class="first">New <tt class="docutils literal">approx()</tt> function for easily comparing floating-point numbers in
tests.
Thanks <a class="reference external" href="https://github.com/kalekundert">&#64;kalekundert</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1441">#1441</a>).</p>
</li>
<li><p class="first">Ability to add global properties in the final xunit output file by accessing
the internal <tt class="docutils literal">junitxml</tt> plugin (experimental).
Thanks <a class="reference external" href="https://github.com/tareqalayan">&#64;tareqalayan</a> for the complete PR <a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1454">#1454</a>).</p>
</li>
<li><p class="first">New <tt class="docutils literal">ExceptionInfo.match()</tt> method to match a regular expression on the
string representation of an exception (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/372">#372</a>).
Thanks <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1502">#1502</a>).</p>
</li>
<li><p class="first"><tt class="docutils literal">__tracebackhide__</tt> can now also be set to a callable which then can decide
whether to filter the traceback based on the <tt class="docutils literal">ExceptionInfo</tt> object passed
to it. Thanks <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1526">#1526</a>).</p>
</li>
<li><p class="first">New <tt class="docutils literal">pytest_make_parametrize_id(config, val)</tt> hook which can be used by plugins to provide
friendly strings for custom types.
Thanks <a class="reference external" href="https://github.com/palaviv">&#64;palaviv</a> for the PR.</p>
</li>
<li><p class="first"><tt class="docutils literal">capsys</tt> and <tt class="docutils literal">capfd</tt> now have a <tt class="docutils literal">disabled()</tt> context-manager method, which
can be used to temporarily disable capture within a test.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p>
</li>
<li><p class="first">New cli flag <tt class="docutils literal"><span class="pre">--fixtures-per-test</span></tt>: shows which fixtures are being used
for each selected test item. Features doc strings of fixtures by default.
Can also show where fixtures are defined if combined with <tt class="docutils literal"><span class="pre">-v</span></tt>.
Thanks <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR.</p>
</li>
<li><p class="first">Introduce <tt class="docutils literal">pytest</tt> command as recommended entry point. Note that <tt class="docutils literal">py.test</tt>
still works and is not scheduled for removal. Closes proposal
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1629">#1629</a>. Thanks <a class="reference external" href="https://github.com/obestwalter">&#64;obestwalter</a> and <a class="reference external" href="https://github.com/davehunt">&#64;davehunt</a> for the complete PR
(<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1633">#1633</a>).</p>
</li>
<li><p class="first">New cli flags:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">--setup-plan</span></tt>: performs normal collection and reports
the potential setup and teardown and does not execute any fixtures and tests;</li>
<li><tt class="docutils literal"><span class="pre">--setup-only</span></tt>: performs normal collection, executes setup and teardown of
fixtures and reports them;</li>
<li><tt class="docutils literal"><span class="pre">--setup-show</span></tt>: performs normal test execution and additionally shows
setup and teardown of fixtures;</li>
<li><tt class="docutils literal"><span class="pre">--keep-duplicates</span></tt>: py.test now ignores duplicated paths given in the command
line. To retain the previous behavior where the same test could be run multiple
times by specifying it in the command-line multiple times, pass the <tt class="docutils literal"><span class="pre">--keep-duplicates</span></tt>
argument (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1609">#1609</a>);</li>
</ul>
<p>Thanks <a class="reference external" href="https://github.com/d6e">&#64;d6e</a>, <a class="reference external" href="https://github.com/kvas-it">&#64;kvas-it</a>, <a class="reference external" href="https://github.com/sallner">&#64;sallner</a>, <a class="reference external" href="https://github.com/ioggstream">&#64;ioggstream</a> and <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the PRs.</p>
</li>
<li><p class="first">New CLI flag <tt class="docutils literal"><span class="pre">--override-ini</span></tt>/<tt class="docutils literal"><span class="pre">-o</span></tt>: overrides values from the ini file.
For example: <tt class="docutils literal"><span class="pre">&quot;-o</span> xfail_strict=True&quot;</tt>'.
Thanks <a class="reference external" href="https://github.com/blueyed">&#64;blueyed</a> and <a class="reference external" href="https://github.com/fengxx">&#64;fengxx</a> for the PR.</p>
</li>
<li><p class="first">New hooks:</p>
<ul class="simple">
<li><tt class="docutils literal">pytest_fixture_setup(fixturedef, request)</tt>: executes fixture setup;</li>
<li><tt class="docutils literal">pytest_fixture_post_finalizer(fixturedef)</tt>: called after the fixture's
finalizer and has access to the fixture's result cache.</li>
</ul>
<p>Thanks <a class="reference external" href="https://github.com/d6e">&#64;d6e</a>, <a class="reference external" href="https://github.com/sallner">&#64;sallner</a>.</p>
</li>
<li><p class="first">Issue warnings for asserts whose test is a tuple literal. Such asserts will
never fail because tuples are always truthy and are usually a mistake
(see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1562">#1562</a>). Thanks <a class="reference external" href="https://github.com/kvas-it">&#64;kvas-it</a>, for the PR.</p>
</li>
<li><p class="first">Allow passing a custom debugger class (e.g. <tt class="docutils literal"><span class="pre">--pdbcls=IPython.core.debugger:Pdb</span></tt>).
Thanks to <a class="reference external" href="https://github.com/anntzer">&#64;anntzer</a> for the PR.</p>
</li>
</ul>
<p><strong>Changes</strong></p>
<ul class="simple">
<li>Plugins now benefit from assertion rewriting.  Thanks
<a class="reference external" href="https://github.com/sober7">&#64;sober7</a>, <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> and <a class="reference external" href="https://github.com/flub">&#64;flub</a> for the PR.</li>
<li>Change <tt class="docutils literal">report.outcome</tt> for <tt class="docutils literal">xpassed</tt> tests to <tt class="docutils literal">&quot;passed&quot;</tt> in non-strict
mode and <tt class="docutils literal">&quot;failed&quot;</tt> in strict mode. Thanks to <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR
(<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1795">#1795</a>) and <a class="reference external" href="https://github.com/gprasad84">&#64;gprasad84</a> for report (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1546">#1546</a>).</li>
<li>Tests marked with <tt class="docutils literal">xfail(strict=False)</tt> (the default) now appear in
JUnitXML reports as passing tests instead of skipped.
Thanks to <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1795">#1795</a>).</li>
<li>Highlight path of the file location in the error report to make it easier to copy/paste.
Thanks <a class="reference external" href="https://github.com/suzaku">&#64;suzaku</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1778">#1778</a>).</li>
<li>Fixtures marked with <tt class="docutils literal">&#64;pytest.fixture</tt> can now use <tt class="docutils literal">yield</tt> statements exactly like
those marked with the <tt class="docutils literal">&#64;pytest.yield_fixture</tt> decorator. This change renders
<tt class="docutils literal">&#64;pytest.yield_fixture</tt> deprecated and makes <tt class="docutils literal">&#64;pytest.fixture</tt> with <tt class="docutils literal">yield</tt> statements
the preferred way to write teardown code (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1461">#1461</a>).
Thanks <a class="reference external" href="https://github.com/csaftoiu">&#64;csaftoiu</a> for bringing this to attention and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Explicitly passed parametrize ids do not get escaped to ascii (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1351">#1351</a>).
Thanks <a class="reference external" href="https://github.com/ceridwen">&#64;ceridwen</a> for the PR.</li>
<li>Fixtures are now sorted in the error message displayed when an unknown
fixture is declared in a test function.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li><tt class="docutils literal">pytest_terminal_summary</tt> hook now receives the <tt class="docutils literal">exitstatus</tt>
of the test session as argument. Thanks <a class="reference external" href="https://github.com/blueyed">&#64;blueyed</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1809">#1809</a>).</li>
<li>Parametrize ids can accept <tt class="docutils literal">None</tt> as specific test id, in which case the
automatically generated id for that argument will be used.
Thanks <a class="reference external" href="https://github.com/palaviv">&#64;palaviv</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1468">#1468</a>).</li>
<li>The parameter to xunit-style setup/teardown methods (<tt class="docutils literal">setup_method</tt>,
<tt class="docutils literal">setup_module</tt>, etc.) is now optional and may be omitted.
Thanks <a class="reference external" href="https://github.com/okken">&#64;okken</a> for bringing this to attention and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Improved automatic id generation selection in case of duplicate ids in
parametrize.
Thanks <a class="reference external" href="https://github.com/palaviv">&#64;palaviv</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1474">#1474</a>).</li>
<li>Now pytest warnings summary is shown up by default. Added a new flag
<tt class="docutils literal"><span class="pre">--disable-pytest-warnings</span></tt> to explicitly disable the warnings summary (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1668">#1668</a>).</li>
<li>Make ImportError during collection more explicit by reminding
the user to check the name of the test module/package(s) (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1426">#1426</a>).
Thanks <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1520">#1520</a>).</li>
<li>Add <tt class="docutils literal">build/</tt> and <tt class="docutils literal">dist/</tt> to the default <tt class="docutils literal"><span class="pre">--norecursedirs</span></tt> list. Thanks
<a class="reference external" href="https://github.com/mikofski">&#64;mikofski</a> for the report and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1544">#1544</a>).</li>
<li><tt class="docutils literal">pytest.raises</tt> in the context manager form accepts a custom
<tt class="docutils literal">message</tt> to raise when no exception occurred.
Thanks <a class="reference external" href="https://github.com/palaviv">&#64;palaviv</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1616">#1616</a>).</li>
<li><tt class="docutils literal">conftest.py</tt> files now benefit from assertion rewriting; previously it
was only available for test modules. Thanks <a class="reference external" href="https://github.com/flub">&#64;flub</a>, <a class="reference external" href="https://github.com/sober7">&#64;sober7</a> and
<a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1619">#1619</a>).</li>
<li>Text documents without any doctests no longer appear as &quot;skipped&quot;.
Thanks <a class="reference external" href="https://github.com/graingert">&#64;graingert</a> for reporting and providing a full PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1580">#1580</a>).</li>
<li>Ensure that a module within a namespace package can be found when it
is specified on the command line together with the <tt class="docutils literal"><span class="pre">--pyargs</span></tt>
option.  Thanks to <a class="reference external" href="https://github.com/taschini">&#64;taschini</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1597">#1597</a>).</li>
<li>Always include full assertion explanation during assertion rewriting. The previous behaviour was hiding
sub-expressions that happened to be <tt class="docutils literal">False</tt>, assuming this was redundant information.
Thanks <a class="reference external" href="https://github.com/bagerard">&#64;bagerard</a> for reporting (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1503">#1503</a>). Thanks to <a class="reference external" href="https://github.com/davehunt">&#64;davehunt</a> and
<a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR.</li>
<li><tt class="docutils literal">OptionGroup.addoption()</tt> now checks if option names were already
added before, to make it easier to track down issues like <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1618">#1618</a>.
Before, you only got exceptions later from <tt class="docutils literal">argparse</tt> library,
giving no clue about the actual reason for double-added options.</li>
<li><tt class="docutils literal">yield</tt>-based tests are considered deprecated and will be removed in pytest-4.0.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li><tt class="docutils literal">[pytest]</tt> sections in <tt class="docutils literal">setup.cfg</tt> files should now be named <tt class="docutils literal">[tool:pytest]</tt>
to avoid conflicts with other distutils commands (see <a class="reference external" href="https://github.com/pytest-dev/pytest/pull/567">#567</a>). <tt class="docutils literal">[pytest]</tt> sections in
<tt class="docutils literal">pytest.ini</tt> or <tt class="docutils literal">tox.ini</tt> files are supported and unchanged.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Using <tt class="docutils literal">pytest_funcarg__</tt> prefix to declare fixtures is considered deprecated and will be
removed in pytest-4.0 (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1684">#1684</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Passing a command-line string to <tt class="docutils literal">pytest.main()</tt> is considered deprecated and scheduled
for removal in pytest-4.0. It is recommended to pass a list of arguments instead (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1723">#1723</a>).</li>
<li>Rename <tt class="docutils literal">getfuncargvalue</tt> to <tt class="docutils literal">getfixturevalue</tt>. <tt class="docutils literal">getfuncargvalue</tt> is
still present but is now considered deprecated. Thanks to <a class="reference external" href="https://github.com/RedBeardCode">&#64;RedBeardCode</a> and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a>
for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1626">#1626</a>).</li>
<li><tt class="docutils literal">optparse</tt> type usage now triggers DeprecationWarnings (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1740">#1740</a>).</li>
<li><tt class="docutils literal">optparse</tt> backward compatibility supports float/complex types (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/457">#457</a>).</li>
<li>Refined logic for determining the <tt class="docutils literal">rootdir</tt>, considering only valid
paths which fixes a number of issues: <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1594">#1594</a>, <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1435">#1435</a> and <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1471">#1471</a>.
Updated the documentation according to current behavior. Thanks to
<a class="reference external" href="https://github.com/blueyed">&#64;blueyed</a>, <a class="reference external" href="https://github.com/davehunt">&#64;davehunt</a> and <a class="reference external" href="https://github.com/matthiasha">&#64;matthiasha</a> for the PR.</li>
<li>Always include full assertion explanation. The previous behaviour was hiding
sub-expressions that happened to be False, assuming this was redundant information.
Thanks <a class="reference external" href="https://github.com/bagerard">&#64;bagerard</a> for reporting (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1503">#1503</a>). Thanks to <a class="reference external" href="https://github.com/davehunt">&#64;davehunt</a> and
<a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for PR.</li>
<li>Better message in case of not using parametrized variable (see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1539">#1539</a>).
Thanks to <a class="reference external" href="https://github.com/tramwaj29">&#64;tramwaj29</a> for the PR.</li>
<li>Updated docstrings with a more uniform style.</li>
<li>Add stderr write for <tt class="docutils literal">pytest.exit(msg)</tt> during startup. Previously the message was never shown.
Thanks <a class="reference external" href="https://github.com/BeyondEvil">&#64;BeyondEvil</a> for reporting <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1210">#1210</a>. Thanks to <a class="reference external" href="https://github.com/JonathonSonesen">&#64;JonathonSonesen</a> and
<a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR.</li>
<li>No longer display the incorrect test deselection reason (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1372">#1372</a>).
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;ronnypfannschmidt</a> for the PR.</li>
<li>The <tt class="docutils literal"><span class="pre">--resultlog</span></tt> command line option has been deprecated: it is little used
and there are more modern and better alternatives (see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/830">#830</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Improve error message with fixture lookup errors: add an 'E' to the first
line and '&gt;' to the rest. Fixes <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/717">#717</a>. Thanks <a class="reference external" href="https://github.com/blueyed">&#64;blueyed</a> for reporting and
a PR, <a class="reference external" href="https://github.com/eolo999">&#64;eolo999</a> for the initial PR and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for his guidance during
EuroPython2016 sprint.</li>
</ul>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li>Parametrize now correctly handles duplicated test ids.</li>
<li>Fix internal error issue when the <tt class="docutils literal">method</tt> argument is missing for
<tt class="docutils literal">teardown_method()</tt> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1605">#1605</a>).</li>
<li>Fix exception visualization in case the current working directory (CWD) gets
deleted during testing (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1235">#1235</a>). Thanks <a class="reference external" href="https://github.com/bukzor">&#64;bukzor</a> for reporting. PR by
<a class="reference external" href="https://github.com/marscher">&#64;marscher</a>.</li>
<li>Improve test output for logical expression with brackets (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/925">#925</a>).
Thanks <a class="reference external" href="https://github.com/DRMacIver">&#64;DRMacIver</a> for reporting and <a class="reference external" href="https://github.com/RedBeardCode">&#64;RedBeardCode</a> for the PR.</li>
<li>Create correct diff for strings ending with newlines (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1553">#1553</a>).
Thanks <a class="reference external" href="https://github.com/Vogtinator">&#64;Vogtinator</a> for reporting and <a class="reference external" href="https://github.com/RedBeardCode">&#64;RedBeardCode</a> and
<a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR.</li>
<li><tt class="docutils literal">ConftestImportFailure</tt> now shows the traceback making it easier to
identify bugs in <tt class="docutils literal">conftest.py</tt> files (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1516">#1516</a>). Thanks <a class="reference external" href="https://github.com/txomon">&#64;txomon</a> for
the PR.</li>
<li>Text documents without any doctests no longer appear as &quot;skipped&quot;.
Thanks <a class="reference external" href="https://github.com/graingert">&#64;graingert</a> for reporting and providing a full PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1580">#1580</a>).</li>
<li>Fixed collection of classes with custom <tt class="docutils literal">__new__</tt> method.
Fixes <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1579">#1579</a>. Thanks to <a class="reference external" href="https://github.com/Stranger6667">&#64;Stranger6667</a> for the PR.</li>
<li>Fixed scope overriding inside metafunc.parametrize (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/634">#634</a>).
Thanks to <a class="reference external" href="https://github.com/Stranger6667">&#64;Stranger6667</a> for the PR.</li>
<li>Fixed the total tests tally in junit xml output (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1798">#1798</a>).
Thanks to <a class="reference external" href="https://github.com/cryporchild">&#64;cryporchild</a> for the PR.</li>
<li>Fixed off-by-one error with lines from <tt class="docutils literal">request.node.warn</tt>.
Thanks to <a class="reference external" href="https://github.com/blueyed">&#64;blueyed</a> for the PR.</li>
</ul>
</div>
<div class="section" id="id651">
<h1>2.9.2 (2016-05-31)</h1>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li>fix <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/510">#510</a>: skip tests where one parameterize dimension was empty
thanks Alex Stapleton for the Report and <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR</li>
<li>Fix Xfail does not work with condition keyword argument.
Thanks <a class="reference external" href="https://github.com/astraw38">&#64;astraw38</a> for reporting the issue (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1496">#1496</a>) and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a>
for PR the (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1524">#1524</a>).</li>
<li>Fix win32 path issue when putting custom config file with absolute path
in <tt class="docutils literal"><span class="pre">pytest.main(&quot;-c</span> your_absolute_path&quot;)</tt>.</li>
<li>Fix maximum recursion depth detection when raised error class is not aware
of unicode/encoded bytes.
Thanks <a class="reference external" href="https://github.com/prusse-martin">&#64;prusse-martin</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1506">#1506</a>).</li>
<li>Fix <tt class="docutils literal">pytest.mark.skip</tt> mark when used in strict mode.
Thanks <a class="reference external" href="https://github.com/pquentin">&#64;pquentin</a> for the PR and <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for
showing how to fix the bug.</li>
<li>Minor improvements and fixes to the documentation.
Thanks <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the PR.</li>
<li>Fix <tt class="docutils literal"><span class="pre">--fixtures</span></tt> to show all fixture definitions as opposed to just
one per fixture name.
Thanks to <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR.</li>
</ul>
</div>
<div class="section" id="id656">
<h1>2.9.1 (2016-03-17)</h1>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li>Improve error message when a plugin fails to load.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1178">#1178</a>):
<tt class="docutils literal">pytest.fail</tt> with non-ascii characters raises an internal pytest error.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/469">#469</a>): junit parses report.nodeid incorrectly, when params IDs
contain <tt class="docutils literal">::</tt>. Thanks <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1431">#1431</a>).</li>
<li>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/578">#578</a>): SyntaxErrors
containing non-ascii lines at the point of failure generated an internal
py.test error.
Thanks <a class="reference external" href="https://github.com/asottile">&#64;asottile</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1437">#1437</a>): When passing in a bytestring regex pattern to parameterize
attempt to decode it as utf-8 ignoring errors.</li>
<li>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/649">#649</a>): parametrized test nodes cannot be specified to run on the command line.</li>
<li>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/138">#138</a>): better reporting for python 3.3+ chained exceptions</li>
</ul>
</div>
<div class="section" id="id664">
<h1>2.9.0 (2016-02-29)</h1>
<p><strong>New Features</strong></p>
<ul class="simple">
<li>New <tt class="docutils literal">pytest.mark.skip</tt> mark, which unconditionally skips marked tests.
Thanks <a class="reference external" href="https://github.com/MichaelAquilina">&#64;MichaelAquilina</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1040">#1040</a>).</li>
<li><tt class="docutils literal"><span class="pre">--doctest-glob</span></tt> may now be passed multiple times in the command-line.
Thanks <a class="reference external" href="https://github.com/jab">&#64;jab</a> and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>New <tt class="docutils literal"><span class="pre">-rp</span></tt> and <tt class="docutils literal"><span class="pre">-rP</span></tt> reporting options give the summary and full output
of passing tests, respectively. Thanks to <a class="reference external" href="https://github.com/codewarrior0">&#64;codewarrior0</a> for the PR.</li>
<li><tt class="docutils literal">pytest.mark.xfail</tt> now has a <tt class="docutils literal">strict</tt> option, which makes <tt class="docutils literal">XPASS</tt>
tests to fail the test suite (defaulting to <tt class="docutils literal">False</tt>). There's also a
<tt class="docutils literal">xfail_strict</tt> ini option that can be used to configure it project-wise.
Thanks <a class="reference external" href="https://github.com/rabbbit">&#64;rabbbit</a> for the request and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1355">#1355</a>).</li>
<li><tt class="docutils literal">Parser.addini</tt> now supports options of type <tt class="docutils literal">bool</tt>.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</li>
<li>New <tt class="docutils literal">ALLOW_BYTES</tt> doctest option. This strips <tt class="docutils literal">b</tt> prefixes from byte strings
in doctest output (similar to <tt class="docutils literal">ALLOW_UNICODE</tt>).
Thanks <a class="reference external" href="https://github.com/jaraco">&#64;jaraco</a> for the request and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1287">#1287</a>).</li>
<li>Give a hint on <tt class="docutils literal">KeyboardInterrupt</tt> to use the <tt class="docutils literal"><span class="pre">--fulltrace</span></tt> option to show the errors.
Fixes <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1366">#1366</a>.
Thanks to <a class="reference external" href="https://github.com/hpk42">&#64;hpk42</a> for the report and <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</li>
<li>Catch <tt class="docutils literal">IndexError</tt> exceptions when getting exception source location.
Fixes a pytest internal error for dynamically generated code (fixtures and tests)
where source lines are fake by intention.</li>
</ul>
<p><strong>Changes</strong></p>
<ul>
<li><p class="first"><strong>Important</strong>: <a class="reference external" href="https://pylib.readthedocs.io/en/latest/code.html">py.code</a> has been
merged into the <tt class="docutils literal">pytest</tt> repository as <tt class="docutils literal">pytest._code</tt>. This decision
was made because <tt class="docutils literal">py.code</tt> had very few uses outside <tt class="docutils literal">pytest</tt> and the
fact that it was in a different repository made it difficult to fix bugs on
its code in a timely manner. The team hopes with this to be able to better
refactor out and improve that code.
This change shouldn't affect users, but it is useful to let users aware
if they encounter any strange behavior.</p>
<p>Keep in mind that the code for <tt class="docutils literal">pytest._code</tt> is <strong>private</strong> and
<strong>experimental</strong>, so you definitely should not import it explicitly!</p>
<p>Please note that the original <tt class="docutils literal">py.code</tt> is still available in
<a class="reference external" href="https://pylib.readthedocs.io">pylib</a>.</p>
</li>
<li><p class="first"><tt class="docutils literal">pytest_enter_pdb</tt> now optionally receives the pytest config object.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p>
</li>
<li><p class="first">Removed code and documentation for Python 2.5 or lower versions,
including removal of the obsolete <tt class="docutils literal">_pytest.assertion.oldinterpret</tt> module.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1226">#1226</a>).</p>
</li>
<li><p class="first">Comparisons now always show up in full when <tt class="docutils literal">CI</tt> or <tt class="docutils literal">BUILD_NUMBER</tt> is
found in the environment, even when <tt class="docutils literal"><span class="pre">-vv</span></tt> isn't used.
Thanks <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the PR.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">--lf</span></tt> and <tt class="docutils literal"><span class="pre">--ff</span></tt> now support long names: <tt class="docutils literal"><span class="pre">--last-failed</span></tt> and
<tt class="docutils literal"><span class="pre">--failed-first</span></tt> respectively.
Thanks <a class="reference external" href="https://github.com/MichaelAquilina">&#64;MichaelAquilina</a> for the PR.</p>
</li>
<li><p class="first">Added expected exceptions to <tt class="docutils literal">pytest.raises</tt> fail message.</p>
</li>
<li><p class="first">Collection only displays progress (&quot;collecting X items&quot;) when in a terminal.
This avoids cluttering the output when using <tt class="docutils literal"><span class="pre">--color=yes</span></tt> to obtain
colors in CI integrations systems (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1397">#1397</a>).</p>
</li>
</ul>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">-s</span></tt> and <tt class="docutils literal"><span class="pre">-c</span></tt> options should now work under <tt class="docutils literal">xdist</tt>;
<tt class="docutils literal">Config.fromdictargs</tt> now represents its input much more faithfully.
Thanks to <a class="reference external" href="https://github.com/bukzor">&#64;bukzor</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/680">#680</a>).</li>
<li>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1290">#1290</a>): support Python 3.5's <tt class="docutils literal">&#64;</tt> operator in assertion rewriting.
Thanks <a class="reference external" href="https://github.com/Shinkenjoe">&#64;Shinkenjoe</a> for report with test case and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR.</li>
<li>Fix formatting utf-8 explanation messages (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1379">#1379</a>).
Thanks <a class="reference external" href="https://github.com/biern">&#64;biern</a> for the PR.</li>
<li>Fix <a class="reference external" href="https://pytest.org/latest/usage.html#modifying-python-traceback-printing">traceback style docs</a> to describe all of the available options
(auto/long/short/line/native/no), with <tt class="docutils literal">auto</tt> being the default since v2.6.
Thanks <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR.</li>
<li>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1422">#1422</a>): junit record_xml_property doesn't allow multiple records
with same name.</li>
</ul>
</div>
<div class="section" id="id676">
<h1>2.8.7 (2016-01-24)</h1>
<ul class="simple">
<li>fix #1338: use predictable object resolution for monkeypatch</li>
</ul>
</div>
<div class="section" id="id677">
<h1>2.8.6 (2016-01-21)</h1>
<ul class="simple">
<li>fix #1259: allow for double nodeids in junitxml,
this was a regression failing plugins combinations
like pytest-pep8 + pytest-flakes</li>
<li>Workaround for exception that occurs in pyreadline when using
<tt class="docutils literal"><span class="pre">--pdb</span></tt> with standard I/O capture enabled.
Thanks Erik M. Bray for the PR.</li>
<li>fix #900: Better error message in case the target of a <tt class="docutils literal">monkeypatch</tt> call
raises an <tt class="docutils literal">ImportError</tt>.</li>
<li>fix #1292: monkeypatch calls (setattr, setenv, etc.) are now O(1).
Thanks David R. MacIver for the report and Bruno Oliveira for the PR.</li>
<li>fix #1223: captured stdout and stderr are now properly displayed before
entering pdb when <tt class="docutils literal"><span class="pre">--pdb</span></tt> is used instead of being thrown away.
Thanks Cal Leeming for the PR.</li>
<li>fix #1305: pytest warnings emitted during <tt class="docutils literal">pytest_terminal_summary</tt> are now
properly displayed.
Thanks Ionel Maries Cristian for the report and Bruno Oliveira for the PR.</li>
<li>fix #628: fixed internal UnicodeDecodeError when doctests contain unicode.
Thanks Jason R. Coombs for the report and Bruno Oliveira for the PR.</li>
<li>fix #1334: Add captured stdout to jUnit XML report on setup error.
Thanks Georgy Dyuldin for the PR.</li>
</ul>
</div>
<div class="section" id="id678">
<h1>2.8.5 (2015-12-11)</h1>
<ul class="simple">
<li>fix #1243: fixed issue where class attributes injected during collection could break pytest.
PR by Alexei Kozlenok, thanks Ronny Pfannschmidt and Bruno Oliveira for the review and help.</li>
<li>fix #1074: precompute junitxml chunks instead of storing the whole tree in objects
Thanks Bruno Oliveira for the report and Ronny Pfannschmidt for the PR</li>
<li>fix #1238: fix <tt class="docutils literal">pytest.deprecated_call()</tt> receiving multiple arguments
(Regression introduced in 2.8.4). Thanks Alex Gaynor for the report and
Bruno Oliveira for the PR.</li>
</ul>
</div>
<div class="section" id="id679">
<h1>2.8.4 (2015-12-06)</h1>
<ul class="simple">
<li>fix #1190: <tt class="docutils literal">deprecated_call()</tt> now works when the deprecated
function has been already called by another test in the same
module. Thanks Mikhail Chernykh for the report and Bruno Oliveira for the
PR.</li>
<li>fix #1198: <tt class="docutils literal"><span class="pre">--pastebin</span></tt> option now works on Python 3. Thanks
Mehdy Khoshnoody for the PR.</li>
<li>fix #1219: <tt class="docutils literal"><span class="pre">--pastebin</span></tt> now works correctly when captured output contains
non-ascii characters. Thanks Bruno Oliveira for the PR.</li>
<li>fix #1204: another error when collecting with a nasty __getattr__().
Thanks Florian Bruhin for the PR.</li>
<li>fix the summary printed when no tests did run.
Thanks Florian Bruhin for the PR.</li>
<li>fix #1185 - ensure MANIFEST.in exactly matches what should go to a sdist</li>
<li>a number of documentation modernizations wrt good practices.
Thanks Bruno Oliveira for the PR.</li>
</ul>
</div>
<div class="section" id="id680">
<h1>2.8.3 (2015-11-18)</h1>
<ul class="simple">
<li>fix #1169: add __name__ attribute to testcases in TestCaseFunction to
support the &#64;unittest.skip decorator on functions and methods.
Thanks Lee Kamentsky for the PR.</li>
<li>fix #1035: collecting tests if test module level obj has __getattr__().
Thanks Suor for the report and Bruno Oliveira / Tom Viner for the PR.</li>
<li>fix #331: don't collect tests if their failure cannot be reported correctly
e.g. they are a callable instance of a class.</li>
<li>fix #1133: fixed internal error when filtering tracebacks where one entry
belongs to a file which is no longer available.
Thanks Bruno Oliveira for the PR.</li>
<li>enhancement made to highlight in red the name of the failing tests so
they stand out in the output.
Thanks Gabriel Reis for the PR.</li>
<li>add more talks to the documentation</li>
<li>extend documentation on the --ignore cli option</li>
<li>use pytest-runner for setuptools integration</li>
<li>minor fixes for interaction with OS X El Capitan
system integrity protection (thanks Florian)</li>
</ul>
</div>
<div class="section" id="id681">
<h1>2.8.2 (2015-10-07)</h1>
<ul class="simple">
<li>fix #1085: proper handling of encoding errors when passing encoded byte
strings to pytest.parametrize in Python 2.
Thanks Themanwithoutaplan for the report and Bruno Oliveira for the PR.</li>
<li>fix #1087: handling SystemError when passing empty byte strings to
pytest.parametrize in Python 3.
Thanks Paul Kehrer for the report and Bruno Oliveira for the PR.</li>
<li>fix #995: fixed internal error when filtering tracebacks where one entry
was generated by an exec() statement.
Thanks Daniel Hahler, Ashley C Straw, Philippe Gauthier and Pavel Savchenko
for contributing and Bruno Oliveira for the PR.</li>
<li>fix #1100 and #1057: errors when using autouse fixtures and doctest modules.
Thanks Sergey B Kirpichev and Vital Kudzelka for contributing and Bruno
Oliveira for the PR.</li>
</ul>
</div>
<div class="section" id="id682">
<h1>2.8.1 (2015-09-29)</h1>
<ul class="simple">
<li>fix #1034: Add missing nodeid on pytest_logwarning call in
addhook.  Thanks Simon Gomizelj for the PR.</li>
<li>'deprecated_call' is now only satisfied with a DeprecationWarning or
PendingDeprecationWarning. Before 2.8.0, it accepted any warning, and 2.8.0
made it accept only DeprecationWarning (but not PendingDeprecationWarning).
Thanks Alex Gaynor for the issue and Eric Hunsberger for the PR.</li>
<li>fix issue #1073: avoid calling __getattr__ on potential plugin objects.
This fixes an incompatibility with pytest-django.  Thanks Andreas Pelme,
Bruno Oliveira and Ronny Pfannschmidt for contributing and Holger Krekel
for the fix.</li>
<li>Fix issue #704: handle versionconflict during plugin loading more
gracefully.  Thanks Bruno Oliveira for the PR.</li>
<li>Fix issue #1064: &quot;&quot;--junitxml&quot; regression when used with the
&quot;pytest-xdist&quot; plugin, with test reports being assigned to the wrong tests.
Thanks Daniel Grunwald for the report and Bruno Oliveira for the PR.</li>
<li>(experimental) adapt more SEMVER style versioning and change meaning of
master branch in git repo: &quot;master&quot; branch now keeps the bugfixes, changes
aimed for micro releases.  &quot;features&quot; branch will only be released
with minor or major pytest releases.</li>
<li>Fix issue #766 by removing documentation references to distutils.
Thanks Russel Winder.</li>
<li>Fix issue #1030: now byte-strings are escaped to produce item node ids
to make them always serializable.
Thanks Andy Freeland for the report and Bruno Oliveira for the PR.</li>
<li>Python 2: if unicode parametrized values are convertible to ascii, their
ascii representation is used for the node id.</li>
<li>Fix issue #411: Add __eq__ method to assertion comparison example.
Thanks Ben Webb.</li>
<li>Fix issue #653: deprecated_call can be used as context manager.</li>
<li>fix issue 877: properly handle assertion explanations with non-ascii repr
Thanks Mathieu Agopian for the report and Ronny Pfannschmidt for the PR.</li>
<li>fix issue 1029: transform errors when writing cache values into pytest-warnings</li>
</ul>
</div>
<div class="section" id="id683">
<h1>2.8.0 (2015-09-18)</h1>
<ul>
<li><p class="first">new <tt class="docutils literal"><span class="pre">--lf</span></tt> and <tt class="docutils literal"><span class="pre">-ff</span></tt> options to run only the last failing tests or
&quot;failing tests first&quot; from the last run.  This functionality is provided
through porting the formerly external pytest-cache plugin into pytest core.
BACKWARD INCOMPAT: if you used pytest-cache's functionality to persist
data between test runs be aware that we don't serialize sets anymore.
Thanks Ronny Pfannschmidt for most of the merging work.</p>
</li>
<li><p class="first">&quot;-r&quot; option now accepts &quot;a&quot; to include all possible reports, similar
to passing &quot;fEsxXw&quot; explicitly (isse960).
Thanks Abhijeet Kasurde for the PR.</p>
</li>
<li><p class="first">avoid python3.5 deprecation warnings by introducing version
specific inspection helpers, thanks Michael Droettboom.</p>
</li>
<li><p class="first">fix issue562: &#64;nose.tools.istest now fully respected.</p>
</li>
<li><p class="first">fix issue934: when string comparison fails and a diff is too large to display
without passing -vv, still show a few lines of the diff.
Thanks Florian Bruhin for the report and Bruno Oliveira for the PR.</p>
</li>
<li><p class="first">fix issue736: Fix a bug where fixture params would be discarded when combined
with parametrization markers.
Thanks to Markus Unterwaditzer for the PR.</p>
</li>
<li><p class="first">fix issue710: introduce ALLOW_UNICODE doctest option: when enabled, the
<tt class="docutils literal">u</tt> prefix is stripped from unicode strings in expected doctest output. This
allows doctests which use unicode to run in Python 2 and 3 unchanged.
Thanks Jason R. Coombs for the report and Bruno Oliveira for the PR.</p>
</li>
<li><p class="first">parametrize now also generates meaningful test IDs for enum, regex and class
objects (as opposed to class instances).
Thanks to Florian Bruhin for the PR.</p>
</li>
<li><p class="first">Add 'warns' to assert that warnings are thrown (like 'raises').
Thanks to Eric Hunsberger for the PR.</p>
</li>
<li><p class="first">Fix issue683: Do not apply an already applied mark.  Thanks ojake for the PR.</p>
</li>
<li><p class="first">Deal with capturing failures better so fewer exceptions get lost to
/dev/null.  Thanks David Szotten for the PR.</p>
</li>
<li><p class="first">fix issue730: deprecate and warn about the --genscript option.
Thanks Ronny Pfannschmidt for the report and Christian Pommranz for the PR.</p>
</li>
<li><p class="first">fix issue751: multiple parametrize with ids bug if it parametrizes class with
two or more test methods. Thanks Sergey Chipiga for reporting and Jan
Bednarik for PR.</p>
</li>
<li><p class="first">fix issue82: avoid loading conftest files from setup.cfg/pytest.ini/tox.ini
files and upwards by default (--confcutdir can still be set to override this).
Thanks Bruno Oliveira for the PR.</p>
</li>
<li><p class="first">fix issue768: docstrings found in python modules were not setting up session
fixtures. Thanks Jason R. Coombs for reporting and Bruno Oliveira for the PR.</p>
</li>
<li><p class="first">added <tt class="docutils literal">tmpdir_factory</tt>, a session-scoped fixture that can be used to create
directories under the base temporary directory. Previously this object was
installed as a <tt class="docutils literal">_tmpdirhandler</tt> attribute of the <tt class="docutils literal">config</tt> object, but now it
is part of the official API and using <tt class="docutils literal">config._tmpdirhandler</tt> is
deprecated.
Thanks Bruno Oliveira for the PR.</p>
</li>
<li><p class="first">fix issue808: pytest's internal assertion rewrite hook now implements the
optional PEP302 get_data API so tests can access data files next to them.
Thanks xmo-odoo for request and example and Bruno Oliveira for
the PR.</p>
</li>
<li><p class="first">rootdir and inifile are now displayed during usage errors to help
users diagnose problems such as unexpected ini files which add
unknown options being picked up by pytest. Thanks to Pavel Savchenko for
bringing the problem to attention in #821 and Bruno Oliveira for the PR.</p>
</li>
<li><p class="first">Summary bar now is colored yellow for warning
situations such as: all tests either were skipped or xpass/xfailed,
or no tests were run at all (this is a partial fix for issue500).</p>
</li>
<li><p class="first">fix issue812: pytest now exits with status code 5 in situations where no
tests were run at all, such as the directory given in the command line does
not contain any tests or as result of a command line option filters
all out all tests (-k for example).
Thanks Eric Siegerman (issue812) and Bruno Oliveira for the PR.</p>
</li>
<li><p class="first">Summary bar now is colored yellow for warning
situations such as: all tests either were skipped or xpass/xfailed,
or no tests were run at all (related to issue500).
Thanks Eric Siegerman.</p>
</li>
<li><p class="first">New <tt class="docutils literal">testpaths</tt> ini option: list of directories to search for tests
when executing pytest from the root directory. This can be used
to speed up test collection when a project has well specified directories
for tests, being usually more practical than configuring norecursedirs for
all directories that do not contain tests.
Thanks to Adrian for idea (#694) and Bruno Oliveira for the PR.</p>
</li>
<li><p class="first">fix issue713: JUnit XML reports for doctest failures.
Thanks Punyashloka Biswal.</p>
</li>
<li><p class="first">fix issue970: internal pytest warnings now appear as &quot;pytest-warnings&quot; in
the terminal instead of &quot;warnings&quot;, so it is clear for users that those
warnings are from pytest and not from the builtin &quot;warnings&quot; module.
Thanks Bruno Oliveira.</p>
</li>
<li><p class="first">Include setup and teardown in junitxml test durations.
Thanks Janne Vanhala.</p>
</li>
<li><p class="first">fix issue735: assertion failures on debug versions of Python 3.4+</p>
</li>
<li><p class="first">new option <tt class="docutils literal"><span class="pre">--import-mode</span></tt> to allow to change test module importing
behaviour to append to sys.path instead of prepending.  This better allows
to run test modules against installed versions of a package even if the
package under test has the same import root.  In this example:</p>
<pre class="literal-block">
testing/__init__.py
testing/test_pkg_under_test.py
pkg_under_test/
</pre>
<p>the tests will run against the installed version
of pkg_under_test when <tt class="docutils literal"><span class="pre">--import-mode=append</span></tt> is used whereas
by default they would always pick up the local version.  Thanks Holger Krekel.</p>
</li>
<li><p class="first">pytester: add method <tt class="docutils literal">TmpTestdir.delete_loaded_modules()</tt>, and call it
from <tt class="docutils literal">inline_run()</tt> to allow temporary modules to be reloaded.
Thanks Eduardo Schettino.</p>
</li>
<li><p class="first">internally refactor pluginmanager API and code so that there
is a clear distinction between a pytest-agnostic rather simple
pluginmanager and the PytestPluginManager which adds a lot of
behaviour, among it handling of the local conftest files.
In terms of documented methods this is a backward compatible
change but it might still break 3rd party plugins which relied on
details like especially the pluginmanager.add_shutdown() API.
Thanks Holger Krekel.</p>
</li>
<li><p class="first">pluginmanagement: introduce <tt class="docutils literal">pytest.hookimpl</tt> and
<tt class="docutils literal">pytest.hookspec</tt> decorators for setting impl/spec
specific parameters.  This substitutes the previous
now deprecated use of <tt class="docutils literal">pytest.mark</tt> which is meant to
contain markers for test functions only.</p>
</li>
<li><p class="first">write/refine docs for &quot;writing plugins&quot; which now have their
own page and are separate from the &quot;using/installing plugins`` page.</p>
</li>
<li><p class="first">fix issue732: properly unregister plugins from any hook calling
sites allowing to have temporary plugins during test execution.</p>
</li>
<li><p class="first">deprecate and warn about <tt class="docutils literal">__multicall__</tt> argument in hook
implementations.  Use the <tt class="docutils literal">hookwrapper</tt> mechanism instead already
introduced with pytest-2.7.</p>
</li>
<li><p class="first">speed up pytest's own test suite considerably by using inprocess
tests by default (testrun can be modified with --runpytest=subprocess
to create subprocesses in many places instead).  The main
APIs to run pytest in a test is &quot;runpytest()&quot; or &quot;runpytest_subprocess&quot;
and &quot;runpytest_inprocess&quot; if you need a particular way of running
the test.  In all cases you get back a RunResult but the inprocess
one will also have a &quot;reprec&quot; attribute with the recorded events/reports.</p>
</li>
<li><p class="first">fix monkeypatch.setattr(&quot;x.y&quot;, raising=False) to actually not raise
if &quot;y&quot; is not a pre-existing attribute. Thanks Florian Bruhin.</p>
</li>
<li><p class="first">fix issue741: make running output from testdir.run copy/pasteable
Thanks Bruno Oliveira.</p>
</li>
<li><p class="first">add a new <tt class="docutils literal"><span class="pre">--noconftest</span></tt> argument which ignores all <tt class="docutils literal">conftest.py</tt> files.</p>
</li>
<li><p class="first">add <tt class="docutils literal">file</tt> and <tt class="docutils literal">line</tt> attributes to JUnit-XML output.</p>
</li>
<li><p class="first">fix issue890: changed extension of all documentation files from <tt class="docutils literal">txt</tt> to
<tt class="docutils literal">rst</tt>. Thanks to Abhijeet for the PR.</p>
</li>
<li><p class="first">fix issue714: add ability to apply indirect=True parameter on particular argnames.
Thanks Elizaveta239.</p>
</li>
<li><p class="first">fix issue890: changed extension of all documentation files from <tt class="docutils literal">txt</tt> to
<tt class="docutils literal">rst</tt>. Thanks to Abhijeet for the PR.</p>
</li>
<li><p class="first">fix issue957: &quot;# doctest: SKIP&quot; option will now register doctests as SKIPPED
rather than PASSED.
Thanks Thomas Grainger for the report and Bruno Oliveira for the PR.</p>
</li>
<li><p class="first">issue951: add new record_xml_property fixture, that supports logging
additional information on xml output. Thanks David Diaz for the PR.</p>
</li>
<li><p class="first">issue949: paths after normal options (for example <tt class="docutils literal"><span class="pre">-s</span></tt>, <tt class="docutils literal"><span class="pre">-v</span></tt>, etc) are now
properly used to discover <tt class="docutils literal">rootdir</tt> and <tt class="docutils literal">ini</tt> files.
Thanks Peter Lauri for the report and Bruno Oliveira for the PR.</p>
</li>
</ul>
</div>
<div class="section" id="id684">
<h1>2.7.3 (2015-09-15)</h1>
<ul class="simple">
<li>Allow 'dev', 'rc', or other non-integer version strings in <tt class="docutils literal">importorskip</tt>.
Thanks to Eric Hunsberger for the PR.</li>
<li>fix issue856: consider --color parameter in all outputs (for example
--fixtures). Thanks Barney Gale for the report and Bruno Oliveira for the PR.</li>
<li>fix issue855: passing str objects as <tt class="docutils literal">plugins</tt> argument to pytest.main
is now interpreted as a module name to be imported and registered as a
plugin, instead of silently having no effect.
Thanks xmo-odoo for the report and Bruno Oliveira for the PR.</li>
<li>fix issue744: fix for ast.Call changes in Python 3.5+.  Thanks
Guido van Rossum, Matthias Bussonnier, Stefan Zimmermann and
Thomas Kluyver.</li>
<li>fix issue842: applying markers in classes no longer propagate this markers
to superclasses which also have markers.
Thanks xmo-odoo for the report and Bruno Oliveira for the PR.</li>
<li>preserve warning functions after call to pytest.deprecated_call. Thanks
Pieter Mulder for PR.</li>
<li>fix issue854: autouse yield_fixtures defined as class members of
unittest.TestCase subclasses now work as expected.
Thannks xmo-odoo for the report and Bruno Oliveira for the PR.</li>
<li>fix issue833: --fixtures now shows all fixtures of collected test files, instead of just the
fixtures declared on the first one.
Thanks Florian Bruhin for reporting and Bruno Oliveira for the PR.</li>
<li>fix issue863: skipped tests now report the correct reason when a skip/xfail
condition is met when using multiple markers.
Thanks Raphael Pierzina for reporting and Bruno Oliveira for the PR.</li>
<li>optimized tmpdir fixture initialization, which should make test sessions
faster (specially when using pytest-xdist). The only visible effect
is that now pytest uses a subdirectory in the $TEMP directory for all
directories created by this fixture (defaults to $TEMP/pytest-$USER).
Thanks Bruno Oliveira for the PR.</li>
</ul>
</div>
<div class="section" id="id685">
<h1>2.7.2 (2015-06-23)</h1>
<ul class="simple">
<li>fix issue767: pytest.raises value attribute does not contain the exception
instance on Python 2.6. Thanks Eric Siegerman for providing the test
case and Bruno Oliveira for PR.</li>
<li>Automatically create directory for junitxml and results log.
Thanks Aron Curzon.</li>
<li>fix issue713: JUnit XML reports for doctest failures.
Thanks Punyashloka Biswal.</li>
<li>fix issue735: assertion failures on debug versions of Python 3.4+
Thanks Benjamin Peterson.</li>
<li>fix issue114: skipif marker reports to internal skipping plugin;
Thanks Floris Bruynooghe for reporting and Bruno Oliveira for the PR.</li>
<li>fix issue748: unittest.SkipTest reports to internal pytest unittest plugin.
Thanks Thomas De Schampheleire for reporting and Bruno Oliveira for the PR.</li>
<li>fix issue718: failed to create representation of sets containing unsortable
elements in python 2. Thanks Edison Gustavo Muenz.</li>
<li>fix issue756, fix issue752 (and similar issues): depend on py-1.4.29
which has a refined algorithm for traceback generation.</li>
</ul>
</div>
<div class="section" id="id686">
<h1>2.7.1 (2015-05-19)</h1>
<ul class="simple">
<li>fix issue731: do not get confused by the braces which may be present
and unbalanced in an object's repr while collapsing False
explanations.  Thanks Carl Meyer for the report and test case.</li>
<li>fix issue553: properly handling inspect.getsourcelines failures in
FixtureLookupError which would lead to an internal error,
obfuscating the original problem. Thanks talljosh for initial
diagnose/patch and Bruno Oliveira for final patch.</li>
<li>fix issue660: properly report scope-mismatch-access errors
independently from ordering of fixture arguments.  Also
avoid the pytest internal traceback which does not provide
information to the user. Thanks Holger Krekel.</li>
<li>streamlined and documented release process.  Also all versions
(in setup.py and documentation generation) are now read
from _pytest/__init__.py. Thanks Holger Krekel.</li>
<li>fixed docs to remove the notion that yield-fixtures are experimental.
They are here to stay :)  Thanks Bruno Oliveira.</li>
<li>Support building wheels by using environment markers for the
requirements.  Thanks Ionel Maries Cristian.</li>
<li>fixed regression to 2.6.4 which surfaced e.g. in lost stdout capture printing
when tests raised SystemExit. Thanks Holger Krekel.</li>
<li>reintroduced _pytest fixture of the pytester plugin which is used
at least by pytest-xdist.</li>
</ul>
</div>
<div class="section" id="id687">
<h1>2.7.0 (2015-03-26)</h1>
<ul class="simple">
<li>fix issue435: make reload() work when assert rewriting is active.
Thanks Daniel Hahler.</li>
<li>fix issue616: conftest.py files and their contained fixutres are now
properly considered for visibility, independently from the exact
current working directory and test arguments that are used.
Many thanks to Eric Siegerman and his PR235 which contains
systematic tests for conftest visibility and now passes.
This change also introduces the concept of a <tt class="docutils literal">rootdir</tt> which
is printed as a new pytest header and documented in the pytest
customize web page.</li>
<li>change reporting of &quot;diverted&quot; tests, i.e. tests that are collected
in one file but actually come from another (e.g. when tests in a test class
come from a base class in a different file).  We now show the nodeid
and indicate via a postfix the other file.</li>
<li>add ability to set command line options by environment variable PYTEST_ADDOPTS.</li>
<li>added documentation on the new pytest-dev teams on bitbucket and
github.  See <a class="reference external" href="https://pytest.org/latest/contributing.html">https://pytest.org/latest/contributing.html</a> .
Thanks to Anatoly for pushing and initial work on this.</li>
<li>fix issue650: new option <tt class="docutils literal"><span class="pre">--docttest-ignore-import-errors</span></tt> which
will turn import errors in doctests into skips.  Thanks Charles Cloud
for the complete PR.</li>
<li>fix issue655: work around different ways that cause python2/3
to leak sys.exc_info into fixtures/tests causing failures in 3rd party code</li>
<li>fix issue615: assertion rewriting did not correctly escape % signs
when formatting boolean operations, which tripped over mixing
booleans with modulo operators.  Thanks to Tom Viner for the report,
triaging and fix.</li>
<li>implement issue351: add ability to specify parametrize ids as a callable
to generate custom test ids.  Thanks Brianna Laugher for the idea and
implementation.</li>
<li>introduce and document new hookwrapper mechanism useful for plugins
which want to wrap the execution of certain hooks for their purposes.
This supersedes the undocumented <tt class="docutils literal">__multicall__</tt> protocol which
pytest itself and some external plugins use.  Note that pytest-2.8
is scheduled to drop supporting the old <tt class="docutils literal">__multicall__</tt>
and only support the hookwrapper protocol.</li>
<li>majorly speed up invocation of plugin hooks</li>
<li>use hookwrapper mechanism in builtin pytest plugins.</li>
<li>add a doctest ini option for doctest flags, thanks Holger Peters.</li>
<li>add note to docs that if you want to mark a parameter and the
parameter is a callable, you also need to pass in a reason to disambiguate
it from the &quot;decorator&quot; case.  Thanks Tom Viner.</li>
<li>&quot;python_classes&quot; and &quot;python_functions&quot; options now support glob-patterns
for test discovery, as discussed in issue600. Thanks Ldiary Translations.</li>
<li>allow to override parametrized fixtures with non-parametrized ones and vice versa (bubenkoff).</li>
<li>fix issue463: raise specific error for 'parameterize' misspelling (pfctdayelise).</li>
<li>On failure, the <tt class="docutils literal">sys.last_value</tt>, <tt class="docutils literal">sys.last_type</tt> and
<tt class="docutils literal">sys.last_traceback</tt> are set, so that a user can inspect the error
via postmortem debugging (almarklein).</li>
</ul>
</div>
<div class="section" id="id688">
<h1>2.6.4 (2014-10-24)</h1>
<ul class="simple">
<li>Improve assertion failure reporting on iterables, by using ndiff and
pprint.</li>
<li>removed outdated japanese docs from source tree.</li>
<li>docs for &quot;pytest_addhooks&quot; hook.  Thanks Bruno Oliveira.</li>
<li>updated plugin index docs.  Thanks Bruno Oliveira.</li>
<li>fix issue557: with &quot;-k&quot; we only allow the old style &quot;-&quot; for negation
at the beginning of strings and even that is deprecated.  Use &quot;not&quot; instead.
This should allow to pick parametrized tests where &quot;-&quot; appeared in the parameter.</li>
<li>fix issue604: Escape % character in the assertion message.</li>
<li>fix issue620: add explanation in the --genscript target about what
the binary blob means. Thanks Dinu Gherman.</li>
<li>fix issue614: fixed pastebin support.</li>
<li>fix issue620: add explanation in the --genscript target about what
the binary blob means. Thanks Dinu Gherman.</li>
<li>fix issue614: fixed pastebin support.</li>
</ul>
</div>
<div class="section" id="id689">
<h1>2.6.3 (2014-09-24)</h1>
<ul class="simple">
<li>fix issue575: xunit-xml was reporting collection errors as failures
instead of errors, thanks Oleg Sinyavskiy.</li>
<li>fix issue582: fix setuptools example, thanks Laszlo Papp and Ronny
Pfannschmidt.</li>
<li>Fix infinite recursion bug when pickling capture.EncodedFile, thanks
Uwe Schmitt.</li>
<li>fix issue589: fix bad interaction with numpy and others when showing
exceptions.  Check for precise &quot;maximum recursion depth exceed&quot; exception
instead of presuming any RuntimeError is that one (implemented in py
dep).  Thanks Charles Cloud for analysing the issue.</li>
<li>fix conftest related fixture visibility issue: when running with a
CWD outside of a test package pytest would get fixture discovery wrong.
Thanks to Wolfgang Schnerring for figuring out a reproducible example.</li>
<li>Introduce pytest_enter_pdb hook (needed e.g. by pytest_timeout to cancel the
timeout when interactively entering pdb).  Thanks Wolfgang Schnerring.</li>
<li>check xfail/skip also with non-python function test items. Thanks
Floris Bruynooghe.</li>
</ul>
</div>
<div class="section" id="id690">
<h1>2.6.2 (2014-09-05)</h1>
<ul class="simple">
<li>Added function pytest.freeze_includes(), which makes it easy to embed
pytest into executables using tools like cx_freeze.
See docs for examples and rationale. Thanks Bruno Oliveira.</li>
<li>Improve assertion rewriting cache invalidation precision.</li>
<li>fixed issue561: adapt autouse fixture example for python3.</li>
<li>fixed issue453: assertion rewriting issue with __repr__ containing
&quot;n{&quot;, &quot;n}&quot; and &quot;n~&quot;.</li>
<li>fix issue560: correctly display code if an &quot;else:&quot; or &quot;finally:&quot; is
followed by statements on the same line.</li>
<li>Fix example in monkeypatch documentation, thanks t-8ch.</li>
<li>fix issue572: correct tmpdir doc example for python3.</li>
<li>Do not mark as universal wheel because Python 2.6 is different from
other builds due to the extra argparse dependency.  Fixes issue566.
Thanks sontek.</li>
<li>Implement issue549: user-provided assertion messages now no longer
replace the py.test introspection message but are shown in addition
to them.</li>
</ul>
</div>
<div class="section" id="id691">
<h1>2.6.1 (2014-08-07)</h1>
<ul class="simple">
<li>No longer show line numbers in the --verbose output, the output is now
purely the nodeid.  The line number is still shown in failure reports.
Thanks Floris Bruynooghe.</li>
<li>fix issue437 where assertion rewriting could cause pytest-xdist slaves
to collect different tests. Thanks Bruno Oliveira.</li>
<li>fix issue555: add &quot;errors&quot; attribute to capture-streams to satisfy
some distutils and possibly other code accessing sys.stdout.errors.</li>
<li>fix issue547 capsys/capfd also work when output capturing (&quot;-s&quot;) is disabled.</li>
<li>address issue170: allow pytest.mark.xfail(...) to specify expected exceptions via
an optional &quot;raises=EXC&quot; argument where EXC can be a single exception
or a tuple of exception classes.  Thanks David Mohr for the complete
PR.</li>
<li>fix integration of pytest with unittest.mock.patch decorator when
it uses the &quot;new&quot; argument.  Thanks Nicolas Delaby for test and PR.</li>
<li>fix issue with detecting conftest files if the arguments contain
&quot;::&quot; node id specifications (copy pasted from &quot;-v&quot; output)</li>
<li>fix issue544 by only removing &quot;&#64;NUM&quot; at the end of &quot;::&quot; separated parts
and if the part has a &quot;.py&quot; extension</li>
<li>don't use py.std import helper, rather import things directly.
Thanks Bruno Oliveira.</li>
</ul>
</div>
<div class="section" id="id692">
<h1>2.6</h1>
<ul class="simple">
<li>Cache exceptions from fixtures according to their scope (issue 467).</li>
<li>fix issue537: Avoid importing old assertion reinterpretation code by default.</li>
<li>fix issue364: shorten and enhance tracebacks representation by default.
The new &quot;--tb=auto&quot; option (default) will only display long tracebacks
for the first and last entry.  You can get the old behaviour of printing
all entries as long entries with &quot;--tb=long&quot;.  Also short entries by
default are now printed very similarly to &quot;--tb=native&quot; ones.</li>
<li>fix issue514: teach assertion reinterpretation about private class attributes</li>
<li>change -v output to include full node IDs of tests.  Users can copy
a node ID from a test run, including line number, and use it as a
positional argument in order to run only a single test.</li>
<li>fix issue 475: fail early and comprehensible if calling
pytest.raises with wrong exception type.</li>
<li>fix issue516: tell in getting-started about current dependencies.</li>
<li>cleanup setup.py a bit and specify supported versions. Thanks Jurko
Gospodnetic for the PR.</li>
<li>change XPASS colour to yellow rather then red when tests are run
with -v.</li>
<li>fix issue473: work around mock putting an unbound method into a class
dict when double-patching.</li>
<li>fix issue498: if a fixture finalizer fails, make sure that
the fixture is still invalidated.</li>
<li>fix issue453: the result of the pytest_assertrepr_compare hook now gets
it's newlines escaped so that format_exception does not blow up.</li>
<li>internal new warning system: pytest will now produce warnings when
it detects oddities in your test collection or execution.
Warnings are ultimately sent to a new pytest_logwarning hook which is
currently only implemented by the terminal plugin which displays
warnings in the summary line and shows more details when -rw (report on
warnings) is specified.</li>
<li>change skips into warnings for test classes with an __init__ and
callables in test modules which look like a test but are not functions.</li>
<li>fix issue436: improved finding of initial conftest files from command
line arguments by using the result of parse_known_args rather than
the previous flaky heuristics.  Thanks Marc Abramowitz for tests
and initial fixing approaches in this area.</li>
<li>fix issue #479: properly handle nose/unittest(2) SkipTest exceptions
during collection/loading of test modules.  Thanks to Marc Schlaich
for the complete PR.</li>
<li>fix issue490: include pytest_load_initial_conftests in documentation
and improve docstring.</li>
<li>fix issue472: clarify that <tt class="docutils literal">pytest.config.getvalue()</tt> cannot work
if it's triggered ahead of command line parsing.</li>
<li>merge PR123: improved integration with mock.patch decorator on tests.</li>
<li>fix issue412: messing with stdout/stderr FD-level streams is now
captured without crashes.</li>
<li>fix issue483: trial/py33 works now properly.  Thanks Daniel Grana for PR.</li>
<li>improve example for pytest integration with &quot;python setup.py test&quot;
which now has a generic &quot;-a&quot; or &quot;--pytest-args&quot; option where you
can pass additional options as a quoted string.  Thanks Trevor Bekolay.</li>
<li>simplified internal capturing mechanism and made it more robust
against tests or setups changing FD1/FD2, also better integrated
now with pytest.pdb() in single tests.</li>
<li>improvements to pytest's own test-suite leakage detection, courtesy of PRs
from Marc Abramowitz</li>
<li>fix issue492: avoid leak in test_writeorg.  Thanks Marc Abramowitz.</li>
<li>fix issue493: don't run tests in doc directory with <tt class="docutils literal">python setup.py test</tt>
(use tox -e doctesting for that)</li>
<li>fix issue486: better reporting and handling of early conftest loading failures</li>
<li>some cleanup and simplification of internal conftest handling.</li>
<li>work a bit harder to break reference cycles when catching exceptions.
Thanks Jurko Gospodnetic.</li>
<li>fix issue443: fix skip examples to use proper comparison.  Thanks Alex
Groenholm.</li>
<li>support nose-style <tt class="docutils literal">__test__</tt> attribute on modules, classes and
functions, including unittest-style Classes.  If set to False, the
test will not be collected.</li>
<li>fix issue512: show &quot;&lt;notset&gt;&quot; for arguments which might not be set
in monkeypatch plugin.  Improves output in documentation.</li>
</ul>
</div>
<div class="section" id="id693">
<h1>2.5.2 (2014-01-29)</h1>
<ul class="simple">
<li>fix issue409 -- better interoperate with cx_freeze by not
trying to import from collections.abc which causes problems
for py27/cx_freeze.  Thanks Wolfgang L. for reporting and tracking it down.</li>
<li>fixed docs and code to use &quot;pytest&quot; instead of &quot;py.test&quot; almost everywhere.
Thanks Jurko Gospodnetic for the complete PR.</li>
<li>fix issue425: mention at end of &quot;py.test -h&quot; that --markers
and --fixtures work according to specified test path (or current dir)</li>
<li>fix issue413: exceptions with unicode attributes are now printed
correctly also on python2 and with pytest-xdist runs. (the fix
requires py-1.4.20)</li>
<li>copy, cleanup and integrate py.io capture
from pylib 1.4.20.dev2 (rev 13d9af95547e)</li>
<li>address issue416: clarify docs as to conftest.py loading semantics</li>
<li>fix issue429: comparing byte strings with non-ascii chars in assert
expressions now work better.  Thanks Floris Bruynooghe.</li>
<li>make capfd/capsys.capture private, its unused and shouldn't be exposed</li>
</ul>
</div>
<div class="section" id="id694">
<h1>2.5.1 (2013-12-17)</h1>
<ul class="simple">
<li>merge new documentation styling PR from Tobias Bieniek.</li>
<li>fix issue403: allow parametrize of multiple same-name functions within
a collection node.  Thanks Andreas Kloeckner and Alex Gaynor for reporting
and analysis.</li>
<li>Allow parameterized fixtures to specify the ID of the parameters by
adding an ids argument to pytest.fixture() and pytest.yield_fixture().
Thanks Floris Bruynooghe.</li>
<li>fix issue404 by always using the binary xml escape in the junitxml
plugin.  Thanks Ronny Pfannschmidt.</li>
<li>fix issue407: fix addoption docstring to point to argparse instead of
optparse. Thanks Daniel D. Wright.</li>
</ul>
</div>
<div class="section" id="id695">
<h1>2.5.0 (2013-12-12)</h1>
<ul>
<li><p class="first">dropped python2.5 from automated release testing of pytest itself
which means it's probably going to break soon (but still works
with this release we believe).</p>
</li>
<li><p class="first">simplified and fixed implementation for calling finalizers when
parametrized fixtures or function arguments are involved.  finalization
is now performed lazily at setup time instead of in the &quot;teardown phase&quot;.
While this might sound odd at first, it helps to ensure that we are
correctly handling setup/teardown even in complex code.  User-level code
should not be affected unless it's implementing the pytest_runtest_teardown
hook and expecting certain fixture instances are torn down within (very
unlikely and would have been unreliable anyway).</p>
</li>
<li><p class="first">PR90: add --color=yes|no|auto option to force terminal coloring
mode (&quot;auto&quot; is default).  Thanks Marc Abramowitz.</p>
</li>
<li><p class="first">fix issue319 - correctly show unicode in assertion errors.  Many
thanks to Floris Bruynooghe for the complete PR.  Also means
we depend on py&gt;=1.4.19 now.</p>
</li>
<li><p class="first">fix issue396 - correctly sort and finalize class-scoped parametrized
tests independently from number of methods on the class.</p>
</li>
<li><p class="first">refix issue323 in a better way -- parametrization should now never
cause Runtime Recursion errors because the underlying algorithm
for re-ordering tests per-scope/per-fixture is not recursive
anymore (it was tail-call recursive before which could lead
to problems for more than &gt;966 non-function scoped parameters).</p>
</li>
<li><p class="first">fix issue290 - there is preliminary support now for parametrizing
with repeated same values (sometimes useful to test if calling
a second time works as with the first time).</p>
</li>
<li><p class="first">close issue240 - document precisely how pytest module importing
works, discuss the two common test directory layouts, and how it
interacts with PEP420-namespace packages.</p>
</li>
<li><p class="first">fix issue246 fix finalizer order to be LIFO on independent fixtures
depending on a parametrized higher-than-function scoped fixture.
(was quite some effort so please bear with the complexity of this sentence :)
Thanks Ralph Schmitt for the precise failure example.</p>
</li>
<li><p class="first">fix issue244 by implementing special index for parameters to only use
indices for paramentrized test ids</p>
</li>
<li><p class="first">fix issue287 by running all finalizers but saving the exception
from the first failing finalizer and re-raising it so teardown will
still have failed.  We reraise the first failing exception because
it might be the cause for other finalizers to fail.</p>
</li>
<li><p class="first">fix ordering when mock.patch or other standard decorator-wrappings
are used with test methods.  This fixues issue346 and should
help with random &quot;xdist&quot; collection failures.  Thanks to
Ronny Pfannschmidt and Donald Stufft for helping to isolate it.</p>
</li>
<li><p class="first">fix issue357 - special case &quot;-k&quot; expressions to allow for
filtering with simple strings that are not valid python expressions.
Examples: &quot;-k 1.3&quot; matches all tests parametrized with 1.3.
&quot;-k None&quot; filters all tests that have &quot;None&quot; in their name
and conversely &quot;-k 'not None'&quot;.
Previously these examples would raise syntax errors.</p>
</li>
<li><p class="first">fix issue384 by removing the trial support code
since the unittest compat enhancements allow
trial to handle it on its own</p>
</li>
<li><p class="first">don't hide an ImportError when importing a plugin produces one.
fixes issue375.</p>
</li>
<li><p class="first">fix issue275 - allow usefixtures and autouse fixtures
for running doctest text files.</p>
</li>
<li><p class="first">fix issue380 by making --resultlog only rely on longrepr instead
of the &quot;reprcrash&quot; attribute which only exists sometimes.</p>
</li>
<li><p class="first">address issue122: allow &#64;pytest.fixture(params=iterator) by exploding
into a list early on.</p>
</li>
<li><p class="first">fix pexpect-3.0 compatibility for pytest's own tests.
(fixes issue386)</p>
</li>
<li><p class="first">allow nested parametrize-value markers, thanks James Lan for the PR.</p>
</li>
<li><p class="first">fix unicode handling with new monkeypatch.setattr(import_path, value)
API.  Thanks Rob Dennis.  Fixes issue371.</p>
</li>
<li><p class="first">fix unicode handling with junitxml, fixes issue368.</p>
</li>
<li><p class="first">In assertion rewriting mode on Python 2, fix the detection of coding
cookies. See issue #330.</p>
</li>
<li><p class="first">make &quot;--runxfail&quot; turn imperative pytest.xfail calls into no ops
(it already did neutralize pytest.mark.xfail markers)</p>
</li>
<li><p class="first">refine pytest / pkg_resources interactions: The AssertionRewritingHook
PEP302 compliant loader now registers itself with setuptools/pkg_resources
properly so that the pkg_resources.resource_stream method works properly.
Fixes issue366.  Thanks for the investigations and full PR to Jason R. Coombs.</p>
</li>
<li><p class="first">pytestconfig fixture is now session-scoped as it is the same object during the
whole test run.  Fixes issue370.</p>
</li>
<li><p class="first">avoid one surprising case of marker malfunction/confusion:</p>
<pre class="literal-block">
&#64;pytest.mark.some(lambda arg: ...)
def test_function():
</pre>
<p>would not work correctly because pytest assumes &#64;pytest.mark.some
gets a function to be decorated already.  We now at least detect if this
arg is a lambda and thus the example will work.  Thanks Alex Gaynor
for bringing it up.</p>
</li>
<li><p class="first">xfail a test on pypy that checks wrong encoding/ascii (pypy does
not error out). fixes issue385.</p>
</li>
<li><p class="first">internally make varnames() deal with classes's __init__,
although it's not needed by pytest itself atm.  Also
fix caching.  Fixes issue376.</p>
</li>
<li><p class="first">fix issue221 - handle importing of namespace-package with no
__init__.py properly.</p>
</li>
<li><p class="first">refactor internal FixtureRequest handling to avoid monkeypatching.
One of the positive user-facing effects is that the &quot;request&quot; object
can now be used in closures.</p>
</li>
<li><p class="first">fixed version comparison in pytest.importskip(modname, minverstring)</p>
</li>
<li><p class="first">fix issue377 by clarifying in the nose-compat docs that pytest
does not duplicate the unittest-API into the &quot;plain&quot; namespace.</p>
</li>
<li><p class="first">fix verbose reporting for &#64;mock'd test functions</p>
</li>
</ul>
</div>
<div class="section" id="id696">
<h1>2.4.2 (2013-10-04)</h1>
<ul class="simple">
<li>on Windows require colorama and a newer py lib so that py.io.TerminalWriter()
now uses colorama instead of its own ctypes hacks. (fixes issue365)
thanks Paul Moore for bringing it up.</li>
<li>fix &quot;-k&quot; matching of tests where &quot;repr&quot; and &quot;attr&quot; and other names would
cause wrong matches because of an internal implementation quirk
(don't ask) which is now properly implemented. fixes issue345.</li>
<li>avoid tmpdir fixture to create too long filenames especially
when parametrization is used (issue354)</li>
<li>fix pytest-pep8 and pytest-flakes / pytest interactions
(collection names in mark plugin was assuming an item always
has a function which is not true for those plugins etc.)
Thanks Andi Zeidler.</li>
<li>introduce node.get_marker/node.add_marker API for plugins
like pytest-pep8 and pytest-flakes to avoid the messy
details of the node.keywords  pseudo-dicts.  Adapted
docs.</li>
<li>remove attempt to &quot;dup&quot; stdout at startup as it's icky.
the normal capturing should catch enough possibilities
of tests messing up standard FDs.</li>
<li>add pluginmanager.do_configure(config) as a link to
config.do_configure() for plugin-compatibility</li>
</ul>
</div>
<div class="section" id="id697">
<h1>2.4.1 (2013-10-02)</h1>
<ul class="simple">
<li>When using parser.addoption() unicode arguments to the
&quot;type&quot; keyword should also be converted to the respective types.
thanks Floris Bruynooghe, &#64;dnozay. (fixes issue360 and issue362)</li>
<li>fix dotted filename completion when using argcomplete
thanks Anthon van der Neuth. (fixes issue361)</li>
<li>fix regression when a 1-tuple (&quot;arg&quot;,) is used for specifying
parametrization (the values of the parametrization were passed
nested in a tuple).  Thanks Donald Stufft.</li>
<li>merge doc typo fixes, thanks Andy Dirnberger</li>
</ul>
</div>
<div class="section" id="id698">
<h1>2.4</h1>
<p>known incompatibilities:</p>
<ul class="simple">
<li>if calling --genscript from python2.7 or above, you only get a
standalone script which works on python2.7 or above.  Use Python2.6
to also get a python2.5 compatible version.</li>
<li>all xunit-style teardown methods (nose-style, pytest-style,
unittest-style) will not be called if the corresponding setup method failed,
see issue322 below.</li>
<li>the pytest_plugin_unregister hook wasn't ever properly called
and there is no known implementation of the hook - so it got removed.</li>
<li>pytest.fixture-decorated functions cannot be generators (i.e. use
yield) anymore.  This change might be reversed in 2.4.1 if it causes
unforeseen real-life issues.  However, you can always write and return
an inner function/generator and change the fixture consumer to iterate
over the returned generator.  This change was done in lieu of the new
<tt class="docutils literal">pytest.yield_fixture</tt> decorator, see below.</li>
</ul>
<p>new features:</p>
<ul>
<li><p class="first">experimentally introduce a new <tt class="docutils literal">pytest.yield_fixture</tt> decorator
which accepts exactly the same parameters as pytest.fixture but
mandates a <tt class="docutils literal">yield</tt> statement instead of a <tt class="docutils literal">return statement</tt> from
fixture functions.  This allows direct integration with &quot;with-style&quot;
context managers in fixture functions and generally avoids registering
of finalization callbacks in favour of treating the &quot;after-yield&quot; as
teardown code.  Thanks Andreas Pelme, Vladimir Keleshev, Floris
Bruynooghe, Ronny Pfannschmidt and many others for discussions.</p>
</li>
<li><p class="first">allow boolean expression directly with skipif/xfail
if a &quot;reason&quot; is also specified.  Rework skipping documentation
to recommend &quot;condition as booleans&quot; because it prevents surprises
when importing markers between modules.  Specifying conditions
as strings will remain fully supported.</p>
</li>
<li><p class="first">reporting: color the last line red or green depending if
failures/errors occurred or everything passed.  thanks Christian
Theunert.</p>
</li>
<li><p class="first">make &quot;import pdb ; pdb.set_trace()&quot; work natively wrt capturing (no
&quot;-s&quot; needed anymore), making <tt class="docutils literal">pytest.set_trace()</tt> a mere shortcut.</p>
</li>
<li><p class="first">fix issue181: --pdb now also works on collect errors (and
on internal errors) .  This was implemented by a slight internal
refactoring and the introduction of a new hook
<tt class="docutils literal">pytest_exception_interact</tt> hook (see next item).</p>
</li>
<li><p class="first">fix issue341: introduce new experimental hook for IDEs/terminals to
intercept debugging: <tt class="docutils literal">pytest_exception_interact(node, call, report)</tt>.</p>
</li>
<li><p class="first">new monkeypatch.setattr() variant to provide a shorter
invocation for patching out classes/functions from modules:</p>
<blockquote>
<p>monkeypatch.setattr(&quot;requests.get&quot;, myfunc)</p>
</blockquote>
<p>will replace the &quot;get&quot; function of the &quot;requests&quot; module with <tt class="docutils literal">myfunc</tt>.</p>
</li>
<li><p class="first">fix issue322: tearDownClass is not run if setUpClass failed. Thanks
Mathieu Agopian for the initial fix.  Also make all of pytest/nose
finalizer mimic the same generic behaviour: if a setupX exists and
fails, don't run teardownX.  This internally introduces a new method
&quot;node.addfinalizer()&quot; helper which can only be called during the setup
phase of a node.</p>
</li>
<li><p class="first">simplify pytest.mark.parametrize() signature: allow to pass a
CSV-separated string to specify argnames.  For example:
<tt class="docutils literal"><span class="pre">pytest.mark.parametrize(&quot;input,expected&quot;,</span>&nbsp; [(1,2), <span class="pre">(2,3)])</span></tt>
works as well as the previous:
<tt class="docutils literal"><span class="pre">pytest.mark.parametrize((&quot;input&quot;,</span> <span class="pre">&quot;expected&quot;),</span> <span class="pre">...)</span></tt>.</p>
</li>
<li><p class="first">add support for setUpModule/tearDownModule detection, thanks Brian Okken.</p>
</li>
<li><p class="first">integrate tab-completion on options through use of &quot;argcomplete&quot;.
Thanks Anthon van der Neut for the PR.</p>
</li>
<li><p class="first">change option names to be hyphen-separated long options but keep the
old spelling backward compatible.  py.test -h will only show the
hyphenated version, for example &quot;--collect-only&quot; but &quot;--collectonly&quot;
will remain valid as well (for backward-compat reasons).  Many thanks to
Anthon van der Neut for the implementation and to Hynek Schlawack for
pushing us.</p>
</li>
<li><p class="first">fix issue 308 - allow to mark/xfail/skip individual parameter sets
when parametrizing.  Thanks Brianna Laugher.</p>
</li>
<li><p class="first">call new experimental pytest_load_initial_conftests hook to allow
3rd party plugins to do something before a conftest is loaded.</p>
</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li>fix issue358 - capturing options are now parsed more properly
by using a new parser.parse_known_args method.</li>
<li>pytest now uses argparse instead of optparse (thanks Anthon) which
means that &quot;argparse&quot; is added as a dependency if installing into python2.6
environments or below.</li>
<li>fix issue333: fix a case of bad unittest/pytest hook interaction.</li>
<li>PR27: correctly handle nose.SkipTest during collection.  Thanks
Antonio Cuni, Ronny Pfannschmidt.</li>
<li>fix issue355: junitxml puts name=&quot;pytest&quot; attribute to testsuite tag.</li>
<li>fix issue336: autouse fixture in plugins should work again.</li>
<li>fix issue279: improve object comparisons on assertion failure
for standard datatypes and recognise collections.abc.  Thanks to
Brianna Laugher and Mathieu Agopian.</li>
<li>fix issue317: assertion rewriter support for the is_package method</li>
<li>fix issue335: document py.code.ExceptionInfo() object returned
from pytest.raises(), thanks Mathieu Agopian.</li>
<li>remove implicit distribute_setup support from setup.py.</li>
<li>fix issue305: ignore any problems when writing pyc files.</li>
<li>SO-17664702: call fixture finalizers even if the fixture function
partially failed (finalizers would not always be called before)</li>
<li>fix issue320 - fix class scope for fixtures when mixed with
module-level functions.  Thanks Anatloy Bubenkoff.</li>
<li>you can specify &quot;-q&quot; or &quot;-qq&quot; to get different levels of &quot;quieter&quot;
reporting (thanks Katarzyna Jachim)</li>
<li>fix issue300 - Fix order of conftest loading when starting py.test
in a subdirectory.</li>
<li>fix issue323 - sorting of many module-scoped arg parametrizations</li>
<li>make sessionfinish hooks execute with the same cwd-context as at
session start (helps fix plugin behaviour which write output files
with relative path such as pytest-cov)</li>
<li>fix issue316 - properly reference collection hooks in docs</li>
<li>fix issue 306 - cleanup of -k/-m options to only match markers/test
names/keywords respectively.  Thanks Wouter van Ackooy.</li>
<li>improved doctest counting for doctests in python modules --
files without any doctest items will not show up anymore
and doctest examples are counted as separate test items.
thanks Danilo Bellini.</li>
<li>fix issue245 by depending on the released py-1.4.14
which fixes py.io.dupfile to work with files with no
mode. Thanks Jason R. Coombs.</li>
<li>fix junitxml generation when test output contains control characters,
addressing issue267, thanks Jaap Broekhuizen</li>
<li>fix issue338: honor --tb style for setup/teardown errors as well.  Thanks Maho.</li>
<li>fix issue307 - use yaml.safe_load in example, thanks Mark Eichin.</li>
<li>better parametrize error messages, thanks Brianna Laugher</li>
<li>pytest_terminal_summary(terminalreporter) hooks can now use
&quot;.section(title)&quot; and &quot;.line(msg)&quot; methods to print extra
information at the end of a test run.</li>
</ul>
</div>
<div class="section" id="id699">
<h1>2.3.5 (2013-04-30)</h1>
<ul class="simple">
<li>fix issue169: respect --tb=style with setup/teardown errors as well.</li>
<li>never consider a fixture function for test function collection</li>
<li>allow re-running of test items / helps to fix pytest-reruntests plugin
and also help to keep less fixture/resource references alive</li>
<li>put captured stdout/stderr into junitxml output even for passing tests
(thanks Adam Goucher)</li>
<li>Issue 265 - integrate nose setup/teardown with setupstate
so it doesn't try to teardown if it did not setup</li>
<li>issue 271 - don't write junitxml on slave nodes</li>
<li>Issue 274 - don't try to show full doctest example
when doctest does not know the example location</li>
<li>issue 280 - disable assertion rewriting on buggy CPython 2.6.0</li>
<li>inject &quot;getfixture()&quot; helper to retrieve fixtures from doctests,
thanks Andreas Zeidler</li>
<li>issue 259 - when assertion rewriting, be consistent with the default
source encoding of ASCII on Python 2</li>
<li>issue 251 - report a skip instead of ignoring classes with init</li>
<li>issue250 unicode/str mixes in parametrization names and values now works</li>
<li>issue257, assertion-triggered compilation of source ending in a
comment line doesn't blow up in python2.5 (fixed through py&gt;=1.4.13.dev6)</li>
<li>fix --genscript option to generate standalone scripts that also
work with python3.3 (importer ordering)</li>
<li>issue171 - in assertion rewriting, show the repr of some
global variables</li>
<li>fix option help for &quot;-k&quot;</li>
<li>move long description of distribution into README.rst</li>
<li>improve docstring for metafunc.parametrize()</li>
<li>fix bug where using capsys with pytest.set_trace() in a test
function would break when looking at capsys.readouterr()</li>
<li>allow to specify prefixes starting with &quot;_&quot; when
customizing python_functions test discovery. (thanks Graham Horler)</li>
<li>improve PYTEST_DEBUG tracing output by putting
extra data on a new lines with additional indent</li>
<li>ensure OutcomeExceptions like skip/fail have initialized exception attributes</li>
<li>issue 260 - don't use nose special setup on plain unittest cases</li>
<li>fix issue134 - print the collect errors that prevent running specified test items</li>
<li>fix issue266 - accept unicode in MarkEvaluator expressions</li>
</ul>
</div>
<div class="section" id="id700">
<h1>2.3.4 (2012-11-20)</h1>
<ul class="simple">
<li>yielded test functions will now have autouse-fixtures active but
cannot accept fixtures as funcargs - it's anyway recommended to
rather use the post-2.0 parametrize features instead of yield, see:
<a class="reference external" href="http://pytest.org/latest/example/parametrize.html">http://pytest.org/latest/example/parametrize.html</a></li>
<li>fix autouse-issue where autouse-fixtures would not be discovered
if defined in an a/conftest.py file and tests in a/tests/test_some.py</li>
<li>fix issue226 - LIFO ordering for fixture teardowns</li>
<li>fix issue224 - invocations with &gt;256 char arguments now work</li>
<li>fix issue91 - add/discuss package/directory level setups in example</li>
<li>allow to dynamically define markers via
item.keywords[...]=assignment integrating with &quot;-m&quot; option</li>
<li>make &quot;-k&quot; accept an expressions the same as with &quot;-m&quot; so that one
can write: -k &quot;name1 or name2&quot; etc.  This is a slight incompatibility
if you used special syntax like &quot;TestClass.test_method&quot; which you now
need to write as -k &quot;TestClass and test_method&quot; to match a certain
method in a certain test class.</li>
</ul>
</div>
<div class="section" id="id701">
<h1>2.3.3 (2012-11-06)</h1>
<ul class="simple">
<li>fix issue214 - parse modules that contain special objects like e. g.
flask's request object which blows up on getattr access if no request
is active. thanks Thomas Waldmann.</li>
<li>fix issue213 - allow to parametrize with values like numpy arrays that
do not support an __eq__ operator</li>
<li>fix issue215 - split test_python.org into multiple files</li>
<li>fix issue148 - &#64;unittest.skip on classes is now recognized and avoids
calling setUpClass/tearDownClass, thanks Pavel Repin</li>
<li>fix issue209 - reintroduce python2.4 support by depending on newer
pylib which re-introduced statement-finding for pre-AST interpreters</li>
<li>nose support: only call setup if it's a callable, thanks Andrew
Taumoefolau</li>
<li>fix issue219 - add py2.4-3.3 classifiers to TROVE list</li>
<li>in tracebacks <em>,*</em> arg values are now shown next to normal arguments
(thanks Manuel Jacob)</li>
<li>fix issue217 - support mock.patch with pytest's fixtures - note that
you need either mock-1.0.1 or the python3.3 builtin unittest.mock.</li>
<li>fix issue127 - improve documentation for pytest_addoption() and
add a <tt class="docutils literal">config.getoption(name)</tt> helper function for consistency.</li>
</ul>
</div>
<div class="section" id="id702">
<h1>2.3.2 (2012-10-25)</h1>
<ul class="simple">
<li>fix issue208 and fix issue29 use new py version to avoid long pauses
when printing tracebacks in long modules</li>
<li>fix issue205 - conftests in subdirs customizing
pytest_pycollect_makemodule and pytest_pycollect_makeitem
now work properly</li>
<li>fix teardown-ordering for parametrized setups</li>
<li>fix issue127 - better documentation for pytest_addoption
and related objects.</li>
<li>fix unittest behaviour: TestCase.runtest only called if there are
test methods defined</li>
<li>improve trial support: don't collect its empty
unittest.TestCase.runTest() method</li>
<li>&quot;python setup.py test&quot; now works with pytest itself</li>
<li>fix/improve internal/packaging related bits:<ul>
<li>exception message check of test_nose.py now passes on python33 as well</li>
<li>issue206 - fix test_assertrewrite.py to work when a global
PYTHONDONTWRITEBYTECODE=1 is present</li>
<li>add tox.ini to pytest distribution so that ignore-dirs and others config
bits are properly distributed for maintainers who run pytest-own tests</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id703">
<h1>2.3.1 (2012-10-20)</h1>
<ul class="simple">
<li>fix issue202 - fix regression: using &quot;self&quot; from fixture functions now
works as expected (it's the same &quot;self&quot; instance that a test method
which uses the fixture sees)</li>
<li>skip pexpect using tests (test_pdb.py mostly) on freebsd* systems
due to pexpect not supporting it properly (hanging)</li>
<li>link to web pages from --markers output which provides help for
pytest.mark.* usage.</li>
</ul>
</div>
<div class="section" id="id704">
<h1>2.3.0 (2012-10-19)</h1>
<ul class="simple">
<li>fix issue202 - better automatic names for parametrized test functions</li>
<li>fix issue139 - introduce &#64;pytest.fixture which allows direct scoping
and parametrization of funcarg factories.</li>
<li>fix issue198 - conftest fixtures were not found on windows32 in some
circumstances with nested directory structures due to path manipulation issues</li>
<li>fix issue193 skip test functions with were parametrized with empty
parameter sets</li>
<li>fix python3.3 compat, mostly reporting bits that previously depended
on dict ordering</li>
<li>introduce re-ordering of tests by resource and parametrization setup
which takes precedence to the usual file-ordering</li>
<li>fix issue185 monkeypatching time.time does not cause pytest to fail</li>
<li>fix issue172 duplicate call of pytest.fixture decoratored setup_module
functions</li>
<li>fix junitxml=path construction so that if tests change the
current working directory and the path is a relative path
it is constructed correctly from the original current working dir.</li>
<li>fix &quot;python setup.py test&quot; example to cause a proper &quot;errno&quot; return</li>
<li>fix issue165 - fix broken doc links and mention stackoverflow for FAQ</li>
<li>catch unicode-issues when writing failure representations
to terminal to prevent the whole session from crashing</li>
<li>fix xfail/skip confusion: a skip-mark or an imperative pytest.skip
will now take precedence before xfail-markers because we
can't determine xfail/xpass status in case of a skip. see also:
<a class="reference external" href="http://stackoverflow.com/questions/11105828/in-py-test-when-i-explicitly-skip-a-test-that-is-marked-as-xfail-how-can-i-get">http://stackoverflow.com/questions/11105828/in-py-test-when-i-explicitly-skip-a-test-that-is-marked-as-xfail-how-can-i-get</a></li>
<li>always report installed 3rd party plugins in the header of a test run</li>
<li>fix issue160: a failing setup of an xfail-marked tests should
be reported as xfail (not xpass)</li>
<li>fix issue128: show captured output when capsys/capfd are used</li>
<li>fix issue179: properly show the dependency chain of factories</li>
<li>pluginmanager.register(...) now raises ValueError if the
plugin has been already registered or the name is taken</li>
<li>fix issue159: improve <a class="reference external" href="http://pytest.org/latest/faq.html">http://pytest.org/latest/faq.html</a>
especially with respect to the &quot;magic&quot; history, also mention
pytest-django, trial and unittest integration.</li>
<li>make request.keywords and node.keywords writable.  All descendant
collection nodes will see keyword values.  Keywords are dictionaries
containing markers and other info.</li>
<li>fix issue 178: xml binary escapes are now wrapped in py.xml.raw</li>
<li>fix issue 176: correctly catch the builtin AssertionError
even when we replaced AssertionError with a subclass on the
python level</li>
<li>factory discovery no longer fails with magic global callables
that provide no sane __code__ object (mock.call for example)</li>
<li>fix issue 182: testdir.inprocess_run now considers passed plugins</li>
<li><dl class="first docutils">
<dt>fix issue 188: ensure sys.exc_info is clear on python2</dt>
<dd>before calling into a test</dd>
</dl>
</li>
<li>fix issue 191: add unittest TestCase runTest method support</li>
<li>fix issue 156: monkeypatch correctly handles class level descriptors</li>
<li>reporting refinements:<ul>
<li>pytest_report_header now receives a &quot;startdir&quot; so that
you can use startdir.bestrelpath(yourpath) to show
nice relative path</li>
<li>allow plugins to implement both pytest_report_header and
pytest_sessionstart (sessionstart is invoked first).</li>
<li>don't show deselected reason line if there is none</li>
<li>py.test -vv will show all of assert comparisons instead of truncating</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id705">
<h1>2.2.4 (2012-05-22)</h1>
<ul class="simple">
<li>fix error message for rewritten assertions involving the % operator</li>
<li>fix issue 126: correctly match all invalid xml characters for junitxml
binary escape</li>
<li>fix issue with unittest: now &#64;unittest.expectedFailure markers should
be processed correctly (you can also use &#64;pytest.mark markers)</li>
<li>document integration with the extended distribute/setuptools test commands</li>
<li>fix issue 140: properly get the real functions
of bound classmethods for setup/teardown_class</li>
<li>fix issue #141: switch from the deceased paste.pocoo.org to bpaste.net</li>
<li>fix issue #143: call unconfigure/sessionfinish always when
configure/sessionstart where called</li>
<li>fix issue #144: better mangle test ids to junitxml classnames</li>
<li>upgrade distribute_setup.py to 0.6.27</li>
</ul>
</div>
<div class="section" id="id706">
<h1>2.2.3 (2012-02-05)</h1>
<ul class="simple">
<li>fix uploaded package to only include necessary files</li>
</ul>
</div>
<div class="section" id="id707">
<h1>2.2.2 (2012-02-05)</h1>
<ul class="simple">
<li>fix issue101: wrong args to unittest.TestCase test function now
produce better output</li>
<li>fix issue102: report more useful errors and hints for when a
test directory was renamed and some pyc/__pycache__ remain</li>
<li>fix issue106: allow parametrize to be applied multiple times
e.g. from module, class and at function level.</li>
<li>fix issue107: actually perform session scope finalization</li>
<li>don't check in parametrize if indirect parameters are funcarg names</li>
<li>add chdir method to monkeypatch funcarg</li>
<li>fix crash resulting from calling monkeypatch undo a second time</li>
<li>fix issue115: make --collectonly robust against early failure
(missing files/directories)</li>
<li>&quot;-qq --collectonly&quot; now shows only files and the number of tests in them</li>
<li>&quot;-q --collectonly&quot; now shows test ids</li>
<li>allow adding of attributes to test reports such that it also works
with distributed testing (no upgrade of pytest-xdist needed)</li>
</ul>
</div>
<div class="section" id="id708">
<h1>2.2.1 (2011-12-16)</h1>
<ul class="simple">
<li>fix issue99 (in pytest and py) internallerrors with resultlog now
produce better output - fixed by normalizing pytest_internalerror
input arguments.</li>
<li>fix issue97 / traceback issues (in pytest and py) improve traceback output
in conjunction with jinja2 and cython which hack tracebacks</li>
<li>fix issue93 (in pytest and pytest-xdist) avoid &quot;delayed teardowns&quot;:
the final test in a test node will now run its teardown directly
instead of waiting for the end of the session. Thanks Dave Hunt for
the good reporting and feedback.  The pytest_runtest_protocol as well
as the pytest_runtest_teardown hooks now have &quot;nextitem&quot; available
which will be None indicating the end of the test run.</li>
<li>fix collection crash due to unknown-source collected items, thanks
to Ralf Schmitt (fixed by depending on a more recent pylib)</li>
</ul>
</div>
<div class="section" id="id709">
<h1>2.2.0 (2011-11-18)</h1>
<ul class="simple">
<li>fix issue90: introduce eager tearing down of test items so that
teardown function are called earlier.</li>
<li>add an all-powerful metafunc.parametrize function which allows to
parametrize test function arguments in multiple steps and therefore
from independent plugins and places.</li>
<li>add a &#64;pytest.mark.parametrize helper which allows to easily
call a test function with different argument values</li>
<li>Add examples to the &quot;parametrize&quot; example page, including a quick port
of Test scenarios and the new parametrize function and decorator.</li>
<li>introduce registration for &quot;pytest.mark.*&quot; helpers via ini-files
or through plugin hooks.  Also introduce a &quot;--strict&quot; option which
will treat unregistered markers as errors
allowing to avoid typos and maintain a well described set of markers
for your test suite.  See exaples at <a class="reference external" href="http://pytest.org/latest/mark.html">http://pytest.org/latest/mark.html</a>
and its links.</li>
<li>issue50: introduce &quot;-m marker&quot; option to select tests based on markers
(this is a stricter and more predictable version of '-k' in that &quot;-m&quot;
only matches complete markers and has more obvious rules for and/or
semantics.</li>
<li>new feature to help optimizing the speed of your tests:
--durations=N option for displaying N slowest test calls
and setup/teardown methods.</li>
<li>fix issue87: --pastebin now works with python3</li>
<li>fix issue89: --pdb with unexpected exceptions in doctest work more sensibly</li>
<li>fix and cleanup pytest's own test suite to not leak FDs</li>
<li>fix issue83: link to generated funcarg list</li>
<li>fix issue74: pyarg module names are now checked against imp.find_module false positives</li>
<li>fix compatibility with twisted/trial-11.1.0 use cases</li>
<li>simplify Node.listchain</li>
<li>simplify junitxml output code by relying on py.xml</li>
<li>add support for skip properties on unittest classes and functions</li>
</ul>
</div>
<div class="section" id="id710">
<h1>2.1.3 (2011-10-18)</h1>
<ul class="simple">
<li>fix issue79: assertion rewriting failed on some comparisons in boolops</li>
<li>correctly handle zero length arguments (a la pytest '')</li>
<li>fix issue67 / junitxml now contains correct test durations, thanks ronny</li>
<li>fix issue75 / skipping test failure on jython</li>
<li>fix issue77 / Allow assertrepr_compare hook to apply to a subset of tests</li>
</ul>
</div>
<div class="section" id="id711">
<h1>2.1.2 (2011-09-24)</h1>
<ul class="simple">
<li>fix assertion rewriting on files with windows newlines on some Python versions</li>
<li>refine test discovery by package/module name (--pyargs), thanks Florian Mayer</li>
<li>fix issue69 / assertion rewriting fixed on some boolean operations</li>
<li>fix issue68 / packages now work with assertion rewriting</li>
<li>fix issue66: use different assertion rewriting caches when the -O option is passed</li>
<li>don't try assertion rewriting on Jython, use reinterp</li>
</ul>
</div>
<div class="section" id="id712">
<h1>2.1.1</h1>
<ul class="simple">
<li>fix issue64 / pytest.set_trace now works within pytest_generate_tests hooks</li>
<li>fix issue60 / fix error conditions involving the creation of __pycache__</li>
<li>fix issue63 / assertion rewriting on inserts involving strings containing '%'</li>
<li>fix assertion rewriting on calls with a ** arg</li>
<li>don't cache rewritten modules if bytecode generation is disabled</li>
<li>fix assertion rewriting in read-only directories</li>
<li>fix issue59: provide system-out/err tags for junitxml output</li>
<li>fix issue61: assertion rewriting on boolean operations with 3 or more operands</li>
<li>you can now build a man page with &quot;cd doc ; make man&quot;</li>
</ul>
</div>
<div class="section" id="id713">
<h1>2.1.0 (2011-07-09)</h1>
<ul class="simple">
<li>fix issue53 call nosestyle setup functions with correct ordering</li>
<li>fix issue58 and issue59: new assertion code fixes</li>
<li>merge Benjamin's assertionrewrite branch: now assertions
for test modules on python 2.6 and above are done by rewriting
the AST and saving the pyc file before the test module is imported.
see doc/assert.txt for more info.</li>
<li>fix issue43: improve doctests with better traceback reporting on
unexpected exceptions</li>
<li>fix issue47: timing output in junitxml for test cases is now correct</li>
<li>fix issue48: typo in MarkInfo repr leading to exception</li>
<li>fix issue49: avoid confusing error when initizaliation partially fails</li>
<li>fix issue44: env/username expansion for junitxml file path</li>
<li>show releaselevel information in test runs for pypy</li>
<li>reworked doc pages for better navigation and PDF generation</li>
<li>report KeyboardInterrupt even if interrupted during session startup</li>
<li>fix issue 35 - provide PDF doc version and download link from index page</li>
</ul>
</div>
<div class="section" id="id714">
<h1>2.0.3 (2011-05-11)</h1>
<ul class="simple">
<li>fix issue38: nicer tracebacks on calls to hooks, particularly early
configure/sessionstart ones</li>
<li>fix missing skip reason/meta information in junitxml files, reported
via <a class="reference external" href="http://lists.idyll.org/pipermail/testing-in-python/2011-March/003928.html">http://lists.idyll.org/pipermail/testing-in-python/2011-March/003928.html</a></li>
<li>fix issue34: avoid collection failure with &quot;test&quot; prefixed classes
deriving from object.</li>
<li>don't require zlib (and other libs) for genscript plugin without
--genscript actually being used.</li>
<li>speed up skips (by not doing a full traceback representation
internally)</li>
<li>fix issue37: avoid invalid characters in junitxml's output</li>
</ul>
</div>
<div class="section" id="id715">
<h1>2.0.2 (2011-03-09)</h1>
<ul>
<li><p class="first">tackle issue32 - speed up test runs of very quick test functions
by reducing the relative overhead</p>
</li>
<li><p class="first">fix issue30 - extended xfail/skipif handling and improved reporting.
If you have a syntax error in your skip/xfail
expressions you now get nice error reports.</p>
<p>Also you can now access module globals from xfail/skipif
expressions so that this for example works now:</p>
<pre class="literal-block">
import pytest
import mymodule
&#64;pytest.mark.skipif(&quot;mymodule.__version__[0] == &quot;1&quot;)
def test_function():
    pass
</pre>
<p>This will not run the test function if the module's version string
does not start with a &quot;1&quot;.  Note that specifying a string instead
of a boolean expressions allows py.test to report meaningful information
when summarizing a test run as to what conditions lead to skipping
(or xfail-ing) tests.</p>
</li>
<li><p class="first">fix issue28 - setup_method and pytest_generate_tests work together
The setup_method fixture method now gets called also for
test function invocations generated from the pytest_generate_tests
hook.</p>
</li>
<li><p class="first">fix issue27 - collectonly and keyword-selection (-k) now work together
Also, if you do &quot;py.test --collectonly -q&quot; you now get a flat list
of test ids that you can use to paste to the py.test commandline
in order to execute a particular test.</p>
</li>
<li><p class="first">fix issue25 avoid reported problems with --pdb and python3.2/encodings output</p>
</li>
<li><p class="first">fix issue23 - tmpdir argument now works on Python3.2 and WindowsXP
Starting with Python3.2 os.symlink may be supported. By requiring
a newer py lib version the py.path.local() implementation acknowledges
this.</p>
</li>
<li><p class="first">fixed typos in the docs (thanks Victor Garcia, Brianna Laugher) and particular
thanks to Laura Creighton who also reviewed parts of the documentation.</p>
</li>
<li><p class="first">fix slightly wrong output of verbose progress reporting for classes
(thanks Amaury)</p>
</li>
<li><p class="first">more precise (avoiding of) deprecation warnings for node.Class|Function accesses</p>
</li>
<li><p class="first">avoid std unittest assertion helper code in tracebacks (thanks Ronny)</p>
</li>
</ul>
</div>
<div class="section" id="id716">
<h1>2.0.1 (2011-02-07)</h1>
<ul class="simple">
<li>refine and unify initial capturing so that it works nicely
even if the logging module is used on an early-loaded conftest.py
file or plugin.</li>
<li>allow to omit &quot;()&quot; in test ids to allow for uniform test ids
as produced by Alfredo's nice pytest.vim plugin.</li>
<li>fix issue12 - show plugin versions with &quot;--version&quot; and
&quot;--traceconfig&quot; and also document how to add extra information
to reporting test header</li>
<li>fix issue17 (import-* reporting issue on python3) by
requiring py&gt;1.4.0 (1.4.1 is going to include it)</li>
<li>fix issue10 (numpy arrays truth checking) by refining
assertion interpretation in py lib</li>
<li>fix issue15: make nose compatibility tests compatible
with python3 (now that nose-1.0 supports python3)</li>
<li>remove somewhat surprising &quot;same-conftest&quot; detection because
it ignores conftest.py when they appear in several subdirs.</li>
<li>improve assertions (&quot;not in&quot;), thanks Floris Bruynooghe</li>
<li>improve behaviour/warnings when running on top of &quot;python -OO&quot;
(assertions and docstrings are turned off, leading to potential
false positives)</li>
<li>introduce a pytest_cmdline_processargs(args) hook
to allow dynamic computation of command line arguments.
This fixes a regression because py.test prior to 2.0
allowed to set command line options from conftest.py
files which so far pytest-2.0 only allowed from ini-files now.</li>
<li>fix issue7: assert failures in doctest modules.
unexpected failures in doctests will not generally
show nicer, i.e. within the doctest failing context.</li>
<li>fix issue9: setup/teardown functions for an xfail-marked
test will report as xfail if they fail but report as normally
passing (not xpassing) if they succeed.  This only is true
for &quot;direct&quot; setup/teardown invocations because teardown_class/
teardown_module cannot closely relate to a single test.</li>
<li>fix issue14: no logging errors at process exit</li>
<li>refinements to &quot;collecting&quot; output on non-ttys</li>
<li>refine internal plugin registration and --traceconfig output</li>
<li>introduce a mechanism to prevent/unregister plugins from the
command line, see <a class="reference external" href="http://pytest.org/plugins.html#cmdunregister">http://pytest.org/plugins.html#cmdunregister</a></li>
<li>activate resultlog plugin by default</li>
<li>fix regression wrt yielded tests which due to the
collection-before-running semantics were not
setup as with pytest 1.3.4.  Note, however, that
the recommended and much cleaner way to do test
parametraization remains the &quot;pytest_generate_tests&quot;
mechanism, see the docs.</li>
</ul>
</div>
<div class="section" id="id717">
<h1>2.0.0 (2010-11-25)</h1>
<ul class="simple">
<li>pytest-2.0 is now its own package and depends on pylib-2.0</li>
<li>new ability: python -m pytest / python -m pytest.main ability</li>
<li>new python invocation: pytest.main(args, plugins) to load
some custom plugins early.</li>
<li>try harder to run unittest test suites in a more compatible manner
by deferring setup/teardown semantics to the unittest package.
also work harder to run twisted/trial and Django tests which
should now basically work by default.</li>
<li>introduce a new way to set config options via ini-style files,
by default setup.cfg and tox.ini files are searched.  The old
ways (certain environment variables, dynamic conftest.py reading
is removed).</li>
<li>add a new &quot;-q&quot; option which decreases verbosity and prints a more
nose/unittest-style &quot;dot&quot; output.</li>
<li>fix issue135 - marks now work with unittest test cases as well</li>
<li>fix issue126 - introduce py.test.set_trace() to trace execution via
PDB during the running of tests even if capturing is ongoing.</li>
<li>fix issue123 - new &quot;python -m py.test&quot; invocation for py.test
(requires Python 2.5 or above)</li>
<li>fix issue124 - make reporting more resilient against tests opening
files on filedescriptor 1 (stdout).</li>
<li>fix issue109 - sibling conftest.py files will not be loaded.
(and Directory collectors cannot be customized anymore from a Directory's
conftest.py - this needs to happen at least one level up).</li>
<li>introduce (customizable) assertion failure representations and enhance
output on assertion failures for comparisons and other cases (Floris Bruynooghe)</li>
<li>nose-plugin: pass through type-signature failures in setup/teardown
functions instead of not calling them (Ed Singleton)</li>
<li>remove py.test.collect.Directory (follows from a major refactoring
and simplification of the collection process)</li>
<li>majorly reduce py.test core code, shift function/python testing to own plugin</li>
<li>fix issue88 (finding custom test nodes from command line arg)</li>
<li>refine 'tmpdir' creation, will now create basenames better associated
with test names (thanks Ronny)</li>
<li>&quot;xpass&quot; (unexpected pass) tests don't cause exitcode!=0</li>
<li>fix issue131 / issue60 - importing doctests in __init__ files used as namespace packages</li>
<li>fix issue93 stdout/stderr is captured while importing conftest.py</li>
<li>fix bug: unittest collected functions now also can have &quot;pytestmark&quot;
applied at class/module level</li>
<li>add ability to use &quot;class&quot; level for cached_setup helper</li>
<li>fix strangeness: mark.* objects are now immutable, create new instances</li>
</ul>
</div>
<div class="section" id="id718">
<h1>1.3.4 (2010-09-14)</h1>
<ul class="simple">
<li>fix issue111: improve install documentation for windows</li>
<li>fix issue119: fix custom collectability of __init__.py as a module</li>
<li>fix issue116: --doctestmodules work with __init__.py files as well</li>
<li>fix issue115: unify internal exception passthrough/catching/GeneratorExit</li>
<li>fix issue118: new --tb=native for presenting cpython-standard exceptions</li>
</ul>
</div>
<div class="section" id="id719">
<h1>1.3.3 (2010-07-30)</h1>
<ul class="simple">
<li>fix issue113: assertion representation problem with triple-quoted strings
(and possibly other cases)</li>
<li>make conftest loading detect that a conftest file with the same
content was already loaded, avoids surprises in nested directory structures
which can be produced e.g. by Hudson. It probably removes the need to use
--confcutdir in most cases.</li>
<li>fix terminal coloring for win32
(thanks Michael Foord for reporting)</li>
<li>fix weirdness: make terminal width detection work on stdout instead of stdin
(thanks Armin Ronacher for reporting)</li>
<li>remove trailing whitespace in all py/text distribution files</li>
</ul>
</div>
<div class="section" id="id720">
<h1>1.3.2 (2010-07-08)</h1>
<p><strong>New features</strong></p>
<ul>
<li><p class="first">fix issue103:  introduce py.test.raises as context manager, examples:</p>
<pre class="literal-block">
with py.test.raises(ZeroDivisionError):
    x = 0
    1 / x

with py.test.raises(RuntimeError) as excinfo:
    call_something()

# you may do extra checks on excinfo.value|type|traceback here
</pre>
<p>(thanks Ronny Pfannschmidt)</p>
</li>
<li><p class="first">Funcarg factories can now dynamically apply a marker to a
test invocation.  This is for example useful if a factory
provides parameters to a test which are expected-to-fail:</p>
<pre class="literal-block">
def pytest_funcarg__arg(request):
    request.applymarker(py.test.mark.xfail(reason=&quot;flaky config&quot;))
    ...

def test_function(arg):
    ...
</pre>
</li>
<li><p class="first">improved error reporting on collection and import errors. This makes
use of a more general mechanism, namely that for custom test item/collect
nodes <tt class="docutils literal">node.repr_failure(excinfo)</tt> is now uniformly called so that you can
override it to return a string error representation of your choice
which is going to be reported as a (red) string.</p>
</li>
<li><p class="first">introduce '--junitprefix=STR' option to prepend a prefix
to all reports in the junitxml file.</p>
</li>
</ul>
<p><strong>Bug fixes</strong></p>
<ul class="simple">
<li>make tests and the <tt class="docutils literal">pytest_recwarn</tt> plugin in particular fully compatible
to Python2.7 (if you use the <tt class="docutils literal">recwarn</tt> funcarg warnings will be enabled so that
you can properly check for their existence in a cross-python manner).</li>
<li>refine --pdb: ignore xfailed tests, unify its TB-reporting and
don't display failures again at the end.</li>
<li>fix assertion interpretation with the ** operator (thanks Benjamin Peterson)</li>
<li>fix issue105 assignment on the same line as a failing assertion (thanks Benjamin Peterson)</li>
<li>fix issue104 proper escaping for test names in junitxml plugin (thanks anonymous)</li>
<li>fix issue57 -f|--looponfail to work with xpassing tests (thanks Ronny)</li>
<li>fix issue92 collectonly reporter and --pastebin (thanks Benjamin Peterson)</li>
<li>fix py.code.compile(source) to generate unique filenames</li>
<li>fix assertion re-interp problems on PyPy, by defering code
compilation to the (overridable) Frame.eval class. (thanks Amaury Forgeot)</li>
<li>fix py.path.local.pyimport() to work with directories</li>
<li>streamline py.path.local.mkdtemp implementation and usage</li>
<li>don't print empty lines when showing junitxml-filename</li>
<li>add optional boolean ignore_errors parameter to py.path.local.remove</li>
<li>fix terminal writing on win32/python2.4</li>
<li>py.process.cmdexec() now tries harder to return properly encoded unicode objects
on all python versions</li>
<li>install plain py.test/py.which scripts also for Jython, this helps to
get canonical script paths in virtualenv situations</li>
<li>make path.bestrelpath(path) return &quot;.&quot;, note that when calling
X.bestrelpath the assumption is that X is a directory.</li>
<li>make initial conftest discovery ignore &quot;--&quot; prefixed arguments</li>
<li>fix resultlog plugin when used in a multicpu/multihost xdist situation
(thanks Jakub Gustak)</li>
<li>perform distributed testing related reporting in the xdist-plugin
rather than having dist-related code in the generic py.test
distribution</li>
<li>fix homedir detection on Windows</li>
<li>ship distribute_setup.py version 0.6.13</li>
</ul>
</div>
<div class="section" id="id721">
<h1>1.3.1 (2010-05-25)</h1>
<p><strong>New features</strong></p>
<ul>
<li><p class="first">issue91: introduce new py.test.xfail(reason) helper
to imperatively mark a test as expected to fail. Can
be used from within setup and test functions. This is
useful especially for parametrized tests when certain
configurations are expected-to-fail.  In this case the
declarative approach with the &#64;py.test.mark.xfail cannot
be used as it would mark all configurations as xfail.</p>
</li>
<li><p class="first">issue102: introduce new --maxfail=NUM option to stop
test runs after NUM failures.  This is a generalization
of the '-x' or '--exitfirst' option which is now equivalent
to '--maxfail=1'.  Both '-x' and '--maxfail' will
now also print a line near the end indicating the Interruption.</p>
</li>
<li><p class="first">issue89: allow py.test.mark decorators to be used on classes
(class decorators were introduced with python2.6) and
also allow to have multiple markers applied at class/module level
by specifying a list.</p>
</li>
<li><p class="first">improve and refine letter reporting in the progress bar:
.  pass
f  failed test
s  skipped tests (reminder: use for dependency/platform mismatch only)
x  xfailed test (test that was expected to fail)
X  xpassed test (test that was expected to fail but passed)</p>
<p>You can use any combination of 'fsxX' with the '-r' extended
reporting option. The xfail/xpass results will show up as
skipped tests in the junitxml output - which also fixes
issue99.</p>
</li>
<li><p class="first">make py.test.cmdline.main() return the exitstatus instead of raising
SystemExit and also allow it to be called multiple times.  This of
course requires that your application and tests are properly teared
down and don't have global state.</p>
</li>
</ul>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li>improved traceback presentation:
- improved and unified reporting for &quot;--tb=short&quot; option
- Errors during test module imports are much shorter, (using --tb=short style)
- raises shows shorter more relevant tracebacks
- --fulltrace now more systematically makes traces longer / inhibits cutting</li>
<li>improve support for raises and other dynamically compiled code by
manipulating python's linecache.cache instead of the previous
rather hacky way of creating custom code objects.  This makes
it seemlessly work on Jython and PyPy where it previously didn't.</li>
<li>fix issue96: make capturing more resilient against Control-C
interruptions (involved somewhat substantial refactoring
to the underlying capturing functionality to avoid race
conditions).</li>
<li>fix chaining of conditional skipif/xfail decorators - so it works now
as expected to use multiple &#64;py.test.mark.skipif(condition) decorators,
including specific reporting which of the conditions lead to skipping.</li>
<li>fix issue95: late-import zlib so that it's not required
for general py.test startup.</li>
<li>fix issue94: make reporting more robust against bogus source code
(and internally be more careful when presenting unexpected byte sequences)</li>
</ul>
</div>
<div class="section" id="id722">
<h1>1.3.0 (2010-05-05)</h1>
<ul>
<li><p class="first">deprecate --report option in favour of a new shorter and easier to
remember -r option: it takes a string argument consisting of any
combination of 'xfsX' characters.  They relate to the single chars
you see during the dotted progress printing and will print an extra line
per test at the end of the test run.  This extra line indicates the exact
position or test ID that you directly paste to the py.test cmdline in order
to re-run a particular test.</p>
</li>
<li><p class="first">allow external plugins to register new hooks via the new
pytest_addhooks(pluginmanager) hook.  The new release of
the pytest-xdist plugin for distributed and looponfailing
testing requires this feature.</p>
</li>
<li><p class="first">add a new pytest_ignore_collect(path, config) hook to allow projects and
plugins to define exclusion behaviour for their directory structure -
for example you may define in a conftest.py this method:</p>
<pre class="literal-block">
def pytest_ignore_collect(path):
    return path.check(link=1)
</pre>
<p>to prevent even a collection try of any tests in symlinked dirs.</p>
</li>
<li><p class="first">new pytest_pycollect_makemodule(path, parent) hook for
allowing customization of the Module collection object for a
matching test module.</p>
</li>
<li><p class="first">extend and refine xfail mechanism:
<tt class="docutils literal">&#64;py.test.mark.xfail(run=False)</tt> do not run the decorated test
<tt class="docutils literal"><span class="pre">&#64;py.test.mark.xfail(reason=&quot;...&quot;)</span></tt> prints the reason string in xfail summaries
specifying <tt class="docutils literal"><span class="pre">--runxfail</span></tt> on command line virtually ignores xfail markers</p>
</li>
<li><p class="first">expose (previously internal) commonly useful methods:
py.io.get_terminal_with() -&gt; return terminal width
py.io.ansi_print(...) -&gt; print colored/bold text on linux/win32
py.io.saferepr(obj) -&gt; return limited representation string</p>
</li>
<li><p class="first">expose test outcome related exceptions as py.test.skip.Exception,
py.test.raises.Exception etc., useful mostly for plugins
doing special outcome interpretation/tweaking</p>
</li>
<li><p class="first">(issue85) fix junitxml plugin to handle tests with non-ascii output</p>
</li>
<li><p class="first">fix/refine python3 compatibility (thanks Benjamin Peterson)</p>
</li>
<li><p class="first">fixes for making the jython/win32 combination work, note however:
jython2.5.1/win32 does not provide a command line launcher, see
<a class="reference external" href="http://bugs.jython.org/issue1491">http://bugs.jython.org/issue1491</a> . See pylib install documentation
for how to work around.</p>
</li>
<li><p class="first">fixes for handling of unicode exception values and unprintable objects</p>
</li>
<li><p class="first">(issue87) fix unboundlocal error in assertionold code</p>
</li>
<li><p class="first">(issue86) improve documentation for looponfailing</p>
</li>
<li><p class="first">refine IO capturing: stdin-redirect pseudo-file now has a NOP close() method</p>
</li>
<li><p class="first">ship distribute_setup.py version 0.6.10</p>
</li>
<li><p class="first">added links to the new capturelog and coverage plugins</p>
</li>
</ul>
</div>
<div class="section" id="id723">
<h1>1.2.0 (2010-01-18)</h1>
<ul>
<li><p class="first">refined usage and options for &quot;py.cleanup&quot;:</p>
<pre class="literal-block">
py.cleanup     # remove &quot;*.pyc&quot; and &quot;*$py.class&quot; (jython) files
py.cleanup -e .swp -e .cache # also remove files with these extensions
py.cleanup -s  # remove &quot;build&quot; and &quot;dist&quot; directory next to setup.py files
py.cleanup -d  # also remove empty directories
py.cleanup -a  # synonym for &quot;-s -d -e 'pip-log.txt'&quot;
py.cleanup -n  # dry run, only show what would be removed
</pre>
</li>
<li><p class="first">add a new option &quot;py.test --funcargs&quot; which shows available funcargs
and their help strings (docstrings on their respective factory function)
for a given test path</p>
</li>
<li><p class="first">display a short and concise traceback if a funcarg lookup fails</p>
</li>
<li><p class="first">early-load &quot;conftest.py&quot; files in non-dot first-level sub directories.
allows to conveniently keep and access test-related options in a <tt class="docutils literal">test</tt>
subdir and still add command line options.</p>
</li>
<li><p class="first">fix issue67: new super-short traceback-printing option: &quot;--tb=line&quot; will print a single line for each failing (python) test indicating its filename, lineno and the failure value</p>
</li>
<li><p class="first">fix issue78: always call python-level teardown functions even if the
according setup failed.  This includes refinements for calling setup_module/class functions
which will now only be called once instead of the previous behaviour where they'd be called
multiple times if they raise an exception (including a Skipped exception).  Any exception
will be re-corded and associated with all tests in the according module/class scope.</p>
</li>
<li><p class="first">fix issue63: assume &lt;40 columns to be a bogus terminal width, default to 80</p>
</li>
<li><p class="first">fix pdb debugging to be in the correct frame on raises-related errors</p>
</li>
<li><p class="first">update apipkg.py to fix an issue where recursive imports might
unnecessarily break importing</p>
</li>
<li><p class="first">fix plugin links</p>
</li>
</ul>
</div>
<div class="section" id="id724">
<h1>1.1.1 (2009-11-24)</h1>
<ul class="simple">
<li>moved dist/looponfailing from py.test core into a new
separately released pytest-xdist plugin.</li>
<li>new junitxml plugin: --junitxml=path will generate a junit style xml file
which is processable e.g. by the Hudson CI system.</li>
<li>new option: --genscript=path will generate a standalone py.test script
which will not need any libraries installed.  thanks to Ralf Schmitt.</li>
<li>new option: --ignore will prevent specified path from collection.
Can be specified multiple times.</li>
<li>new option: --confcutdir=dir will make py.test only consider conftest
files that are relative to the specified dir.</li>
<li>new funcarg: &quot;pytestconfig&quot; is the pytest config object for access
to command line args and can now be easily used in a test.</li>
<li>install <tt class="docutils literal">py.test</tt> and <tt class="docutils literal">py.which</tt> with a <tt class="docutils literal"><span class="pre">-$VERSION</span></tt> suffix to
disambiguate between Python3, python2.X, Jython and PyPy installed versions.</li>
<li>new &quot;pytestconfig&quot; funcarg allows access to test config object</li>
<li>new &quot;pytest_report_header&quot; hook can return additional lines
to be displayed at the header of a test run.</li>
<li>(experimental) allow &quot;py.test path::name1::name2::...&quot; for pointing
to a test within a test collection directly.  This might eventually
evolve as a full substitute to &quot;-k&quot; specifications.</li>
<li>streamlined plugin loading: order is now as documented in
customize.html: setuptools, ENV, commandline, conftest.
also setuptools entry point names are turned to canonical namees (&quot;pytest_*&quot;)</li>
<li>automatically skip tests that need 'capfd' but have no os.dup</li>
<li>allow pytest_generate_tests to be defined in classes as well</li>
<li>deprecate usage of 'disabled' attribute in favour of pytestmark</li>
<li>deprecate definition of Directory, Module, Class and Function nodes
in conftest.py files.  Use pytest collect hooks instead.</li>
<li>collection/item node specific runtest/collect hooks are only called exactly
on matching conftest.py files, i.e. ones which are exactly below
the filesystem path of an item</li>
<li>change: the first pytest_collect_directory hook to return something
will now prevent further hooks to be called.</li>
<li>change: figleaf plugin now requires --figleaf to run.  Also
change its long command line options to be a bit shorter (see py.test -h).</li>
<li>change: pytest doctest plugin is now enabled by default and has a
new option --doctest-glob to set a pattern for file matches.</li>
<li>change: remove internal py._* helper vars, only keep py._pydir</li>
<li>robustify capturing to survive if custom pytest_runtest_setup
code failed and prevented the capturing setup code from running.</li>
<li>make py.test.* helpers provided by default plugins visible early -
works transparently both for pydoc and for interactive sessions
which will regularly see e.g. py.test.mark and py.test.importorskip.</li>
<li>simplify internal plugin manager machinery</li>
<li>simplify internal collection tree by introducing a RootCollector node</li>
<li>fix assert reinterpreation that sees a call containing &quot;keyword=...&quot;</li>
<li>fix issue66: invoke pytest_sessionstart and pytest_sessionfinish
hooks on slaves during dist-testing, report module/session teardown
hooks correctly.</li>
<li>fix issue65: properly handle dist-testing if no
execnet/py lib installed remotely.</li>
<li>skip some install-tests if no execnet is available</li>
<li>fix docs, fix internal bin/ script generation</li>
</ul>
</div>
<div class="section" id="id725">
<h1>1.1.0 (2009-11-05)</h1>
<ul class="simple">
<li>introduce automatic plugin registration via 'pytest11'
entrypoints via setuptools' pkg_resources.iter_entry_points</li>
<li>fix py.test dist-testing to work with execnet &gt;= 1.0.0b4</li>
<li>re-introduce py.test.cmdline.main() for better backward compatibility</li>
<li>svn paths: fix a bug with path.check(versioned=True) for svn paths,
allow '%' in svn paths, make svnwc.update() default to interactive mode
like in 1.0.x and add svnwc.update(interactive=False) to inhibit interaction.</li>
<li>refine distributed tarball to contain test and no pyc files</li>
<li>try harder to have deprecation warnings for py.compat.* accesses
report a correct location</li>
</ul>
</div>
<div class="section" id="id726">
<h1>1.0.3</h1>
<ul class="simple">
<li>adjust and improve docs</li>
<li>remove py.rest tool and internal namespace - it was
never really advertised and can still be used with
the old release if needed.  If there is interest
it could be revived into its own tool i guess.</li>
<li>fix issue48 and issue59: raise an Error if the module
from an imported test file does not seem to come from
the filepath - avoids &quot;same-name&quot; confusion that has
been reported repeatedly</li>
<li>merged Ronny's nose-compatibility hacks: now
nose-style setup_module() and setup() functions are
supported</li>
<li>introduce generalized py.test.mark function marking</li>
<li>reshuffle / refine command line grouping</li>
<li>deprecate parser.addgroup in favour of getgroup which creates option group</li>
<li>add --report command line option that allows to control showing of skipped/xfailed sections</li>
<li>generalized skipping: a new way to mark python functions with skipif or xfail
at function, class and modules level based on platform or sys-module attributes.</li>
<li>extend py.test.mark decorator to allow for positional args</li>
<li>introduce and test &quot;py.cleanup -d&quot; to remove empty directories</li>
<li>fix issue #59 - robustify unittest test collection</li>
<li>make bpython/help interaction work by adding an __all__ attribute
to ApiModule, cleanup initpkg</li>
<li>use MIT license for pylib, add some contributors</li>
<li>remove py.execnet code and substitute all usages with 'execnet' proper</li>
<li>fix issue50 - cached_setup now caches more to expectations
for test functions with multiple arguments.</li>
<li>merge Jarko's fixes, issue #45 and #46</li>
<li>add the ability to specify a path for py.lookup to search in</li>
<li>fix a funcarg cached_setup bug probably only occurring
in distributed testing and &quot;module&quot; scope with teardown.</li>
<li>many fixes and changes for making the code base python3 compatible,
many thanks to Benjamin Peterson for helping with this.</li>
<li>consolidate builtins implementation to be compatible with &gt;=2.3,
add helpers to ease keeping 2 and 3k compatible code</li>
<li>deprecate py.compat.doctest|subprocess|textwrap|optparse</li>
<li>deprecate py.magic.autopath, remove py/magic directory</li>
<li>move pytest assertion handling to py/code and a pytest_assertion
plugin, add &quot;--no-assert&quot; option, deprecate py.magic namespaces
in favour of (less) py.code ones.</li>
<li>consolidate and cleanup py/code classes and files</li>
<li>cleanup py/misc, move tests to bin-for-dist</li>
<li>introduce delattr/delitem/delenv methods to py.test's monkeypatch funcarg</li>
<li>consolidate py.log implementation, remove old approach.</li>
<li>introduce py.io.TextIO and py.io.BytesIO for distinguishing between
text/unicode and byte-streams (uses underlying standard lib io.*
if available)</li>
<li>make py.unittest_convert helper script available which converts &quot;unittest.py&quot;
style files into the simpler assert/direct-test-classes py.test/nosetests
style.  The script was written by Laura Creighton.</li>
<li>simplified internal localpath implementation</li>
</ul>
</div>
<div class="section" id="id727">
<h1>1.0.2 (2009-08-27)</h1>
<ul class="simple">
<li>fixing packaging issues, triggered by fedora redhat packaging,
also added doc, examples and contrib dirs to the tarball.</li>
<li>added a documentation link to the new django plugin.</li>
</ul>
</div>
<div class="section" id="id728">
<h1>1.0.1 (2009-08-19)</h1>
<ul class="simple">
<li>added a 'pytest_nose' plugin which handles nose.SkipTest,
nose-style function/method/generator setup/teardown and
tries to report functions correctly.</li>
<li>capturing of unicode writes or encoded strings to sys.stdout/err
work better, also terminalwriting was adapted and somewhat
unified between windows and linux.</li>
<li>improved documentation layout and content a lot</li>
<li>added a &quot;--help-config&quot; option to show conftest.py / ENV-var names for
all longopt cmdline options, and some special conftest.py variables.
renamed 'conf_capture' conftest setting to 'option_capture' accordingly.</li>
<li>fix issue #27: better reporting on non-collectable items given on commandline
(e.g. pyc files)</li>
<li>fix issue #33: added --version flag (thanks Benjamin Peterson)</li>
<li>fix issue #32: adding support for &quot;incomplete&quot; paths to wcpath.status()</li>
<li>&quot;Test&quot; prefixed classes are <em>not</em> collected by default anymore if they
have an __init__ method</li>
<li>monkeypatch setenv() now accepts a &quot;prepend&quot; parameter</li>
<li>improved reporting of collection error tracebacks</li>
<li>simplified multicall mechanism and plugin architecture,
renamed some internal methods and argnames</li>
</ul>
</div>
<div class="section" id="id729">
<h1>1.0.0 (2009-08-04)</h1>
<ul class="simple">
<li>more terse reporting try to show filesystem path relatively to current dir</li>
<li>improve xfail output a bit</li>
</ul>
</div>
<div class="section" id="b9-2009-07-31">
<h1>1.0.0b9 (2009-07-31)</h1>
<ul class="simple">
<li>cleanly handle and report final teardown of test setup</li>
<li>fix svn-1.6 compat issue with py.path.svnwc().versioned()
(thanks Wouter Vanden Hove)</li>
<li>setup/teardown or collection problems now show as ERRORs
or with big &quot;E&quot;'s in the progress lines.  they are reported
and counted separately.</li>
<li>dist-testing: properly handle test items that get locally
collected but cannot be collected on the remote side - often
due to platform/dependency reasons</li>
<li>simplified py.test.mark API - see keyword plugin documentation</li>
<li>integrate better with logging: capturing now by default captures
test functions and their immediate setup/teardown in a single stream</li>
<li>capsys and capfd funcargs now have a readouterr() and a close() method
(underlyingly py.io.StdCapture/FD objects are used which grew a
readouterr() method as well to return snapshots of captured out/err)</li>
<li>make assert-reinterpretation work better with comparisons not
returning bools (reported with numpy from thanks maciej fijalkowski)</li>
<li>reworked per-test output capturing into the pytest_iocapture.py plugin
and thus removed capturing code from config object</li>
<li>item.repr_failure(excinfo) instead of item.repr_failure(excinfo, outerr)</li>
</ul>
</div>
<div class="section" id="b8-2009-07-22">
<h1>1.0.0b8 (2009-07-22)</h1>
<ul class="simple">
<li>pytest_unittest-plugin is now enabled by default</li>
<li>introduced pytest_keyboardinterrupt hook and
refined pytest_sessionfinish hooked, added tests.</li>
<li>workaround a buggy logging module interaction (&quot;closing already closed
files&quot;).  Thanks to Sridhar Ratnakumar for triggering.</li>
<li>if plugins use &quot;py.test.importorskip&quot; for importing
a dependency only a warning will be issued instead
of exiting the testing process.</li>
<li>many improvements to docs:
- refined funcargs doc , use the term &quot;factory&quot; instead of &quot;provider&quot;
- added a new talk/tutorial doc page
- better download page
- better plugin docstrings
- added new plugins page and automatic doc generation script</li>
<li>fixed teardown problem related to partially failing funcarg setups
(thanks MrTopf for reporting), &quot;pytest_runtest_teardown&quot; is now
always invoked even if the &quot;pytest_runtest_setup&quot; failed.</li>
<li>tweaked doctest output for docstrings in py modules,
thanks Radomir.</li>
</ul>
</div>
<div class="section" id="b7">
<h1>1.0.0b7</h1>
<ul class="simple">
<li>renamed py.test.xfail back to py.test.mark.xfail to avoid
two ways to decorate for xfail</li>
<li>re-added py.test.mark decorator for setting keywords on functions
(it was actually documented so removing it was not nice)</li>
<li>remove scope-argument from request.addfinalizer() because
request.cached_setup has the scope arg. TOOWTDI.</li>
<li>perform setup finalization before reporting failures</li>
<li>apply modified patches from Andreas Kloeckner to allow
test functions to have no func_code (#22) and to make
&quot;-k&quot; and function keywords work  (#20)</li>
<li>apply patch from Daniel Peolzleithner (issue #23)</li>
<li>resolve issue #18, multiprocessing.Manager() and
redirection clash</li>
<li>make __name__ == &quot;__channelexec__&quot; for remote_exec code</li>
</ul>
</div>
<div class="section" id="b3-2009-06-19">
<h1>1.0.0b3 (2009-06-19)</h1>
<ul class="simple">
<li>plugin classes are removed: one now defines
hooks directly in conftest.py or global pytest_*.py
files.</li>
<li>added new pytest_namespace(config) hook that allows
to inject helpers directly to the py.test.* namespace.</li>
<li>documented and refined many hooks</li>
<li>added new style of generative tests via
pytest_generate_tests hook that integrates
well with function arguments.</li>
</ul>
</div>
<div class="section" id="b1">
<h1>1.0.0b1</h1>
<ul class="simple">
<li>introduced new &quot;funcarg&quot; setup method,
see doc/test/funcarg.txt</li>
<li>introduced plugin architecture and many
new py.test plugins, see
doc/test/plugins.txt</li>
<li>teardown_method is now guaranteed to get
called after a test method has run.</li>
<li>new method: py.test.importorskip(mod,minversion)
will either import or call py.test.skip()</li>
<li>completely revised internal py.test architecture</li>
<li>new py.process.ForkedFunc object allowing to
fork execution of a function to a sub process
and getting a result back.</li>
</ul>
<p>XXX lots of things missing here XXX</p>
</div>
<div class="section" id="id730">
<h1>0.9.2</h1>
<ul class="simple">
<li>refined installation and metadata, created new setup.py,
now based on setuptools/ez_setup (thanks to Ralf Schmitt
for his support).</li>
<li>improved the way of making py.* scripts available in
windows environments, they are now added to the
Scripts directory as &quot;.cmd&quot; files.</li>
<li>py.path.svnwc.status() now is more complete and
uses xml output from the 'svn' command if available
(Guido Wesdorp)</li>
<li>fix for py.path.svn* to work with svn 1.5
(Chris Lamb)</li>
<li>fix path.relto(otherpath) method on windows to
use normcase for checking if a path is relative.</li>
<li>py.test's traceback is better parseable from editors
(follows the filenames:LINENO: MSG convention)
(thanks to Osmo Salomaa)</li>
<li>fix to javascript-generation, &quot;py.test --runbrowser&quot;
should work more reliably now</li>
<li>removed previously accidentally added
py.test.broken and py.test.notimplemented helpers.</li>
<li>there now is a py.__version__ attribute</li>
</ul>
</div>
<div class="section" id="id731">
<h1>0.9.1</h1>
<p>This is a fairly complete list of v0.9.1, which can
serve as a reference for developers.</p>
<ul class="simple">
<li>allowing + signs in py.path.svn urls [39106]</li>
<li>fixed support for Failed exceptions without excinfo in py.test [39340]</li>
<li>added support for killing processes for Windows (as well as platforms that
support os.kill) in py.misc.killproc [39655]</li>
<li>added setup/teardown for generative tests to py.test [40702]</li>
<li>added detection of FAILED TO LOAD MODULE to py.test [40703, 40738, 40739]</li>
<li>fixed problem with calling .remove() on wcpaths of non-versioned files in
py.path [44248]</li>
<li>fixed some import and inheritance issues in py.test [41480, 44648, 44655]</li>
<li>fail to run greenlet tests when pypy is available, but without stackless
[45294]</li>
<li>small fixes in rsession tests [45295]</li>
<li>fixed issue with 2.5 type representations in py.test [45483, 45484]</li>
<li>made that internal reporting issues displaying is done atomically in py.test
[45518]</li>
<li>made that non-existing files are ignored by the py.lookup script [45519]</li>
<li>improved exception name creation in py.test [45535]</li>
<li>made that less threads are used in execnet [merge in 45539]</li>
<li>removed lock required for atomic reporting issue displaying in py.test
[45545]</li>
<li>removed globals from execnet [45541, 45547]</li>
<li>refactored cleanup mechanics, made that setDaemon is set to 1 to make atexit
get called in 2.5 (py.execnet) [45548]</li>
<li>fixed bug in joining threads in py.execnet's servemain [45549]</li>
<li>refactored py.test.rsession tests to not rely on exact output format anymore
[45646]</li>
<li>using repr() on test outcome [45647]</li>
<li>added 'Reason' classes for py.test.skip() [45648, 45649]</li>
<li>killed some unnecessary sanity check in py.test.collect [45655]</li>
<li>avoid using os.tmpfile() in py.io.fdcapture because on Windows it's only
usable by Administrators [45901]</li>
<li>added support for locking and non-recursive commits to py.path.svnwc [45994]</li>
<li>locking files in py.execnet to prevent CPython from segfaulting [46010]</li>
<li>added export() method to py.path.svnurl</li>
<li>fixed -d -x in py.test [47277]</li>
<li>fixed argument concatenation problem in py.path.svnwc [49423]</li>
<li>restore py.test behaviour that it exits with code 1 when there are failures
[49974]</li>
<li>don't fail on html files that don't have an accompanying .txt file [50606]</li>
<li>fixed 'utestconvert.py &lt; input' [50645]</li>
<li>small fix for code indentation in py.code.source [50755]</li>
<li>fix _docgen.py documentation building [51285]</li>
<li>improved checks for source representation of code blocks in py.test [51292]</li>
<li>added support for passing authentication to py.path.svn* objects [52000,
52001]</li>
<li>removed sorted() call for py.apigen tests in favour of [].sort() to support
Python 2.3 [52481]</li>
</ul>
</div>
</div>
</body>
</html>
